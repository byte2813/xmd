{"version":3,"sources":["assets\\Scripts\\UI\\OwnedHousePanel.js"],"names":["ItemType","require","OwnedHousePanel","cc","Class","Component","properties","ownedPre","Prefab","ownedParent","Node","tipLbl","Label","ShowPanel","string","JudeHasAny","houseList","Mgr","UserDataMgr","getOwnDataListByType","House","children","length","i","sc","getComponent","j","Id","Refresh","ownNum","active","obj","instantiate","parent","init","mateList","hasAny","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var ItemType = require(\"ItemType\");\r\nvar OwnedHousePanel = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        ownedPre:cc.Prefab,\r\n        ownedParent:cc.Node,\r\n        tipLbl:cc.Label,\r\n    },\r\n\r\n    ShowPanel:function () {\r\n        this.tipLbl.string = \"\";\r\n        if(this.JudeHasAny() == false)\r\n        {\r\n            this.tipLbl.string = \"居无定所,不是您的所想,去房产市场购买一套房产吧\";\r\n            //return;\r\n        }\r\n\r\n        var houseList = cc.Mgr.UserDataMgr.getOwnDataListByType(ItemType.House);\r\n        if(this.ownedParent.children.length != 0)\r\n        {\r\n            //cc.log(\"不用再实例化，已经有了\");\r\n            var children = this.ownedParent.children;\r\n            for (var i = children.length - 1; i >= 0; i--) {\r\n                var sc = children[i].getComponent(\"BelongItem\");\r\n                if(sc != null)\r\n                {\r\n                    for (var j = 0; j < houseList.length; j++) {\r\n                        if(houseList[j].Id == sc.Id)\r\n                        {\r\n                            sc.Refresh(houseList[j]);\r\n                            if(houseList[j].ownNum > 0)\r\n                                children[i].active = true;\r\n                            else\r\n                                children[i].active = false;    \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            for (var i = houseList.length - 1; i >= 0; i--) {\r\n                //cc.log(\"实例化房子\");\r\n                var obj = cc.instantiate(this.ownedPre);\r\n                obj.parent = this.ownedParent;\r\n                obj.getComponent(\"BelongItem\").init(houseList[i], ItemType.House);\r\n                if(houseList[i].ownNum > 0)\r\n                {\r\n                    obj.active = true;\r\n                }\r\n                else\r\n                {\r\n                    obj.active = false;\r\n                }\r\n            }\r\n        }\r\n    }, \r\n\r\n    JudeHasAny:function(){\r\n        var mateList = cc.Mgr.UserDataMgr.getOwnDataListByType(ItemType.House);\r\n        var hasAny = false;\r\n        for (var i = 0; i < mateList.length; i++) {\r\n            if(mateList[i].ownNum > 0)\r\n            {\r\n                hasAny = true;\r\n                return true;\r\n            }\r\n        }\r\n        return hasAny;\r\n    },\r\n});\r\nmodule.exports = OwnedHousePanel;\r\n"]}