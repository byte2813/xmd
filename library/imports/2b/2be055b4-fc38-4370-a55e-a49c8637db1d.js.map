{"version":3,"sources":["assets\\Scripts\\DataMap\\Company\\CompanyMapDecoder.js"],"names":["CompanyData","require","ProData","CompanyMapDecoder","cc","Class","Component","properties","jsonName","companyList","type","DecodeJson","event","self","reCb","loader","loadRes","error","obj","jsonRoot","json","company","i","length","comData","Id","icon","name","inPrice","outPrice","LimitYear","bonusRatio","j","proList","proD","lowRatio","upRatio","weight","unList","getDataByName","data","getDataByItemId","itemId","getJsonLength","getDataList","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var CompanyData = require(\"CompanyData\");\r\nvar ProData = require(\"ProData\");\r\nvar CompanyMapDecoder = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        jsonName:\"company\",\r\n        companyList:{\r\n            default:[],\r\n            type:[CompanyData],\r\n        },\r\n    },\r\n\r\n    //解析数据\r\n    DecodeJson:function (event) {\r\n        //cc.log(\"===解析公司数据===\");\r\n        var self = this;\r\n        self.reCb = event;\r\n        cc.loader.loadRes(\"json/\"+self.jsonName, function (error, obj) {\r\n            if(error)\r\n            {\r\n                //cc.log(\"+++解析出错，查下json+++\" + error);\r\n                self.reCb(false);\r\n                return;\r\n            }\r\n            \r\n            var jsonRoot = obj.json.company;\r\n            //cc.log(\"===数据长度===\" + jsonRoot.length);\r\n            for (var i = 0; i < jsonRoot.length; i++) {\r\n                var comData = new CompanyData();\r\n                comData.Id = jsonRoot[i].Id;\r\n                comData.icon = jsonRoot[i].icon;\r\n                comData.name = jsonRoot[i].name;\r\n                comData.inPrice = jsonRoot[i].inPrice;\r\n                comData.outPrice = jsonRoot[i].outPrice; //破产点\r\n                comData.LimitYear = jsonRoot[i].LimitYear;\r\n                comData.bonusRatio = jsonRoot[i].bonusRatio;\r\n                //买到后刷这个比例\r\n                for (var j = 0; j < jsonRoot[i].proList.length; j++) {\r\n                    var proD = new ProData();\r\n                    proD.lowRatio = jsonRoot[i].proList[j][0];\r\n                    proD.upRatio = jsonRoot[i].proList[j][1];\r\n                    proD.weight = jsonRoot[i].proList[j][2];\r\n                    comData.proList[j] = proD;\r\n                }\r\n                //没有买时候刷这个比例\r\n                for (var j = 0; j < jsonRoot[i].unList.length; j++) {\r\n                    var proD = new ProData();\r\n                    proD.lowRatio = jsonRoot[i].unList[j][0];\r\n                    proD.upRatio = jsonRoot[i].unList[j][1];\r\n                    proD.weight = jsonRoot[i].unList[j][2];\r\n                    comData.unList[j] = proD;\r\n                }\r\n                self.companyList[i] = comData; \r\n            }\r\n            self.reCb(true);\r\n        });\r\n    },\r\n\r\n    //通过名字拿到当前的数据 不建议用，你要用我也没办法\r\n    getDataByName:function (name) {\r\n        var data = null;\r\n        for (var i = this.companyList.length - 1; i >= 0; i--) {\r\n            if(name == this.companyList[i].name)\r\n            {\r\n                data = this.companyList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    //通过itemid获取数据\r\n    getDataByItemId:function(itemId){\r\n        var data = null;\r\n        for (var i = this.companyList.length - 1; i >= 0; i--) {\r\n            if(itemId == this.companyList[i].Id)\r\n            {\r\n                data = this.companyList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    getJsonLength:function(){\r\n        return this.companyList.length\r\n    },\r\n\r\n    getDataList:function(){\r\n        return this.companyList;\r\n    },\r\n\r\n});\r\nmodule.exports = CompanyMapDecoder;\r\n"]}