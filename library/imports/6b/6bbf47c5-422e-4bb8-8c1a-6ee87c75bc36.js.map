{"version":3,"sources":["assets\\Scripts\\UI\\OwnedMatePanel.js"],"names":["ItemType","require","OwnedMatePanel","cc","Class","Component","properties","ownedPre","Prefab","ownedParent","Node","tipLbl","Label","ShowPanel","string","JudeHasAny","mateList","Mgr","UserDataMgr","getOwnDataListByType","Mate","children","length","i","sc","getComponent","j","Id","Data","UpLv","active","obj","instantiate","parent","init","hasAny","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var ItemType = require(\"ItemType\");\r\nvar OwnedMatePanel = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        ownedPre:cc.Prefab,\r\n        ownedParent:cc.Node,\r\n        tipLbl:cc.Label,\r\n    },\r\n\r\n    ShowPanel:function () {\r\n        this.tipLbl.string = \"\";\r\n        if(this.JudeHasAny() == false)\r\n        {\r\n            this.tipLbl.string = \"您还未与任何一位喜结良缘,去约会圣地约起来吧\";\r\n            //return;\r\n        }\r\n\r\n        var mateList = cc.Mgr.UserDataMgr.getOwnDataListByType(ItemType.Mate);\r\n        if(this.ownedParent.children.length != 0)\r\n        {\r\n            //cc.log(\"不用再实例化，已经有了\");\r\n            var children = this.ownedParent.children;\r\n            for (var i = children.length - 1; i >= 0; i--) {\r\n                var sc = children[i].getComponent(\"BelongMateItem\");\r\n                if(sc != null)\r\n                {\r\n                    for (var j = 0; j < mateList.length; j++) {\r\n                        if(mateList[j].Id == sc.Data.Id)\r\n                        {\r\n                            //cc.log(\"+++++++++++++++++++++\" + mateList[j].UpLv);\r\n                            if(mateList[j].UpLv == true)\r\n                                children[i].active = true;\r\n                            else\r\n                                children[i].active = false;    \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            for (var i = mateList.length - 1; i >= 0; i--) {\r\n                //cc.log(\"实例化伴侣\");\r\n                var obj = cc.instantiate(this.ownedPre);\r\n                obj.parent = this.ownedParent;\r\n                obj.getComponent(\"BelongMateItem\").init(mateList[i], ItemType.Mate);\r\n                if(mateList[i].UpLv == true)\r\n                {\r\n                    obj.active = true;\r\n                }\r\n                else\r\n                {\r\n                    obj.active = false;\r\n                }\r\n            }\r\n        } \r\n    },\r\n\r\n    JudeHasAny:function(){\r\n        var mateList = cc.Mgr.UserDataMgr.getOwnDataListByType(ItemType.Mate);\r\n        var hasAny = false;\r\n        for (var i = 0; i < mateList.length; i++) {\r\n            if(mateList[i].UpLv == true)\r\n            {\r\n                hasAny = true;\r\n                return true;\r\n            }\r\n        }\r\n        return hasAny;\r\n    },\r\n});\r\nmodule.exports = OwnedMatePanel;\r\n"]}