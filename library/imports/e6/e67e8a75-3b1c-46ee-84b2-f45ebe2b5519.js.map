{"version":3,"sources":["assets\\Scripts\\UI\\EventPanel.js"],"names":["ItemType","require","RewardType","UserState","EventPanel","cc","Class","Component","properties","desLbl","Label","btnLbl","btnTip","Node","btnDesLbl","Data","ShowPanel","Id","data","Mgr","MapDataMgr","getDataByItemTypeAndId","EventData","string","global","getTranslation","desId","i","cost","active","costType","NULL","Cash","costNum","Math","floor","UserDataMgr","EventCostBonus","HP","Reputation","ClickConfirmY","param","text","des","forWhat","userState","OK","HpPoint","result","seed","random","YResults","Pdata","GetOrCostDataByRewardType","rewardType","rewardNum","rewardId","GetEventReward","Goods","Stock","StockPrice","companyId","director","GlobalEvent","emit","Event","OpenEventResult","ClosePanel","ClickConfirmN","NResults","Car","House","companyName","AudioMgr","playSFX","node","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var ItemType = require(\"ItemType\");\r\nvar RewardType = require(\"RewardType\");\r\nvar UserState = require(\"UserState\");\r\nvar EventPanel = cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        desLbl:cc.Label,\r\n\r\n        btnLbl:[cc.Label],\r\n\r\n        btnTip:[cc.Node],\r\n        btnDesLbl:[cc.Label],\r\n        Data:null,\r\n    },\r\n\r\n    ShowPanel:function (Id) {\r\n        //cc.log(\"根据事件来处理问题  Id = \" + Id);\r\n        var data = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.EventData, Id);\r\n        this.Data = data;\r\n        this.desLbl.string  = cc.Mgr.global.getTranslation(\"event_\"+data.desId);\r\n\r\n        for (var i = 0; i < 2; i++) {\r\n            this.btnLbl[i].string = cc.Mgr.global.getTranslation(\"event_\"+data.cost[i].desId);\r\n            this.btnTip[i].active = true;\r\n            if(data.cost[i].costType == RewardType.NULL)\r\n            {\r\n                this.btnTip[i].active = false;\r\n            }\r\n            else if(data.cost[i].costType == RewardType.Cash)\r\n            {\r\n                var costNum = Math.floor(data.cost[i].costNum * (1-cc.Mgr.UserDataMgr.EventCostBonus));\r\n                this.btnDesLbl[i].string = \"花费现金:\"+costNum;\r\n            }\r\n            else if(data.cost[i].costType == RewardType.HP)\r\n            {\r\n                this.btnDesLbl[i].string = \"消耗体力:\"+data.cost[i].costNum;\r\n            }\r\n            else if(data.cost[i].costType == RewardType.Reputation)\r\n            {\r\n                this.btnDesLbl[i].string = \"名声损失:\"+data.cost[i].costNum;\r\n            }\r\n        }\r\n    },\r\n\r\n    ClickConfirmY:function(){\r\n        var param = {};\r\n        param.text = \"\";\r\n        param.des = \"\";\r\n        param.forWhat = \"Event_No\";\r\n        if(cc.Mgr.UserDataMgr.userState == UserState.OK)\r\n        {\r\n            if(this.Data.cost[0].costType == RewardType.NULL)\r\n            {\r\n                param.forWhat = \"Event_Yes\";\r\n            }\r\n            else if(this.Data.cost[0].costType == RewardType.Cash)\r\n            {\r\n                if(cc.Mgr.UserDataMgr.Cash >= this.Data.cost[0].costNum)\r\n                {\r\n                    param.forWhat = \"Event_Yes\";\r\n                    cc.Mgr.UserDataMgr.Cash -= this.Data.cost[0].costNum;\r\n                }\r\n                else\r\n                {\r\n                    param.text = \"钱不够,无法参与\";\r\n                    param.forWhat = \"Event_No\";\r\n                }\r\n            }\r\n            else if(this.Data.cost[0].costType == RewardType.HP)\r\n            {\r\n                if(cc.Mgr.UserDataMgr.HpPoint >= this.Data.cost[0].costNum)\r\n                {\r\n                    param.forWhat = \"Event_Yes\";\r\n                    cc.Mgr.UserDataMgr.HpPoint -= this.Data.cost[0].costNum;\r\n                }\r\n                else\r\n                {\r\n                    param.text = \"你的健康状态已无法支持你进入本次活动\";\r\n                    param.forWhat = \"Event_No\";\r\n                }\r\n            }\r\n            else if(this.Data.cost[0].costType == RewardType.Reputation)\r\n            {\r\n                if(cc.Mgr.UserDataMgr.Reputation >= this.Data.cost[0].costNum)\r\n                {\r\n                    param.forWhat = \"Event_Yes\";\r\n                    cc.Mgr.UserDataMgr.Reputation -= this.Data.cost[0].costNum;\r\n                }\r\n                else\r\n                {\r\n                    param.text = \"你的名声已无法支持你进入本次活动\";\r\n                    param.forWhat = \"Event_No\";\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            param.text = \"尚在治疗过程中,停止一切活动\";\r\n            param.forWhat = \"Event_No\";\r\n        }\r\n        if(param.forWhat != \"Event_No\")\r\n        {\r\n            param.forWhat = \"Event_Yes\";\r\n            var result = null;\r\n            var seed = Math.random();\r\n            if(seed > 0.5)\r\n            {\r\n                result = this.Data.YResults[1];\r\n                param.text = cc.Mgr.global.getTranslation(\"event_\"+result.desId);\r\n            }\r\n            else\r\n            {\r\n                result = this.Data.YResults[0];\r\n                param.text = cc.Mgr.global.getTranslation(\"event_\"+result.desId);\r\n            }\r\n\r\n            if(result != null)\r\n            {\r\n                param.Pdata = cc.Mgr.UserDataMgr.GetOrCostDataByRewardType(result.rewardType, result.rewardNum, result.rewardId);\r\n                var des = this.GetEventReward(result.rewardType, result.rewardId);\r\n                if(des != \"\")\r\n                {\r\n                    if(result.rewardNum > 0 && result.rewardType == RewardType.Goods)\r\n                    {\r\n                        if(param.Pdata.Id == -1)\r\n                        {\r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                            param.text = \"仓库已满，无法获得\";//\"+\" + result.rewardNum;\r\n                        }\r\n                        else\r\n                        {\r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                            param.text = param.text + \"\\n\";//\"+\" + result.rewardNum;\r\n                        }  \r\n                    }\r\n                    else if(result.rewardNum > 0 && (result.rewardType == RewardType.Stock || result.rewardType == RewardType.StockPrice))\r\n                    {\r\n                        if(param.Pdata.companyId == -1)\r\n                        {\r\n                            if(this.Data.cost[0].costType == RewardType.Cash)\r\n                                cc.Mgr.UserDataMgr.Cash += this.Data.cost[0].costNum;\r\n                            \r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                            param.text = \"该公司尚未创立,奖励无法获得,花费现金返回\";//\"+\" + result.rewardNum;\r\n                        }\r\n                        else\r\n                        {\r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                            param.text = param.text + \"\\n\";//\"+\" + result.rewardNum;\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        if(result.rewardNum > 0)\r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                        else\r\n                            param.des = des + result.rewardNum;\r\n                        param.text = param.text + \"\\n\" ;//+ result.rewardNum;\r\n                    }\r\n                }    \r\n            }\r\n        }\r\n        else\r\n        {\r\n            \r\n        }\r\n        //cc.log(\"___________________________\" + param.forWhat);\r\n        //cc.log(\" ====事件最终描述 ============= \" + param.text);\r\n        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenEventResult , param);\r\n\r\n        this.ClosePanel();\r\n    },\r\n\r\n    ClickConfirmN:function(){\r\n        var param = {};\r\n        param.forWhat = \"Event_No\";\r\n        param.text = \"\";\r\n        param.des = \"\";\r\n        if(cc.Mgr.UserDataMgr.userState == UserState.OK)\r\n        {\r\n            if(this.Data.cost[1].costType == RewardType.NULL)\r\n            {\r\n                param.forWhat = \"Event_Yes\";\r\n            }\r\n            else if(this.Data.cost[1].costType == RewardType.Cash)\r\n            {\r\n                if(cc.Mgr.UserDataMgr.Cash >= this.Data.cost[1].costNum)\r\n                {\r\n                    param.forWhat = \"Event_Yes\";\r\n                    cc.Mgr.UserDataMgr.Cash -= this.Data.cost[1].costNum;\r\n                }\r\n                else\r\n                {\r\n                    param.text = \"钱不够,无法参与\";\r\n                    param.forWhat = \"Event_No\";\r\n                }\r\n            }\r\n            else if(this.Data.cost[1].costType == RewardType.HP)\r\n            {\r\n                if(cc.Mgr.UserDataMgr.HpPoint >= this.Data.cost[1].costNum)\r\n                {\r\n                    param.forWhat = \"Event_Yes\";\r\n                    cc.Mgr.UserDataMgr.HpPoint -= this.Data.cost[1].costNum;\r\n                }\r\n                else\r\n                {\r\n                    param.text = \"你的健康状态已无法支持你进入本次活动\";\r\n                    param.forWhat = \"Event_No\";\r\n                }\r\n                \r\n            }\r\n            else if(this.Data.cost[1].costType == RewardType.Reputation)\r\n            {\r\n                if(cc.Mgr.UserDataMgr.Reputation >= this.Data.cost[1].costNum)\r\n                {\r\n                    param.forWhat = \"Event_Yes\";\r\n                    cc.Mgr.UserDataMgr.Reputation -= this.Data.cost[1].costNum;\r\n                }\r\n                else\r\n                {\r\n                    param.text = \"你的名声已无法支持你进入本次活动\";\r\n                    param.forWhat = \"Event_No\";\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            param.text = \"尚在治疗过程中,停止一切活动\";\r\n            param.forWhat = \"Event_No\";\r\n        }\r\n\r\n        if(param.forWhat != \"Event_No\")\r\n        {\r\n            param.forWhat = \"Event_Yes\";\r\n            var seed = Math.random();\r\n            var result = null;\r\n            if(seed > 0.5)\r\n            {\r\n                result = this.Data.NResults[1];\r\n                param.text = cc.Mgr.global.getTranslation(\"event_\"+result.desId);\r\n            }\r\n            else\r\n            {\r\n                result = this.Data.NResults[0];\r\n                param.text = cc.Mgr.global.getTranslation(\"event_\"+result.desId);\r\n            }\r\n\r\n            if(result != null)\r\n            {\r\n                param.Pdata = cc.Mgr.UserDataMgr.GetOrCostDataByRewardType(result.rewardType, result.rewardNum, result.rewardId);\r\n                var des = this.GetEventReward(result.rewardType, result.rewardId);\r\n                if(des != \"\")\r\n                {\r\n                    if(result.rewardNum > 0 && result.rewardType == RewardType.Goods )\r\n                    {\r\n                        if(param.Pdata.Id == -1)\r\n                        {\r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                            param.text = \"仓库已满，无法获得\";//\"+\" + result.rewardNum;\r\n                        }\r\n                        else\r\n                        {\r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                            param.text = param.text + \"\\n\";//\"+\" + result.rewardNum;\r\n                        }  \r\n                    }\r\n                    else if(result.rewardNum > 0 && (result.rewardType == RewardType.Stock || result.rewardType == RewardType.StockPrice))\r\n                    {\r\n                        if(param.Pdata.companyId == -1)\r\n                        {\r\n                             if(this.Data.cost[0].costType == RewardType.Cash)\r\n                                cc.Mgr.UserDataMgr.Cash += this.Data.cost[0].costNum;\r\n                            \r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                            param.text = \"该公司尚未创立,奖励无法获得,花费现金返回\";//\"+\" + result.rewardNum;\r\n                        }\r\n                        else\r\n                        {\r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                            param.text = param.text + \"\\n\";//\"+\" + result.rewardNum;\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        if(result.rewardNum > 0)\r\n                            param.des = des + \"+\" + result.rewardNum;\r\n                        else\r\n                            param.des = des + result.rewardNum;\r\n                        param.text = param.text + \"\\n\";//+ result.rewardNum;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            \r\n        }\r\n        //cc.log(\"事件最终描述 ============= \" + param.text);\r\n        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenEventResult , param);\r\n        this.ClosePanel();\r\n    },\r\n\r\n    GetEventReward:function(rewardType, rewardId){\r\n        var des = \"\";\r\n        switch (rewardType) {\r\n            case RewardType.NULL:\r\n                des = \"\";\r\n                break;\r\n            case RewardType.Cash:\r\n                des = \"现金\";\r\n                break;\r\n            case RewardType.Car:\r\n                des = \"汽车\";\r\n                break;\r\n            case RewardType.House:\r\n                des = \"房子\";\r\n                break;\r\n            case RewardType.HP:\r\n                des = \"健康值\";\r\n                break;\r\n            case RewardType.Goods:\r\n                des = \"商品\";\r\n                break;\r\n            case RewardType.Reputation:\r\n                des = \"名声\";\r\n                break;\r\n            case RewardType.Stock:\r\n                var companyName = cc.Mgr.global.getTranslation(\"company_\" + rewardId);\r\n                des = companyName + \"股票\";\r\n                break;\r\n            case RewardType.StockPrice:\r\n                var companyName = cc.Mgr.global.getTranslation(\"company_\" + rewardId);\r\n                des = companyName + \"股票价格\";\r\n                break;\r\n        }\r\n        return des;\r\n    },\r\n\r\n    ClosePanel:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.node.active = false;\r\n    },\r\n});\r\nmodule.exports = EventPanel;\r\n"]}