{"version":3,"sources":["assets\\Scripts\\DataMap\\Goods\\GoodMapDecoder.js"],"names":["GoodsData","require","PriceData","GoodMapDecoder","cc","Class","Component","properties","jsonName","goodsList","type","DecodeJson","event","self","reCb","loader","loadRes","error","obj","jsonRoot","json","goods","i","length","goodsData","sex","Id","itemId","icon","name","j","priceList","price","data","lowprice","highprice","probability","getDataByName","getDataByItemId","getJsonLength","getDataList","getDataListBySex","Sex","dataList","push","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var GoodsData = require(\"GoodsData\");\r\nvar PriceData = require(\"PriceData\");\r\nvar GoodMapDecoder = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        jsonName:\"goods\",\r\n        goodsList:{\r\n            default:[],\r\n            type:[GoodsData],\r\n        },\r\n    },\r\n\r\n    //解析数据\r\n    DecodeJson:function (event) {\r\n        //cc.log(\"===解析物品数据===\");\r\n        var self = this;\r\n        self.reCb = event;\r\n        cc.loader.loadRes(\"json/\"+self.jsonName, function (error, obj) {\r\n            if(error)\r\n            {\r\n                //cc.log(\"+++解析出错，查下json+++\" + error);\r\n                self.reCb(false);\r\n                return;\r\n            }\r\n            \r\n            var jsonRoot = obj.json.goods;\r\n            //cc.log(\"===数据长度===\" + jsonRoot.length);\r\n            for (var i = 0; i < jsonRoot.length; i++) {\r\n                var goodsData = new GoodsData();\r\n                goodsData.sex = jsonRoot[i].sex;\r\n                goodsData.Id = jsonRoot[i].itemId;\r\n                goodsData.icon = jsonRoot[i].icon;\r\n                goodsData.name = jsonRoot[i].name;\r\n                for (var j = 0; j < jsonRoot[i].priceList.length; j++) {\r\n                    var price = new PriceData();\r\n                    var data = jsonRoot[i].priceList[j];\r\n                    price.lowprice = data[0];\r\n                    price.highprice = data[1];\r\n                    price.probability = data[2];\r\n                    goodsData.priceList[j] =  price;\r\n                }\r\n                self.goodsList[i] = goodsData; \r\n            }\r\n            self.reCb(true);\r\n        });\r\n    },\r\n\r\n    //通过名字拿到当前的数据 不建议用，你要用我也没办法\r\n    getDataByName:function (name) {\r\n        var data = null;\r\n        for (var i = this.goodsList.length - 1; i >= 0; i--) {\r\n            if(name == this.goodsList[i].name)\r\n            {\r\n                data = this.goodsList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    //通过itemid获取数据\r\n    getDataByItemId:function(itemId){\r\n        var data = null;\r\n        for (var i = this.goodsList.length - 1; i >= 0; i--) {\r\n            if(itemId == this.goodsList[i].Id)\r\n            {\r\n                data = this.goodsList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    getJsonLength:function(){\r\n        return this.goodsList.length\r\n    },\r\n\r\n    getDataList:function(){\r\n        return this.goodsList;\r\n    },\r\n\r\n    getDataListBySex:function(Sex){\r\n        var dataList = [];\r\n        //var index = 0;\r\n        for (var i = 0; i < this.goodsList.length; i++) {\r\n            if(this.goodsList[i].sex == Sex || this.goodsList[i].sex == 0)\r\n            {\r\n                //dataList[index] = this.goodsList[i];\r\n                //index += 1;\r\n                dataList.push(this.goodsList[i])\r\n            }\r\n        }\r\n        //cc.log(\"对应性别的玩家展示物品种类 ====== \" + dataList.length);\r\n        return dataList;\r\n    },\r\n});\r\nmodule.exports = GoodMapDecoder;\r\n"]}