{"version":3,"sources":["assets\\Scripts\\UI\\CompanyCreateTipPanel.js"],"names":["CompanyCreateTipPanel","cc","Class","Component","properties","Atlas","SpriteAtlas","IconSp","Sprite","NameLbl","NumLbl","Label","DesLbl","RichText","Data","ShowPanel","data","spriteFrame","getSpriteFrame","name","icon","string","Mgr","global","CompanyCreateCost","getTranslation","Id","FormatNum","Math","floor","stockPrice","bonusRatio","ClickCreate","AudioMgr","playSFX","UserDataMgr","Cash","param","forWhat","text","director","GlobalEvent","emit","Event","OpenCommonTip","FundationAge","FundationCompanyId","Age","CreateCompanyTimes","Num","price","cost","stockCost","CreateCompany","hasCompany","CreateCompanySuccess","ClosePanel","node","active","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nvar CompanyCreateTipPanel = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Atlas:cc.SpriteAtlas,\r\n        IconSp:cc.Sprite,\r\n        NameLbl:cc.Sprite,\r\n        NumLbl:cc.Label,\r\n        DesLbl:cc.RichText,\r\n        Data:null,\r\n    },\r\n\r\n    ShowPanel:function (data) {\r\n      this.Data = null;\r\n      this.Data = data;  \r\n      this.NameLbl.spriteFrame = this.Atlas.getSpriteFrame(data.name);\r\n      this.IconSp.spriteFrame = this.Atlas.getSpriteFrame(data.icon);\r\n      this.NumLbl.string = cc.Mgr.global.CompanyCreateCost;\r\n      var name = cc.Mgr.global.getTranslation(\"company_\"+data.Id);\r\n      this.DesLbl.string = \"<color=#696969>创办</c>\"+\"<color=#e77122>\"+name+\"</c>\" + \"<color=#696969>需要花费</c>\" +\"<color=#e77122>\"+ cc.Mgr.global.FormatNum(Math.floor(cc.Mgr.global.CompanyCreateCost * 100 * data.stockPrice))\r\n                           +\"</c>\" +\"<color=#696969>,收益率为</c>\" + \"<color=#e77122>\"+(data.bonusRatio*100)+\"%\" +\"</c>\";  \r\n    },\r\n\r\n    ClickCreate:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        if(cc.Mgr.UserDataMgr.Cash < (cc.Mgr.global.CompanyCreateCost * 100 * this.Data.stockPrice))\r\n        {\r\n            var param = {};\r\n            param.forWhat = \"\";\r\n            param.text = \"现金不够\";\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            return ;\r\n        }\r\n        if(cc.Mgr.UserDataMgr.FundationAge == 0)\r\n        {\r\n            cc.Mgr.UserDataMgr.FundationCompanyId = this.Data.Id;\r\n            cc.Mgr.UserDataMgr.FundationAge = cc.Mgr.UserDataMgr.Age;\r\n        }\r\n\r\n        cc.Mgr.global.CreateCompanyTimes += 1;\r\n        cc.Mgr.UserDataMgr.Cash -= Math.floor(cc.Mgr.global.CompanyCreateCost * 100 * this.Data.stockPrice);\r\n        var param = {};\r\n        param.Num = cc.Mgr.global.CompanyCreateCost * 100;\r\n        param.price = this.Data.stockPrice;\r\n        param.cost = this.Data.stockCost;\r\n        param.Id = this.Data.Id;\r\n        var data = cc.Mgr.UserDataMgr.CreateCompany(param);\r\n        //通知刷新UI\r\n        cc.Mgr.UserDataMgr.hasCompany = true;//企业只能创办一个\r\n        cc.director.GlobalEvent.emit(cc.Mgr.Event.CreateCompanySuccess, data);\r\n        this.ClosePanel();\r\n    },\r\n\r\n    ClosePanel:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.node.active =false;\r\n    },\r\n});\r\nmodule.exports = CompanyCreateTipPanel;\r\n"]}