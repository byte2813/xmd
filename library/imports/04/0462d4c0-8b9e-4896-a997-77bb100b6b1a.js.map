{"version":3,"sources":["assets\\Scripts\\UI\\MateItem.js"],"names":["ItemType","require","MateItem","cc","Class","Component","properties","Atlas","SpriteAtlas","NameLbl","Sprite","iconSp","LovePointBar","ProgressBar","LovePoint","Integer","Id","dateBtnSp","unlock","ChangeUnLockState","data","canDate","setState","node","active","Mgr","UserDataMgr","Sex","spriteFrame","getSpriteFrame","icon","init","name","progress","RefreshLovePoint","OpenMateItemPanel","AudioMgr","playSFX","getDataByItemTypeAndId","Mate","UpLv","param","forWhat","text","global","getTranslation","director","GlobalEvent","emit","Event","OpenCommonTip","OpenMateTip","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var ItemType = require(\"ItemType\");\r\nvar MateItem = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Atlas:cc.SpriteAtlas,\r\n        NameLbl:cc.Sprite,\r\n        iconSp:cc.Sprite,\r\n        LovePointBar:cc.ProgressBar,\r\n        LovePoint:cc.Integer,\r\n        Id:cc.Integer,\r\n\r\n        dateBtnSp:cc.Sprite,\r\n\r\n        unlock:false,\r\n    },\r\n\r\n    ChangeUnLockState:function(data){\r\n        if(!data.canDate)\r\n        {\r\n            this.dateBtnSp.setState(1);\r\n            this.NameLbl.node.active = false;\r\n            if(cc.Mgr.UserDataMgr.Sex == 1)\r\n                this.iconSp.spriteFrame = this.Atlas.getSpriteFrame(\"nowoman\");\r\n            else\r\n                this.iconSp.spriteFrame = this.Atlas.getSpriteFrame(\"noman\");\r\n        }\r\n        else\r\n        {\r\n            this.NameLbl.node.active = true;\r\n            this.dateBtnSp.setState(0);\r\n            this.iconSp.spriteFrame = this.Atlas.getSpriteFrame(data.icon);\r\n        }\r\n        this.unlock = data.canDate;\r\n    },\r\n\r\n    init:function (data) {\r\n        this.LovePoint = 0;\r\n        this.NameLbl.spriteFrame = this.Atlas.getSpriteFrame(data.name);\r\n        this.iconSp.spriteFrame = this.Atlas.getSpriteFrame(data.icon);\r\n        this.LovePointBar.progress = this.LovePoint/100;\r\n        this.Id = data.Id;\r\n        this.unlock = data.canDate;\r\n        this.ChangeUnLockState(data);\r\n    },\r\n\r\n    RefreshLovePoint:function(data){\r\n        this.LovePoint = data.LovePoint;\r\n        this.LovePointBar.progress = this.LovePoint/100;\r\n        if(this.LovePoint >= 100)\r\n            this.dateBtnSp.node.active = false;\r\n        else\r\n            this.dateBtnSp.node.active = true;\r\n    },\r\n\r\n    OpenMateItemPanel:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        var data = cc.Mgr.UserDataMgr.getDataByItemTypeAndId(ItemType.Mate, this.Id);\r\n        if(data.UpLv == true)\r\n        {\r\n            //var param = {};\r\n            //param.text = cc.Mgr.global.getTranslation(\"MateHas_\" + cc.Mgr.UserDataMgr.Sex);\r\n            //cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            return;\r\n        }\r\n        if(data.canDate == false)\r\n        {\r\n            var param = {};\r\n            param.forWhat = \"OpenDate\";//打开约会面板\r\n            param.text = cc.Mgr.global.getTranslation(\"MateUnlockTip\");\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            return;\r\n        }\r\n        \r\n        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenMateTip, data);\r\n    },\r\n});\r\nmodule.exports = MateItem;\r\n"]}