{"version":3,"sources":["assets\\Scripts\\UI\\MateItemPanel.js"],"names":["ItemType","require","MateGetType","MateBonusType","MateItemPanel","cc","Class","Component","properties","Atlas","SpriteAtlas","cost","Integer","nameLbl","Sprite","iconSp","desLbl","Label","MarryCond","Node","MarryCondLbl","Id","LovePoint","PdesLbl","ShowPanel","data","spriteFrame","getSpriteFrame","icon","mateData","Mgr","MapDataMgr","getDataByItemTypeAndId","Mate","lovePointList","index","i","length","curLevel","idex","Math","floor","random","string","global","getTranslation","UserDataMgr","DateMoneyBonus","active","DD","getMateBonusDes","getUnlockTypes","getCondList","ClosePanel","AudioMgr","playSFX","node","bonusList","str","bonusType","HP","bonusNum","Reputation","Money","WareHouseCapcity","Treat","DateClick","flag","JudeHasAnyMate","param","seed","text","director","GlobalEvent","emit","Event","OpenCommonTip","Cash","result","JudeCanMarry","canMarry","des","desList","outpar","RefreshMateData","isFull","getBonus","OpenMarry","forWhat","dt","DateSuccess","txt","cond","unlockType","House","JudeHasHouse","value","Car","JudeHasCar","Asset","JudeAsset","JudeReputation","JudeHpPoint","Company","JudeHasCompany","push","getCondDes","type","name","getMateBonusReward","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var ItemType = require(\"ItemType\");\r\nvar MateGetType = require(\"MateGetType\");\r\nvar MateBonusType = require(\"MateBonusType\");\r\nvar MateItemPanel = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Atlas:cc.SpriteAtlas,\r\n        cost:cc.Integer,\r\n        nameLbl:cc.Sprite,\r\n        iconSp:cc.Sprite,\r\n        desLbl:cc.Label,\r\n        MarryCond:cc.Node,\r\n        MarryCondLbl:cc.Label,\r\n        Id:cc.Integer,\r\n        LovePoint:cc.Integer,\r\n        PdesLbl:cc.Label,\r\n    },\r\n\r\n    ShowPanel:function (data) {\r\n    \tthis.Id = data.Id;\r\n        this.LovePoint = data.LovePoint;\r\n    \tthis.iconSp.spriteFrame = this.Atlas.getSpriteFrame(data.icon);\r\n    \t//this.nameLbl.string = data.name;\r\n    \tvar mateData = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.Mate, data.Id);\r\n    \tvar lovePointList = mateData.lovePointList;\r\n    \tvar index = 0;\r\n    \tfor (var i = lovePointList.length - 1; i >= 0; i--) {\r\n    \t\tif(lovePointList[i].curLevel == data.curLevel)\r\n    \t\t{\r\n    \t\t\tindex = i;\r\n    \t\t\tbreak;\r\n    \t\t}\r\n    \t}\r\n        var idex = 1 + Math.floor(Math.random() * 6);\r\n        this.PdesLbl.string = cc.Mgr.global.getTranslation(\"date_\"+this.Id);\r\n        this.cost = lovePointList[index].cost - Math.floor(lovePointList[index].cost * cc.Mgr.UserDataMgr.DateMoneyBonus);\r\n    \tthis.desLbl.string = this.cost;\r\n\r\n        this.MarryCond.active = true;\r\n        if(this.LovePoint == 99)\r\n        {\r\n            var DD = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.Mate, this.Id);\r\n            this.PdesLbl.string = \"结婚后:\"+this.getMateBonusDes();\r\n            this.MarryCondLbl.string = this.getUnlockTypes(DD.getCondList);\r\n        }\r\n        else\r\n        {\r\n            this.MarryCondLbl.string = \"亲密度达到99显示\";\r\n        }\r\n    },\r\n\r\n    ClosePanel:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n    \tthis.node.active = false;\r\n    },\r\n\r\n    getMateBonusDes:function () {\r\n        var bonusList = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.Mate ,this.Id).bonusList;\r\n        var str = \"\";\r\n        for (var i = 0; i < bonusList.length; i++) {\r\n            switch(bonusList[i].bonusType)\r\n            {\r\n                case MateBonusType.HP:\r\n                    if(bonusList[i].bonusNum>0)\r\n                        str = str+\" \" + \"每年健康:+\" + bonusList[i].bonusNum;\r\n                    else\r\n                        str = str+\" \" + \"每年健康:\" + bonusList[i].bonusNum;\r\n                    break;\r\n                case MateBonusType.Reputation:\r\n                    str = str+\" \"  + \"每年名声:+\" + bonusList[i].bonusNum;\r\n                    break;\r\n                case MateBonusType.Money:\r\n                    str = str+\" \"  + \"每年现金:+\" + bonusList[i].bonusNum;\r\n                    break;\r\n                case MateBonusType.WareHouseCapcity:\r\n                    str = str+\" \"  + \"仓储:+\" + bonusList[i].bonusNum;\r\n                    break;\r\n                case MateBonusType.Treat:\r\n                    str = str+\" \"  + \"治疗降费:\" + bonusList[i].bonusNum*100 + \"%\";\r\n                    break;\r\n            }\r\n        }\r\n        return str;\r\n    },\r\n\r\n    //约起来\r\n    DateClick:function(){\r\n        var flag = cc.Mgr.UserDataMgr.JudeHasAnyMate();\r\n        if(flag && this.LovePoint == 99)\r\n        {\r\n            cc.Mgr.AudioMgr.playSFX(\"click\");\r\n            var param = {};\r\n            var seed = Math.floor(Math.random() * 2);\r\n            param.text = cc.Mgr.global.getTranslation(\"HasMarray_\" + seed);\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            return;\r\n        }\r\n\r\n    \tif(cc.Mgr.UserDataMgr.Cash < this.cost)\r\n    \t{\r\n            cc.Mgr.AudioMgr.playSFX(\"click\");\r\n    \t\tvar param = {};\r\n            var seed = Math.floor(Math.random() * 2);\r\n    \t\tparam.text = cc.Mgr.global.getTranslation(\"NoMoneyDate_\" + seed);\r\n    \t\tcc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n    \t\treturn;\r\n    \t}\r\n\r\n        var DD = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.Mate, this.Id);\r\n        var result = this.JudeCanMarry(DD.getCondList);\r\n        if(this.LovePoint == 99 && !result.canMarry)\r\n        {\r\n            cc.Mgr.AudioMgr.playSFX(\"click\");\r\n            var param = {};\r\n            var des = \"\";\r\n            //cc.log(\"=======================\" + result.desList.length);\r\n            for (var i = 0; i < result.desList.length; i++) {\r\n                des = des+\"\\n\" + cc.Mgr.global.getTranslation(\"MateMarryCond_\" + this.Id);\r\n            }\r\n            param.text = des;\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n        }\r\n        else\r\n        {\r\n            cc.Mgr.UserDataMgr.Cash -= this.cost;\r\n            var outpar = cc.Mgr.UserDataMgr.RefreshMateData(this.Id);\r\n            if(outpar.isFull == true)\r\n            {\r\n                var bonusList = DD.bonusList;\r\n                this.getBonus(bonusList);\r\n                //var param = {};\r\n                //param.text = cc.Mgr.global.getTranslation(\"MarryTxt_\" + cc.Mgr.UserDataMgr.Sex);\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenMarry, DD);\r\n            }\r\n            else\r\n            {\r\n                var seed = Math.floor(Math.random() * 6);\r\n                var param = {};\r\n                param.forWhat = \"DateLater\";\r\n                param.text = cc.Mgr.global.getTranslation(\"DateOut_\" + seed) + \"\\n\" + \"<color=#e77122>亲密度达到:\"+ outpar.LovePoint+\"</c>\";\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            }\r\n            var dt = {};\r\n            dt.Id = this.Id;\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.DateSuccess, dt);\r\n            this.ClosePanel();\r\n        }\r\n    },\r\n\r\n    JudeCanMarry:function(getCondList){\r\n        var canMarry = false;\r\n        var result = {};\r\n        var txt = [];\r\n        for (var i = 0; i < getCondList.length; i++) {\r\n            var cond = getCondList[i];\r\n            switch (cond.unlockType) {\r\n                case MateGetType.Money:\r\n                    canMarry = true;\r\n                    break;\r\n                case MateGetType.House:\r\n                    canMarry = cc.Mgr.UserDataMgr.JudeHasHouse(cond.value);\r\n                    break;\r\n                case MateGetType.Car:\r\n                    canMarry = cc.Mgr.UserDataMgr.JudeHasCar(cond.value);\r\n                    break;\r\n                case MateGetType.Asset:\r\n                    canMarry = cc.Mgr.UserDataMgr.JudeAsset(cond.value);\r\n                    break;\r\n                case MateGetType.Reputation:\r\n                    canMarry = cc.Mgr.UserDataMgr.JudeReputation(cond.value);\r\n                    break;\r\n                case MateGetType.HP:\r\n                    canMarry = cc.Mgr.UserDataMgr.JudeHpPoint(cond.value);\r\n                    break;\r\n                case MateGetType.Company:\r\n                    canMarry = cc.Mgr.UserDataMgr.JudeHasCompany();\r\n                    break;\r\n            }\r\n            \r\n            if(canMarry == false)\r\n            {\r\n                txt.push(cond.unlockType);\r\n                result.canMarry = canMarry;\r\n                result.desList = txt;\r\n                return result;\r\n                break;\r\n            }\r\n        }\r\n        result.canMarry = canMarry;\r\n        result.desList = txt;\r\n        return result;\r\n    },\r\n\r\n    getUnlockTypes:function(getCondList)\r\n    {\r\n        var txt = \"\";\r\n        for (var i = 0; i < getCondList.length; i++) {\r\n            var cond = getCondList[i];\r\n            txt += this.getCondDes(cond.unlockType, cond.value) + \" \";\r\n        }\r\n        return txt;\r\n    },\r\n\r\n    getCondDes:function(type, value)\r\n    {\r\n        var txt = \"\";\r\n        if(value == 0)\r\n        {\r\n            switch (type) {\r\n            case MateGetType.Money:\r\n                txt = \"腰缠万贯\";\r\n                break;\r\n            case MateGetType.House:\r\n                txt = \"房子一套\";\r\n                break;\r\n            case MateGetType.Car:\r\n                txt = \"小车一辆\";\r\n                break;\r\n            case MateGetType.Asset:\r\n                txt = \"资产百万\";\r\n                break;\r\n            case MateGetType.Reputation:\r\n                txt = \"声名鹊起\";\r\n                break;\r\n            case MateGetType.HP:\r\n                txt = \"身体健康\";\r\n                break;\r\n            case MateGetType.Company:\r\n                txt = \"拥有任意一家公司\";\r\n                break;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            switch (type) {\r\n            case MateGetType.Money:\r\n                txt = \"现金\"+value;\r\n                break;\r\n            case MateGetType.House:\r\n                var DD = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.House, value);\r\n                txt = DD.name + \"一套\";\r\n                break;\r\n            case MateGetType.Car:\r\n                var DD = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.Car, value);\r\n                txt = DD.name + \"一辆\";\r\n                break;\r\n            case MateGetType.Asset:\r\n                txt = \"资产达到:\"+value;\r\n                break;\r\n            case MateGetType.Reputation:\r\n                txt = \"名声达到:\"+value;\r\n                break;\r\n            case MateGetType.HP:\r\n                txt = \"健康值达到:\"+value;\r\n                break;\r\n            case MateGetType.Company:\r\n                var DD = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.Company, value);\r\n                txt = DD.name + \"一家\";\r\n                break;\r\n            }\r\n        } \r\n        return txt;\r\n    },\r\n\r\n    getBonus:function(bonusList)\r\n    {\r\n        cc.Mgr.UserDataMgr.getMateBonusReward(bonusList);\r\n    },\r\n});\r\nmodule.exports = MateItemPanel;"]}