{"version":3,"sources":["assets\\Scripts\\UI\\AppStart.js"],"names":["cc","director","initMgr","Mgr","Parse","preLoadingScene","loadSound","initData","global","require","Event","ShareInfos","init","PlatformController","Init","AdsMgr","AudioMgr","playBGM","MapDataMgr","initMaps","UserDataMgr","RankPanel","HistoryPanel","HonorPanel","SkillPanel","SkillUpPanel","SettingPanel","CommonTipPanel","Class","Component","properties","StartAtlas","SpriteAtlas","BtnsNode","Node","InputNode","InputText","EditBox","SexSp","Sprite","LoadingNode","LoadingJuHua","rankPanel","historyPanel","honorPanel","skillPanel","skillUpPanel","settingPanel","commonTipPanel","NameLbl","Label","wxSubContextView","SwanSubContextView","TitleSp","onLoad","GlobalEvent","clear","active","log","on","ParseFinish","setUserCloudStorage","HistoryHighAssets","InitChangeData","start","syncPlatformLogo","ShareTopNav","ShowClubButton","preloadScene","string","nickName","runAction","repeatForever","rotateBy","action","sequence","callFunc","fadeIn","AchieveTip","data","node","ShowPanel","OpenUpgradeSkill","ShowBannerAds","onLoadSuccess","_this","sys","platform","BYTEDANCE_GAME","loader","loadRes","SpriteFrame","err","spriteFrame","console","error","getComponent","gotoGameScene","playerName","playSFX","loadScene","ConfirmYourName","update","dt","ConfrimSexMan","Sex","getSpriteFrame","ConfrimSexWoMan","OpenRank","IsLoginSync","param","text","forWhat","showSubContentView","SendMessageToSubView","isKuaiShou","ks","WECHAT_GAME","BAIDU_GAME","CloseRankView","hideSubContentView","OpenSkill","OpenAchieve","OpenRecord","RecordList","length","OpenCredit","OpenSetting","ShareToFriend","index","Math","floor","random","ChangeName","InitRandNickName"],"mappings":"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","sourceRoot":"/","sourcesContent":["//是否完成过管理工具的初始化\r\ncc.director.initMgr = false;\r\n\r\nfunction initMgr(){\r\n    cc.Mgr = {};\r\n    cc.Mgr.Parse = false;\r\n    cc.Mgr.preLoadingScene = false;\r\n    cc.Mgr.loadSound = false;\r\n    cc.Mgr.initData = false;\r\n\r\n    cc.Mgr.global = require(\"Global\");\r\n    cc.Mgr.Event = require(\"Event\");\r\n    cc.Mgr.ShareInfos = require(\"ShareInfos\");\r\n    cc.Mgr.ShareInfos.init();\r\n    cc.Mgr.PlatformController = require(\"PlatformController\");\r\n    cc.Mgr.PlatformController.Init();\r\n\r\n    cc.Mgr.AdsMgr = require(\"AdsMgr\");\r\n    cc.Mgr.AdsMgr.Init();\r\n\r\n    //声音\r\n    var AudioMgr = require(\"AudioMgr\");\r\n    cc.Mgr.AudioMgr = new AudioMgr();\r\n    cc.Mgr.AudioMgr.init();\r\n    cc.Mgr.AudioMgr.playBGM(\"bgm\");\r\n\r\n    var MapDataMgr = require(\"MapDataMgr\");\r\n    cc.Mgr.MapDataMgr = new MapDataMgr();\r\n    cc.Mgr.MapDataMgr.initMaps(); //初始化解析数据表\r\n\r\n    var UserDataMgr = require(\"UserDataMgr\");\r\n    cc.Mgr.UserDataMgr = new UserDataMgr();\r\n\r\n}\r\n\r\nvar RankPanel = require(\"RankPanel\");\r\nvar HistoryPanel = require(\"HistoryPanel\");\r\nvar HonorPanel = require(\"HonorPanel\");\r\nvar SkillPanel = require(\"SkillPanel\");\r\nvar SkillUpPanel = require(\"SkillUpPanel\");\r\nvar SettingPanel = require(\"SettingPanel\");\r\nvar CommonTipPanel = require(\"CommonTipPanel\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        StartAtlas:cc.SpriteAtlas,\r\n        BtnsNode:cc.Node,\r\n        InputNode:cc.Node,\r\n        InputText:cc.EditBox,\r\n        SexSp:cc.Sprite,\r\n\r\n        LoadingNode:cc.Node,\r\n        LoadingJuHua:cc.Node,\r\n\r\n        //面板\r\n        rankPanel:RankPanel,\r\n        historyPanel:HistoryPanel,\r\n        honorPanel:HonorPanel,\r\n        skillPanel:SkillPanel,\r\n        skillUpPanel:SkillUpPanel,\r\n        settingPanel:SettingPanel,\r\n        commonTipPanel:CommonTipPanel,\r\n\r\n        NameLbl:cc.Label,\r\n\r\n        wxSubContextView:cc.Node,\r\n        SwanSubContextView:cc.Node,\r\n\r\n        TitleSp: cc.Sprite,\r\n    },\r\n\r\n    onLoad:function () {\r\n        //目前我们先不保存任何数据  每次开始清理一次\r\n        //cc.sys.localStorage.clear();\r\n        cc.director.GlobalEvent.clear();\r\n        this.InputNode.active = false;\r\n        if(cc.director.initMgr == false) {\r\n            cc.log(\"还没有初始化过\");\r\n            initMgr();\r\n            //cc.Mgr.global.InitChangeData();\r\n            cc.director.GlobalEvent.on(cc.Mgr.Event.ParseFinish, function(){\r\n                cc.Mgr.UserDataMgr.initData();\r\n\r\n                cc.Mgr.PlatformController.setUserCloudStorage(cc.Mgr.UserDataMgr.HistoryHighAssets);\r\n                cc.director.initMgr = true;\r\n            }, this);\r\n        } else {\r\n            //cc.log(\"之前有过初始化\");\r\n            cc.Mgr.global.InitChangeData();\r\n            cc.Mgr.UserDataMgr.initData();\r\n            cc.director.initMgr = true;\r\n        }\r\n    },\r\n\r\n    start () {\r\n        // 更换logo\r\n        this.syncPlatformLogo()\r\n\r\n        //首先监听右上角的按钮\r\n        cc.Mgr.PlatformController.ShareTopNav();\r\n\r\n        cc.Mgr.PlatformController.ShowClubButton(true);\r\n\r\n        cc.director.preloadScene(\"gamescene\", function(){\r\n            cc.Mgr.preLoadingScene = true;\r\n        });\r\n\r\n        this.NameLbl.string = cc.Mgr.PlatformController.nickName;\r\n\r\n        this.LoadingJuHua.runAction(cc.repeatForever(cc.rotateBy(0.2,45)));\r\n\r\n        var action = cc.sequence(\r\n            cc.callFunc(function(){\r\n                \r\n            }, this),\r\n            cc.fadeIn(2.0),\r\n            cc.callFunc(function(){\r\n               \r\n            }, this),\r\n        );\r\n        this.BtnsNode.runAction(action);\r\n\r\n        //注册事件监听\r\n        cc.director.GlobalEvent.on(cc.Mgr.Event.AchieveTip, function(data){\r\n            //cc.log(\"提示打开完成成就提示\");\r\n            this.commonTipPanel.node.active = true;\r\n            this.commonTipPanel.ShowPanel(data);\r\n        }, this);\r\n\r\n        cc.director.GlobalEvent.on(cc.Mgr.Event.OpenUpgradeSkill, function(data){\r\n            //cc.log(\"提示技能升级提示\");\r\n            this.skillUpPanel.node.active = true;\r\n            this.skillUpPanel.ShowPanel(data);\r\n        }, this);\r\n\r\n\r\n        cc.Mgr.AdsMgr.ShowBannerAds();\r\n    },\r\n\r\n    onLoadSuccess:function() {\r\n        \r\n    },\r\n\r\n    syncPlatformLogo: function () {\r\n        if (cc.sys.platform === cc.sys.BYTEDANCE_GAME) {\r\n            cc.loader.loadRes('/atlas/logo' + cc.sys.BYTEDANCE_GAME, cc.SpriteFrame, (err, spriteFrame) => {\r\n                if (err) {\r\n                    console.error('set sprite frame failed! err', '/atlas/logo' + cc.sys.BYTEDANCE_GAME, err)\r\n                    return\r\n                }\r\n                this.TitleSp.getComponent(cc.Sprite).spriteFrame = spriteFrame\r\n            });\r\n        }\r\n    },\r\n\r\n    gotoGameScene:function(){\r\n        ///* 先注册名字\r\n        if(!cc.Mgr.UserDataMgr.playerName)\r\n        {\r\n            this.InputNode.active = true;\r\n            return;\r\n        }\r\n        console.log(cc.Mgr.Parse , cc.Mgr.preLoadingScene , cc.Mgr.initData)\r\n        if(cc.Mgr.Parse && cc.Mgr.preLoadingScene && cc.Mgr.initData)\r\n        {\r\n            cc.Mgr.PlatformController.ShowClubButton(false);\r\n            cc.Mgr.AudioMgr.playSFX(\"click\");\r\n            cc.director.loadScene(\"gamescene\");\r\n        }\r\n    },\r\n\r\n    ConfirmYourName:function(){\r\n        cc.Mgr.UserDataMgr.playerName = cc.Mgr.PlatformController.nickName;\r\n        this.InputNode.active = false;\r\n        this.gotoGameScene();\r\n        //if(this.InputText.string != \"\")\r\n        //{\r\n        //    cc.Mgr.AudioMgr.playSFX(\"click\");\r\n            ////cc.log(\"你选择的名字是 = \"+ this.InputText.string);\r\n        //    cc.Mgr.UserDataMgr.playerName = this.InputText.string;\r\n        //    this.InputNode.active = false;\r\n        //    this.gotoGameScene();\r\n        //}\r\n    },\r\n\r\n    update(dt)\r\n    {\r\n        if(cc.Mgr.Parse && cc.Mgr.preLoadingScene && cc.Mgr.initData)\r\n        {\r\n            this.LoadingNode.active = false;\r\n        }\r\n    },\r\n\r\n    ConfrimSexMan:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        cc.Mgr.UserDataMgr.Sex = 1;\r\n        this.SexSp.spriteFrame = this.StartAtlas.getSpriteFrame(\"manIcon\");\r\n    },\r\n\r\n    ConfrimSexWoMan:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        cc.Mgr.UserDataMgr.Sex = 2;\r\n        this.SexSp.spriteFrame = this.StartAtlas.getSpriteFrame(\"womanIcon\");\r\n    },\r\n\r\n    OpenRank:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n\r\n        if(!cc.Mgr.PlatformController.IsLoginSync())\r\n        {\r\n            var param = {};\r\n            param.text = \"请先登陆手机百度\";\r\n            param.forWhat = \"Login\";\r\n            this.commonTipPanel.node.active = true;\r\n            this.commonTipPanel.ShowPanel(param);\r\n            return;\r\n        }\r\n\r\n        cc.Mgr.PlatformController.showSubContentView();\r\n        cc.Mgr.PlatformController.SendMessageToSubView(\"RankOpen\");\r\n        let isKuaiShou = false;\r\n        if (typeof ks !== 'undefined') {\r\n            //运行在快手平台\r\n            isKuaiShou = true;\r\n        }\r\n        if(cc.sys.platform === cc.sys.WECHAT_GAME && !isKuaiShou)\r\n            this.wxSubContextView.active = true;\r\n        else if(cc.sys.platform === cc.sys.BAIDU_GAME)\r\n            this.SwanSubContextView.active = true;\r\n\r\n        if((cc.sys.platform === cc.sys.WECHAT_GAME && !isKuaiShou) || cc.sys.platform === cc.sys.BAIDU_GAME)\r\n            this.rankPanel.node.active = true;\r\n    },\r\n\r\n    CloseRankView:function(){\r\n        this.rankPanel.node.active = false;\r\n        cc.Mgr.PlatformController.hideSubContentView();\r\n        cc.Mgr.PlatformController.SendMessageToSubView(\"RankClose\");\r\n        this.wxSubContextView.active = false;\r\n        this.SwanSubContextView.active = false;\r\n    },\r\n\r\n    OpenSkill:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.skillPanel.node.active = true;\r\n        this.skillPanel.ShowPanel();\r\n    },\r\n\r\n    OpenAchieve:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.honorPanel.node.active = true;\r\n        this.honorPanel.ShowPanel();\r\n    },\r\n\r\n    OpenRecord:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        //cc.log(\"历史纪录：++++++\" + cc.Mgr.UserDataMgr.RecordList.length);\r\n        if(cc.Mgr.UserDataMgr.RecordList.length == 0)\r\n        {\r\n            var param = {};\r\n            param.text = \"你还未有过游戏记录,请畅快游戏吧\";\r\n            param.forWhat = \"\";\r\n            this.commonTipPanel.node.active = true;\r\n            this.commonTipPanel.ShowPanel(param);\r\n            return;\r\n        }\r\n        this.historyPanel.node.active = true;\r\n        this.historyPanel.ShowPanel();\r\n    },\r\n\r\n    OpenCredit:function(){\r\n\r\n    },\r\n\r\n    OpenSetting:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.settingPanel.node.active = true;\r\n        this.settingPanel.ShowPanel();\r\n    },\r\n\r\n    ShareToFriend:function(){\r\n        var index = Math.floor(Math.random()*6);\r\n        cc.Mgr.PlatformController.ShareToFriend(index);\r\n    },\r\n\r\n    ChangeName:function(){\r\n        cc.Mgr.PlatformController.InitRandNickName();\r\n        this.NameLbl.string = cc.Mgr.PlatformController.nickName;\r\n    },\r\n});\r\n"]}