{"version":3,"sources":["assets\\Scripts\\OwnData\\CompanyStruct.js"],"names":["CompanyStruct","cc","Class","name","properties","icon","Id","Integer","LimitYear","isOwned","bonusRatio","stockNum","stockCost","bankruptPrice","stockPrice","RefreshDataAfterOper","data","allAss","price","Num","Math","floor","Mgr","UserDataMgr","hasCompany","param","RefreshDataAfterSale","CanGetStockProfit","RefreshDataAfterDisvorce","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\n//公司\r\nvar CompanyStruct = cc.Class({\r\n\tname:\"CompanyStruct\",\r\n\tproperties:{\r\n\t\ticon:\"\",\r\n\t\tname:\"\",\r\n\t\tId:cc.Integer,\r\n\t\tLimitYear:cc.Integer, //交易收益开发年限\r\n\t\tisOwned:false,\r\n\t\tbonusRatio:0.02,//收益回报率\r\n\t\tstockNum:cc.Integer, //股票数量\r\n\t\tstockCost:0.00,//股票成本\r\n\t\tbankruptPrice:0.00, //破产价格\r\n\t\tstockPrice:15.25,//股票单价\r\n\t},\r\n\r\n\t//创办或者购买完成后\r\n\tRefreshDataAfterOper:function (data) {\r\n\t\tvar allAss = (this.stockCost * this.stockNum) + (data.price * data.Num);\r\n\t\tthis.stockNum += data.Num;\r\n\t\tthis.stockCost = Math.floor(allAss / this.stockNum * 100)/100;\r\n\t\tthis.stockPrice = data.price\r\n\t\tif(this.stockNum > 0)\r\n\t\t\tthis.isOwned = true;\r\n\t\telse\r\n\t\t\tthis.isOwned = false;\r\n\r\n\t\tcc.Mgr.UserDataMgr.hasCompany = true;\r\n\t\tvar param = {};\r\n\t\tparam.Id = this.Id;\r\n\t\tparam.stockNum = this.stockNum;\r\n\t\tparam.stockPrice = this.stockPrice;\r\n\t\tparam.stockCost = this.stockCost;\r\n\t\treturn param;\r\n\t},\r\n\t//出售操作刷新\r\n\tRefreshDataAfterSale:function (data) {\r\n\t\tthis.stockNum -= data.Num;\r\n\t\tthis.stockPrice = data.price\r\n\t\tif(this.stockNum > 0)\r\n\t\t{\r\n\t\t\tthis.isOwned = true;\r\n\t\t\tcc.Mgr.UserDataMgr.hasCompany = true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t//cc.log(\"破产或者卖光了\");\r\n\t\t\tthis.stockCost = 0;//全部賣光\r\n\t\t\tcc.Mgr.UserDataMgr.hasCompany = false;\r\n\t\t\tcc.Mgr.UserDataMgr.CanGetStockProfit = false;\r\n\t\t\tthis.isOwned = false;\r\n\t\t}\r\n\r\n\t\tvar param = {};\r\n\t\tparam.Id = this.Id;\r\n\t\tparam.stockNum = this.stockNum;\r\n\t\tparam.stockPrice = this.stockPrice;\r\n\t\tparam.stockCost = this.stockCost;\r\n\t\treturn param;\r\n\t},\r\n\r\n\t//离婚后操作刷新\r\n\tRefreshDataAfterDisvorce:function () {\r\n\t\tthis.stockNum = Math.floor(this.stockNum * 0.8);\r\n\t},\r\n\r\n\r\n});\r\nmodule.exports = CompanyStruct;\r\n"]}