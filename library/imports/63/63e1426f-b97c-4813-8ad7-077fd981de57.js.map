{"version":3,"sources":["assets\\Scripts\\DataMap\\Achieve\\AchieveMapDecoder.js"],"names":["AchieveCondData","require","AchieveData","AchieveMapDecoder","cc","Class","Component","properties","jsonName","achieveList","type","DecodeJson","event","self","reCb","loader","loadRes","error","obj","jsonRoot","json","achieve","i","length","comData","Id","name","icon","desId","j","condList","condData","dt","condType","value","getDataByName","data","getDataByItemId","itemId","getJsonLength","getDataList","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var AchieveCondData = require(\"AchieveCondData\");\r\nvar AchieveData = require(\"AchieveData\");\r\nvar AchieveMapDecoder = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        jsonName:\"achieve\",\r\n        achieveList:{\r\n            default:[],\r\n            type:[AchieveData],\r\n        },\r\n    },\r\n\r\n    //解析数据\r\n    DecodeJson:function (event) {\r\n        //cc.log(\"===解析成就数据===\");\r\n        var self = this;\r\n        self.reCb = event;\r\n        cc.loader.loadRes(\"json/\"+self.jsonName, function (error, obj) {\r\n            if(error)\r\n            {\r\n                //cc.log(\"+++解析出错，查下json+++\" + error);\r\n                self.reCb(false);\r\n                return;\r\n            }\r\n            \r\n            var jsonRoot = obj.json.achieve;\r\n            //cc.log(\"===数据长度===\" + jsonRoot.length);\r\n            for (var i = 0; i < jsonRoot.length; i++) {\r\n                var comData = new AchieveData();\r\n                comData.Id = jsonRoot[i].Id;\r\n                comData.name = jsonRoot[i].name;\r\n                comData.icon = jsonRoot[i].icon;\r\n                comData.desId = jsonRoot[i].desId;\r\n                //完成条件\r\n                for (var j = 0; j < jsonRoot[i].condList.length; j++) {\r\n                    var condData = new AchieveCondData();\r\n                    var dt = jsonRoot[i].condList[j];\r\n                    condData.condType = dt[0];\r\n                    condData.value = dt[1];\r\n                    comData.condList[j] = condData;\r\n                }\r\n                \r\n                self.achieveList[i] = comData; \r\n            }\r\n            self.reCb(true);\r\n        });\r\n    },\r\n\r\n    //通过名字拿到当前的数据 不建议用，你要用我也没办法\r\n    getDataByName:function (name) {\r\n        var data = null;\r\n        for (var i = this.achieveList.length - 1; i >= 0; i--) {\r\n            if(name == this.achieveList[i].name)\r\n            {\r\n                data = this.achieveList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    //通过itemid获取数据\r\n    getDataByItemId:function(itemId){\r\n        var data = null;\r\n        for (var i = this.achieveList.length - 1; i >= 0; i--) {\r\n            if(itemId == this.achieveList[i].Id)\r\n            {\r\n                data = this.achieveList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    getJsonLength:function(){\r\n        return this.achieveList.length\r\n    },\r\n\r\n    getDataList:function(){\r\n        return this.achieveList;\r\n    },\r\n});\r\nmodule.exports = AchieveMapDecoder;\r\n"]}