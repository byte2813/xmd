{"version":3,"sources":["assets\\Scripts\\UI\\MateTipPanel.js"],"names":["ItemType","require","MateTipPanel","cc","Class","Component","properties","mateItem","Prefab","mateParent","Node","hasInit","ShowPanel","RefreshPanelItems","MateList","Mgr","UserDataMgr","getOwnDataListByType","Mate","dataList","getMateListBySex","Sex","i","length","data","obj","instantiate","parent","getComponent","init","param","sex","push","children","sc","getDataByItemTypeAndId","Id","RefreshLovePoint","canDate","ChangeUnLockState","RefreshPanel","active","ClosePanel","AudioMgr","playSFX","node","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var ItemType = require(\"ItemType\");\r\nvar MateTipPanel = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       mateItem:cc.Prefab,\r\n       mateParent:cc.Node,\r\n       hasInit:false,\r\n    },\r\n\r\n    ShowPanel:function () {\r\n        if(this.hasInit == true)\r\n        {\r\n            this.RefreshPanelItems();\r\n            //cc.log(\"已经初始化了，返回\");\r\n            return;\r\n        }\r\n        var MateList = cc.Mgr.UserDataMgr.getOwnDataListByType(ItemType.Mate);\r\n        var dataList = this.getMateListBySex(cc.Mgr.UserDataMgr.Sex, MateList);\r\n        for (var i = 0; i <= dataList.length - 1; i++) {\r\n            //if() 判断解锁条件  我们会有男女的区别\r\n            var data = dataList[i];\r\n            var obj = cc.instantiate(this.mateItem);\r\n            obj.parent = this.mateParent;\r\n            obj.getComponent(\"MateItem\").init(data);\r\n            \r\n        }\r\n        this.hasInit = true;\r\n    },\r\n\r\n    getMateListBySex:function(Sex, dataList){\r\n        var param = [];\r\n        for (var i = 0; i < dataList.length; i++) {\r\n            if(Sex == dataList[i].sex)\r\n            {\r\n                param.push(dataList[i]);\r\n            }\r\n        }\r\n        return param;\r\n    },\r\n\r\n    RefreshPanelItems:function(){\r\n        var children = this.mateParent.children;\r\n        for (var i = children.length - 1; i >= 0; i--) {\r\n            var sc = children[i].getComponent(\"MateItem\");\r\n            if(sc != null)\r\n            {\r\n                var data = cc.Mgr.UserDataMgr.getDataByItemTypeAndId(ItemType.Mate, sc.Id);\r\n                sc.RefreshLovePoint(data);\r\n                if(data.canDate)\r\n                {\r\n                    sc.ChangeUnLockState(data);\r\n                    //children[i].active = true;\r\n                }  \r\n            }\r\n        }\r\n    },\r\n\r\n    RefreshPanel:function(Id){\r\n        var data = cc.Mgr.UserDataMgr.getDataByItemTypeAndId(ItemType.Mate, Id);\r\n        //cc.log(\"============\" + data.LovePoint);\r\n        var children = this.mateParent.children;\r\n        for (var i = children.length - 1; i >= 0; i--) {\r\n            var sc = children[i].getComponent(\"MateItem\");\r\n            if(sc != null)\r\n            {\r\n                if(sc.Id == Id)\r\n                {\r\n                    if(data.canDate)\r\n                    {\r\n                        children[i].active = true;\r\n                        sc.RefreshLovePoint(data);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    ClosePanel:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.node.active = false;\r\n    },\r\n    \r\n});\r\nmodule.exports = MateTipPanel;\r\n"]}