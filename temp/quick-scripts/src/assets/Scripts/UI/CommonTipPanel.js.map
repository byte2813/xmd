{"version":3,"sources":["assets\\Scripts\\UI\\CommonTipPanel.js"],"names":["Event","require","MateUnLockType","CommonTipPanel","cc","Class","Component","properties","titleLbl","Sprite","TipLbl","RichText","forWhat","cost","Integer","videoPath","ShowPanel","data","companyName","Mgr","global","getTranslation","Id","string","bonus","needMoney","Math","floor","UserDataMgr","TreatBonus","text","ClosePanel","AudioMgr","playSFX","UnLockMateByInHospital","InHospital","Sex","tutorialMatePoint","director","GlobalEvent","emit","DateLater","node","active","ClickConfirm","Cash","HpPoint","TreatSuccess","Retire","OpenEnjoy","PlatformController","Login","ShareVideo","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Event = require(\"Event\");\r\nvar MateUnLockType = require(\"MateUnLockType\");\r\nvar CommonTipPanel = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        titleLbl:cc.Sprite,\r\n        TipLbl:cc.RichText,\r\n        forWhat:\"\",\r\n        cost:cc.Integer,\r\n\r\n        videoPath: \"\",\r\n    },\r\n\r\n    ShowPanel:function (data) {\r\n        if(data.forWhat != null && data.forWhat != \"\")\r\n            this.forWhat = data.forWhat;\r\n        else\r\n            this.forWhat = \"\";\r\n\r\n        //this.titleLbl.string = \"提示说明\";\r\n\r\n\r\n        this.cost = 0;\r\n        if(this.forWhat == \"StockBonus\")\r\n        {\r\n            var companyName = cc.Mgr.global.getTranslation(\"company_\" +data.Id);\r\n            this.TipLbl.string = \"<color=#696969>股票市场-\"+companyName+\"-获得收益</c>\"+\"<color=#e77122>\" + data.bonus +\"</c>\"+\"<color=#696969>元</c>\";\r\n        }\r\n        else if(this.forWhat == \"Treat\")\r\n        {\r\n            this.cost = data.needMoney - Math.floor(data.needMoney * cc.Mgr.UserDataMgr.TreatBonus);\r\n            this.TipLbl.string = \"花费\" + this.cost + \"治疗，以恢复健康\";\r\n        }\r\n        else if(this.forWhat == \"shareVideo\") {\r\n            this.videoPath = data.videoPath;\r\n            this.TipLbl.string = \"<color=#696969>\"+ data.text +\"</c>\";\r\n        }\r\n        else\r\n        {\r\n            this.TipLbl.string = \"<color=#696969>\"+ data.text +\"</c>\";\r\n        }\r\n    },\r\n\r\n    ClosePanel:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n\r\n        if(this.forWhat == \"HealthLine\")\r\n        {\r\n            cc.Mgr.UserDataMgr.UnLockMateByInHospital(MateUnLockType.InHospital, cc.Mgr.UserDataMgr.Sex);\r\n        }\r\n        else if(this.forWhat == \"DateLater\")\r\n        {\r\n            if(cc.Mgr.UserDataMgr.tutorialMatePoint == false)\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.DateLater, {});\r\n        }\r\n        this.forWhat = \"\";\r\n        this.node.active = false;\r\n        //cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenEventTip, {});\r\n    },\r\n\r\n    ClickConfirm:function(){\r\n        if(this.forWhat == \"Treat\")\r\n        {\r\n            //计算下所需要的钱 消耗金额=2000*1.18^(当前年龄-20)*（1-当前健康度/100），向上取整\r\n            var needMoney = this.cost; //Math.floor(2000* Math.pow(1.18, cc.Mgr.UserDataMgr.Age-20) *(1-cc.Mgr.UserDataMgr.HpPoint/100));\r\n            if(cc.Mgr.UserDataMgr.Cash < needMoney)\r\n            {\r\n                this.TipLbl.string = \"你的钱不够啊,等有钱了再来吧\";\r\n                return;\r\n            }\r\n            cc.Mgr.UserDataMgr.Cash -= needMoney;\r\n            cc.Mgr.UserDataMgr.HpPoint = 100;\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.TreatSuccess, {});\r\n        }\r\n        else if(this.forWhat == \"Retire\")\r\n        {\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.Retire, {});\r\n        }\r\n        else if(this.forWhat == \"HealthLine\")\r\n        {\r\n            cc.Mgr.UserDataMgr.UnLockMateByInHospital(MateUnLockType.InHospital, cc.Mgr.UserDataMgr.Sex);\r\n        }\r\n        else if(this.forWhat == \"OpenDate\")\r\n        {\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenEnjoy, {});\r\n        }\r\n        else if(this.forWhat == \"Login\")\r\n        {\r\n            cc.Mgr.PlatformController.Login();\r\n        }\r\n        else if (this.forWhat == \"shareVideo\") {\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.ShareVideo, {videoPath: this.videoPath});\r\n        }\r\n\r\n        this.ClosePanel();\r\n    },\r\n\r\n});\r\nmodule.exports = CommonTipPanel;\r\n"]}