{"version":3,"sources":["assets\\Scripts\\UI\\CompanyItem.js"],"names":["ItemType","require","UserState","CompanyItem","cc","Class","Component","properties","Id","Integer","stockNum","LimitYear","Atlas","SpriteAtlas","IconSp","Sprite","nameLbl","priceLbl","Label","costLbl","numLbl","ratioLbl","InLockLbl","CreateBtn","Node","BuySaleBtns","canGetProfit","bankRupt","Data","init","data","string","bonusRatio","toString","spriteFrame","getSpriteFrame","icon","name","stockCost","stockPrice","Math","floor","refreshPrice","mapdata","Mgr","MapDataMgr","getDataByItemTypeAndId","Company","proList","unList","seed","random","inPrice","node","active","UserDataMgr","StockUpBonus","weight","iseed","upRatio","lowRatio","bankruptPrice","CanGetStockProfit","BankruptAge","Age","Cash","param","Num","price","reData","SaleStocks","forWhat","comname","global","getTranslation","text","director","GlobalEvent","emit","Event","OpenCommonTip","RefreshStockData","RefreshUIShowAfter","num","RefreshUIShow","OpenCompanyCreateTip","AudioMgr","playSFX","userState","NotOK","hasCompany","OpenCompanyCreate","OpenStuckSaleTip","OpenStuckBuyTip","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var ItemType = require(\"ItemType\");\r\nvar UserState = require(\"UserState\");\r\nvar CompanyItem = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Id:cc.Integer,\r\n        stockNum:cc.Integer,\r\n        LimitYear:cc.Integer,\r\n\r\n        Atlas:cc.SpriteAtlas,\r\n        IconSp:cc.Sprite,\r\n        nameLbl:cc.Sprite,\r\n        priceLbl:cc.Label,\r\n        costLbl:cc.Label,\r\n        numLbl:cc.Label,\r\n\r\n        ratioLbl:cc.Label,\r\n\r\n        InLockLbl:cc.Label,\r\n        CreateBtn:cc.Node,\r\n        BuySaleBtns:cc.Node,\r\n\r\n        canGetProfit:false,\r\n\r\n        bankRupt:false, //是否已经破产\r\n\r\n        Data:null,\r\n    },\r\n\r\n    init:function (data) {\r\n        this.Data = null;\r\n        this.Data = data;\r\n        this.bankRupt = false;\r\n        this.LimitYear = data.LimitYear - 1; //限制交易年限\r\n        this.stockNum = 0;\r\n        this.ratioLbl.string = (data.bonusRatio * 100).toString() + \"%\";\r\n        this.Id = data.Id;\r\n        this.IconSp.spriteFrame = this.Atlas.getSpriteFrame(data.icon);\r\n        this.nameLbl.spriteFrame = this.Atlas.getSpriteFrame(data.name);\r\n        this.costLbl.string = data.stockCost;\r\n        this.priceLbl.string = data.stockPrice;\r\n        this.numLbl.string = Math.floor(data.stockNum / 100);\r\n    },\r\n\r\n    refreshPrice:function(){\r\n        var mapdata = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.Company, this.Data.Id);\r\n        var proList = mapdata.proList;\r\n        var unList = mapdata.unList;\r\n        var seed = Math.random();\r\n        var stockPrice = this.Data.stockPrice;\r\n        ////cc.log(seed + \"   ++++++++++++++++++++++++++++++++++++++++++  \" + proList[0].weight);\r\n\r\n        if(this.bankRupt == true)\r\n        {\r\n            stockPrice = mapdata.inPrice;\r\n            this.bankRupt = false;\r\n            this.InLockLbl.node.active = false;\r\n            this.CreateBtn.active = true;\r\n            this.BuySaleBtns.active = false;\r\n        }\r\n        else\r\n        {\r\n            if(this.stockNum > 0) //只有股票 持有量大于0时才可用 计算该股票的 上涨概率加成\r\n            {\r\n                //cc.log(\"拥有这家公司时候 --刷第一个比例\");\r\n                seed += cc.Mgr.UserDataMgr.StockUpBonus / 100;\r\n\r\n                if(seed < proList[0].weight) //跌\r\n                {\r\n                    var iseed = Math.random() * (proList[0].upRatio - proList[0].lowRatio) + (1-proList[0].upRatio);\r\n                    stockPrice = stockPrice - this.Data.stockPrice * iseed;\r\n                }\r\n                else //涨\r\n                {\r\n                    var iseed = Math.random() * (proList[1].upRatio - proList[1].lowRatio) + (proList[1].lowRatio - 1);\r\n                    stockPrice = stockPrice + this.Data.stockPrice * iseed;\r\n                } \r\n            }\r\n            else\r\n            {\r\n                 //cc.log(\"没有这家公司时候 --刷第二个比例\");\r\n                if(seed < unList[0].weight) //跌\r\n                {\r\n                    var iseed = Math.random() * (unList[0].upRatio - unList[0].lowRatio) + (1 - unList[0].upRatio);\r\n                    stockPrice = stockPrice - this.Data.stockPrice * iseed;\r\n                }\r\n                else //涨\r\n                {\r\n                    var iseed = Math.random() * (unList[1].upRatio - unList[1].lowRatio) + (unList[1].lowRatio - 1);\r\n                    stockPrice = stockPrice + this.Data.stockPrice * iseed;\r\n                } \r\n            }\r\n        }\r\n\r\n        \r\n        this.Data.stockPrice = Math.floor(stockPrice * 100)/100;\r\n        this.priceLbl.string = this.Data.stockPrice;\r\n        this.costLbl.string = this.Data.stockCost;\r\n\r\n        //有公司破产了\r\n        if(this.Data.stockPrice <= this.Data.bankruptPrice)\r\n        {\r\n            this.bankRupt = true;\r\n            this.InLockLbl.node.active = true;\r\n            this.CreateBtn.active = false;\r\n            this.BuySaleBtns.active = false;\r\n            this.canGetProfit = false;\r\n            cc.Mgr.UserDataMgr.CanGetStockProfit = false;\r\n            this.InLockLbl.string = \"该行业一片萧条\";\r\n            this.costLbl.string = \"0\";\r\n            this.numLbl.string = \"0\";\r\n            this.LimitYear = this.Data.LimitYear - 1;\r\n\r\n            if(this.stockNum > 0)\r\n            {\r\n                if(cc.Mgr.UserDataMgr.BankruptAge == 0)\r\n                {\r\n                    cc.Mgr.UserDataMgr.BankruptAge = cc.Mgr.UserDataMgr.Age;\r\n                }\r\n                cc.Mgr.UserDataMgr.Cash += Math.floor(this.Data.stockPrice * 0.5 * this.stockNum); //折半出售\r\n                var param = {};\r\n                param.Num = this.stockNum;\r\n                param.price = this.stockPrice;\r\n                param.Id = this.Data.Id;\r\n                var reData = cc.Mgr.UserDataMgr.SaleStocks(param);\r\n                this.stockNum = reData.stockNum;\r\n                var param = {};\r\n                param.forWhat = \"\";\r\n                var comname = cc.Mgr.global.getTranslation(\"company_\" +this.data.Id);\r\n                param.text = \"您创办的[\"+\"<color=#e77122>\"+comname+\"</c>\"+\"]由于经营不善,已破产处理,公司股票将折半价抛售\";\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip , param);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            this.bankRupt = false;\r\n            if(this.stockNum > 0 && this.LimitYear > 0)\r\n            {\r\n                if(this.LimitYear > 0)\r\n                {\r\n                    this.LimitYear -= 1;\r\n                    this.InLockLbl.string = \"创业期\" + this.LimitYear + \"年\";\r\n                }\r\n                this.canGetProfit = false;\r\n            }\r\n\r\n            if(this.stockNum <= 0 && this.LimitYear <= 0)\r\n            {\r\n                this.InLockLbl.node.active = false;\r\n                this.BuySaleBtns.active = false;\r\n                this.CreateBtn.active = true;\r\n                this.canGetProfit = false;\r\n            }\r\n            else if(this.LimitYear <= 0 && this.stockNum > 0)\r\n            {\r\n                this.InLockLbl.node.active = false;\r\n                this.BuySaleBtns.active = true;\r\n                this.canGetProfit = true;\r\n            }\r\n\r\n            var param = {};\r\n            param.stockCost = this.Data.stockCost;\r\n            param.stockPrice = this.Data.stockPrice;\r\n            cc.Mgr.UserDataMgr.RefreshStockData(this.Id, param);\r\n        }\r\n    },\r\n\r\n    RefreshUIShowAfter:function(){\r\n        var num = cc.Mgr.UserDataMgr.getDataByItemTypeAndId(ItemType.Company, this.Id).stockNum;\r\n        this.numLbl.string = Math.floor(num / 100);\r\n    },\r\n\r\n    RefreshUIShow:function(data){\r\n        this.stockNum = data.stockNum;\r\n\r\n        this.priceLbl.string = data.stockPrice.toString();\r\n        this.costLbl.string = data.stockCost.toString();\r\n        this.numLbl.string = Math.floor(data.stockNum / 100);\r\n        if(data.stockNum > 0 && this.LimitYear <= 0)\r\n        {\r\n            this.InLockLbl.node.active = false;\r\n            this.CreateBtn.active = false;\r\n            this.BuySaleBtns.active = true;\r\n            this.canGetProfit = true;\r\n        }\r\n        else if(data.stockNum > 0 && this.LimitYear > 0)\r\n        {\r\n            this.InLockLbl.node.active = true;\r\n            this.CreateBtn.active = false;\r\n            this.BuySaleBtns.active = false;\r\n            this.canGetProfit = false;\r\n            this.InLockLbl.string = \"创业期\" + this.LimitYear + \"年\";\r\n        }\r\n        else if(data.stockNum <= 0)\r\n        {\r\n            this.InLockLbl.node.active = false;\r\n            this.CreateBtn.active = true;\r\n            this.BuySaleBtns.active = false;\r\n            this.canGetProfit = false;\r\n            //出售完了 需要重新创办\r\n            this.LimitYear = this.Data.LimitYear - 1;\r\n        }\r\n    },\r\n    //创办公司\r\n    OpenCompanyCreateTip:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n\r\n        if(cc.Mgr.UserDataMgr.userState == UserState.NotOK)\r\n        {\r\n            var param = {};\r\n            param.text = cc.Mgr.global.getTranslation(\"InHealDownLine\");\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            return;\r\n        }\r\n\r\n        if(cc.Mgr.UserDataMgr.hasCompany == true)\r\n        {\r\n            var param = {};\r\n            param.forWhat = \"\";\r\n            param.text = \"<color=#e77122>您已经创办一家公司</c>\";\r\n            //cc.log(\"===提醒下已经有一家公司在名下===\");\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            return;\r\n        }\r\n        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCompanyCreate, this.Data);\r\n    },\r\n    //出售股票\r\n    OpenStuckSaleTip:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n\r\n        if(cc.Mgr.UserDataMgr.userState == UserState.NotOK)\r\n        {\r\n            var param = {};\r\n            param.text = cc.Mgr.global.getTranslation(\"InHealDownLine\");\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            return;\r\n        }\r\n\r\n        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenStuckSaleTip, this.Data);\r\n    },\r\n    //购入股票\r\n    OpenStuckBuyTip:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n\r\n        if(cc.Mgr.UserDataMgr.userState == UserState.NotOK)\r\n        {\r\n            var param = {};\r\n            param.text = cc.Mgr.global.getTranslation(\"InHealDownLine\");\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            return;\r\n        }\r\n\r\n        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenStuckBuyTip, this.Data);\r\n    },\r\n\r\n});\r\nmodule.exports = CompanyItem;\r\n"]}