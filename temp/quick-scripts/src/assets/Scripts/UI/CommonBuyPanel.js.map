{"version":3,"sources":["assets\\Scripts\\UI\\CommonBuyPanel.js"],"names":["ItemType","require","UserState","CommonBuyPanel","cc","Class","Component","properties","MainAtlas","SpriteAtlas","Atlas","titleLbl","Sprite","carhosueDes","Node","des1","Label","des2","des3","des4","disdesLbl","iconSp","nameSp","price","Integer","Id","flag","Type","Car","type","ShowPanel","param","data","Mgr","MapDataMgr","getDataByItemTypeAndId","spriteFrame","getSpriteFrame","name","node","active","string","addDate","Math","floor","UserDataMgr","CarBuyBonus","House","addHp","HouseBuyBonuse","addBonus","global","FormatNum","Mate","getTranslation","dd","random","icon","ClickBuy","Cash","AudioMgr","playSFX","forWhat","text","director","GlobalEvent","emit","Event","OpenCommonTip","par","addNum","Reputation","HpPoint","HealthLine","userState","OK","RecoverYear","DateSuccescRatio","BuySaleCommonItem","CommonBuySaleSuccess","DivorceAge","Age","Disvorce","DisvorceMateById","ClosePanel","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var ItemType = require(\"ItemType\");\r\nvar UserState = require(\"UserState\");\r\nvar CommonBuyPanel = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        MainAtlas:cc.SpriteAtlas,\r\n        Atlas:cc.SpriteAtlas,\r\n        titleLbl:cc.Sprite,\r\n        carhosueDes:cc.Node,\r\n\r\n        des1:cc.Label,\r\n        des2:cc.Label,\r\n        des3:cc.Label,\r\n        des4:cc.Label,\r\n\r\n        disdesLbl:cc.Label,\r\n        iconSp:cc.Sprite,\r\n        nameSp:cc.Sprite,\r\n        price:cc.Integer,\r\n        Id:cc.Integer,\r\n        flag:\"\",\r\n        Type:{\r\n            default:ItemType.Car,\r\n            type:ItemType,\r\n        },\r\n    },\r\n\r\n    ShowPanel:function (param) {\r\n        var data = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(param.Type, param.Id)\r\n        this.nameSp.spriteFrame = this.Atlas.getSpriteFrame(param.name)\r\n        var price = param.price;\r\n        if(param.flag == \"Buy\")\r\n        {\r\n            if(param.Type == ItemType.Car)\r\n            {\r\n                this.des4.node.active = true;\r\n                this.des1.node.active = false;\r\n                this.des4.string = \"+\" + (data.addDate * 100) + \"%\";\r\n                this.titleLbl.spriteFrame = this.MainAtlas.getSpriteFrame(\"text_buycar\");\r\n                price = param.price - Math.floor(param.price * cc.Mgr.UserDataMgr.CarBuyBonus);\r\n            }\r\n            else if(param.Type == ItemType.House)\r\n            {\r\n                this.des4.node.active = false;\r\n                this.des1.node.active = true;\r\n                this.des1.string = \"+\" + data.addHp;\r\n                this.titleLbl.spriteFrame = this.MainAtlas.getSpriteFrame(\"text_buyhouse\");\r\n                price= param.price - Math.floor(param.price * cc.Mgr.UserDataMgr.HouseBuyBonuse);\r\n            }\r\n\r\n            this.des2.string = \"+\" + data.addBonus;\r\n            this.des3.string = cc.Mgr.global.FormatNum(price);\r\n            this.carhosueDes.active = true;\r\n            this.disdesLbl.node.active = false;\r\n        }\r\n        else if(param.flag == \"Sale\")\r\n        {\r\n            if(param.Type == ItemType.Car || param.Type == ItemType.House)\r\n            {\r\n                this.titleLbl.spriteFrame = this.MainAtlas.getSpriteFrame(\"sale_txt\");\r\n                \r\n                if(param.Type == ItemType.Car)\r\n                {\r\n                    this.des4.node.active = true;\r\n                    this.des1.node.active = false;\r\n                    this.des4.string = \"+\" + (data.addDate * 100) + \"%\";\r\n                }\r\n                else\r\n                {\r\n                    this.des1.string = \"+\" + data.addHp;\r\n                    this.des4.node.active = false;\r\n                    this.des1.node.active = true;\r\n                }\r\n\r\n                this.des2.string = \"+\" + data.addBonus;\r\n                this.des3.string = Math.floor(price/2);\r\n                this.carhosueDes.active = true;\r\n                this.disdesLbl.node.active = false;\r\n            }\r\n            else if(param.Type == ItemType.Mate)\r\n            {\r\n                var name = cc.Mgr.global.getTranslation(\"role_\"+param.Id);\r\n                this.carhosueDes.active = false;\r\n                this.disdesLbl.node.active = true;\r\n                this.titleLbl.spriteFrame = this.MainAtlas.getSpriteFrame(\"dis_marry\");\r\n                var dd = 1 + Math.floor(Math.random() * 5);\r\n                this.disdesLbl.string = name+\"说:\"+cc.Mgr.global.getTranslation(\"Disvorce_\" + dd);\r\n            }\r\n\r\n        }\r\n        this.price = price;\r\n        this.Type = param.Type;\r\n        this.Id = param.Id;\r\n        this.iconSp.spriteFrame = this.Atlas.getSpriteFrame(param.icon);\r\n        if(param.flag != null)\r\n            this.flag = param.flag;\r\n        else\r\n            this.flag = \"\";\r\n    },\r\n\r\n    ClickBuy:function(){\r\n        if(this.flag == \"Buy\")\r\n        {\r\n            if(cc.Mgr.UserDataMgr.Cash < this.price)\r\n            {\r\n                cc.Mgr.AudioMgr.playSFX(\"click\");\r\n                var param = {};\r\n                param.forWhat = \"\";\r\n                param.text = \"<color=#e77122>你的钱不够啊,买不起</c>\";\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n                return;\r\n            }\r\n        }\r\n        \r\n        if(this.flag != null && this.flag != \"\")\r\n        {\r\n            if(this.Type == ItemType.Car || this.Type == ItemType.House)\r\n            {\r\n                var par = {};\r\n                par.Type = this.Type;\r\n                par.addNum = 0;\r\n                if(this.flag == \"Buy\")\r\n                {\r\n                    var data = cc.Mgr.UserDataMgr.getDataByItemTypeAndId(this.Type, this.Id);\r\n                    //cc.log(\"加成属性 ====== 健康 \" + data.addHp +\"  名声 \" + data.addBonus);\r\n                    cc.Mgr.UserDataMgr.Reputation += data.addBonus;\r\n                    cc.Mgr.UserDataMgr.HpPoint += data.addHp;\r\n                    if(cc.Mgr.UserDataMgr.HpPoint > 100)\r\n                        cc.Mgr.UserDataMgr.HpPoint = 100;\r\n\r\n                    if(cc.Mgr.UserDataMgr.HpPoint >= cc.Mgr.global.HealthLine)\r\n                    {\r\n                        cc.Mgr.UserDataMgr.userState = UserState.OK;\r\n                        cc.Mgr.UserDataMgr.RecoverYear = 0;\r\n                    }\r\n                    //cc.log(\"价格 === \" + this.price + \" 对应Id \" + this.Id);\r\n                    cc.Mgr.UserDataMgr.Cash -= this.price;\r\n                    par.addNum = 1;\r\n\r\n                    if(this.Type == ItemType.Car)\r\n                    {\r\n                        cc.Mgr.UserDataMgr.DateSuccescRatio += data.addDate;\r\n                    }\r\n                }\r\n                else if(this.flag == \"Sale\")\r\n                {\r\n                    par.addNum = -1;\r\n                    cc.Mgr.UserDataMgr.Cash += Math.floor(this.price/2);\r\n                }\r\n                par.Id = this.Id;\r\n                par.flag = this.flag;\r\n                cc.Mgr.UserDataMgr.BuySaleCommonItem(par);\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.CommonBuySaleSuccess, par);\r\n            }\r\n            else if(this.Type == ItemType.Mate)\r\n            {\r\n                if(this.flag == \"Sale\")\r\n                {\r\n                    if(cc.Mgr.UserDataMgr.DivorceAge == 0)\r\n                    {\r\n                        cc.Mgr.UserDataMgr.DivorceAge = cc.Mgr.UserDataMgr.Age;\r\n                    }\r\n                    var par = {};\r\n                    par.flag = this.flag;\r\n                    par.Disvorce = true;\r\n                    cc.Mgr.UserDataMgr.DisvorceMateById(this.Id);\r\n                    cc.director.GlobalEvent.emit(cc.Mgr.Event.CommonBuySaleSuccess, par);\r\n                }\r\n            }\r\n        }\r\n        this.ClosePanel();\r\n    },\r\n\r\n\r\n\r\n    ClosePanel:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.flag = \"\";\r\n        this.node.active = false;\r\n    },\r\n\r\n});\r\nmodule.exports = CommonBuyPanel;\r\n"]}