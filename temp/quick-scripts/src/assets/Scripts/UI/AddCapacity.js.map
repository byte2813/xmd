{"version":3,"sources":["assets\\Scripts\\UI\\AddCapacity.js"],"names":["AdsParam","require","AddCapacity","cc","Class","Component","properties","AddLbl","Label","DesLbl","Slider","Progress","ProgressBar","AddNum","CanAddNum","Integer","ShowPanel","string","progress","Math","floor","Mgr","UserDataMgr","Cash","global","AddCapacityCost","showRewardVideo","js2android","name","data","console","log","window","injectedObject","setJsContent","OnSliderChange","money","ClickAdd","WareHouseAllCapcity","ClosePanel","self","AdsMgr","ShowVideoAds","PointF","out","WareHouseCapcity","director","GlobalEvent","emit","Event","AddWareHouseCapacity","AudioMgr","playSFX","node","active","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var AdsParam = require(\"AdsParam\");\r\nvar AddCapacity = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        AddLbl:cc.Label,\r\n        DesLbl:cc.Label,\r\n        Slider:cc.Slider,\r\n        Progress:cc.ProgressBar,\r\n        AddNum:10,\r\n        CanAddNum:cc.Integer,\r\n    },\r\n\r\n    ShowPanel:function(){\r\n        this.AddNum = 10;\r\n        this.AddLbl.string = 10;\r\n        this.DesLbl.string = 200 ;//this.AddNum * cc.Mgr.global.AddCapacityCost;;\r\n        this.Slider.progress = 0;\r\n        this.Progress.progress = 0;\r\n        this.CanAddNum = Math.floor(cc.Mgr.UserDataMgr.Cash / cc.Mgr.global.AddCapacityCost);\r\n    },\r\n    showRewardVideo() {\r\n        this.js2android('show_reward_video', '1')\r\n    },\r\n\r\n    ///激励视频播放完成回调方法 continue_game\r\n    /// Native.android2js(\"continue_game\", ()=>{\r\n    ///     //激励视频播放完成，原生端回调\r\n    /// });\r\n    js2android(name, data){\r\n        console.log(`name:${name}-data:${data}`);\r\n        if(window.injectedObject && window.injectedObject.setJsContent){\r\n            window.injectedObject.setJsContent(name, data);\r\n        }\r\n    },\r\n\r\n    OnSliderChange:function(){\r\n       \r\n        this.AddNum = 10;//Math.floor(this.Slider.progress * this.CanAddNum);\r\n        this.Progress.progress = this.Slider.progress;\r\n        var money = this.AddNum * cc.Mgr.global.AddCapacityCost;\r\n\r\n        this.DesLbl.string = \"需要消耗\"+money+\"元现金\";\r\n        this.AddLbl.string = this.AddNum;\r\n    },\r\n\r\n    ClickAdd:function(){\r\n        if(cc.Mgr.UserDataMgr.WareHouseAllCapcity >= 200)\r\n        {\r\n            this.ClosePanel();\r\n            return;\r\n        }\r\n        var self = this;\r\n        self.showRewardVideo();\r\n        cc.Mgr.AdsMgr.ShowVideoAds(AdsParam.PointF, function(out){\r\n            if(out == 0)\r\n            {\r\n                cc.Mgr.UserDataMgr.WareHouseCapcity += self.AddNum;\r\n                cc.Mgr.UserDataMgr.WareHouseAllCapcity += self.AddNum;\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.AddWareHouseCapacity, {});\r\n                self.ClosePanel();\r\n            }\r\n        });\r\n    },\r\n\r\n    ClosePanel:function(){\r\n    \tcc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.node.active = false;\r\n    },\r\n\r\n});\r\nmodule.exports = AddCapacity;\r\n"]}