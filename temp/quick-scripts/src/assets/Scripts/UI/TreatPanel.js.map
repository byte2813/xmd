{"version":3,"sources":["assets\\Scripts\\UI\\TreatPanel.js"],"names":["AdsParam","require","TreatPanel","cc","Class","Component","properties","costLbl","Label","ShowPanel","string","Math","floor","pow","Mgr","UserDataMgr","Age","HpPoint","callbackFunc","self","showRewardVideo","AdsMgr","ShowVideoAds","PointB","out","director","GlobalEvent","emit","Event","TreatSuccess","ClosePanel","js2android","name","data","console","log","window","injectedObject","setJsContent","AudioMgr","playSFX","node","active","ClickOpen","needMoney","Cash","param","forWhat","text","OpenCommonTip","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var AdsParam = require(\"AdsParam\");\r\nvar TreatPanel = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        costLbl:cc.Label,\r\n    },\r\n\r\n    ShowPanel:function(){\r\n        this.costLbl.string = Math.floor(2000* Math.pow(1.18, cc.Mgr.UserDataMgr.Age-20) *(1-cc.Mgr.UserDataMgr.HpPoint/100));\r\n    },\r\n\r\n    callbackFunc:function(){\r\n        var self = this;\r\n        self.showRewardVideo();\r\n        cc.Mgr.AdsMgr.ShowVideoAds(AdsParam.PointB, function(out){\r\n            if(out == 0)\r\n            {\r\n                cc.Mgr.UserDataMgr.HpPoint = 100;\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.TreatSuccess, {});\r\n                self.ClosePanel();\r\n            }\r\n        }); \r\n    },\r\n    showRewardVideo() {\r\n        this.js2android('show_reward_video', '1')\r\n    },\r\n\r\n    ///激励视频播放完成回调方法 continue_game\r\n    /// Native.android2js(\"continue_game\", ()=>{\r\n    ///     //激励视频播放完成，原生端回调\r\n    /// });\r\n    js2android(name, data){\r\n        console.log(`name:${name}-data:${data}`);\r\n        if(window.injectedObject && window.injectedObject.setJsContent){\r\n            window.injectedObject.setJsContent(name, data);\r\n        }\r\n    },\r\n    ClosePanel:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.node.active =false;\r\n    },\r\n\r\n    ClickOpen:function () {\r\n        var needMoney = Math.floor(2000* Math.pow(1.18, cc.Mgr.UserDataMgr.Age-20) *(1-cc.Mgr.UserDataMgr.HpPoint/100));\r\n        if(cc.Mgr.UserDataMgr.Cash < needMoney)\r\n        {\r\n            var param = {};\r\n            param.forWhat = \"\";\r\n            param.text = \"金钱不够,连住院接受治疗都是奢侈\";\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            return;\r\n        }\r\n        cc.Mgr.UserDataMgr.Cash -= needMoney;\r\n        cc.Mgr.UserDataMgr.HpPoint = 100;\r\n        ////cc.log(\"---------------------------------------\" + cc.Mgr.UserDataMgr.HpPoint);\r\n\t    cc.director.GlobalEvent.emit(cc.Mgr.Event.TreatSuccess, {});\r\n        this.ClosePanel();\r\n    },\r\n});\r\nmodule.exports = TreatPanel;\r\n"]}