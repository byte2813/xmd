{"version":3,"sources":["assets\\Scripts\\UI\\JoyTipPanel.js"],"names":["MateUnLockType","require","JoyTipPanel","cc","Class","Component","properties","desLbl","RichText","forWhat","cost","Integer","ShowPanel","data","string","text","Mgr","global","DateInitCost","BetInitCost","ConfirmClick","UserDataMgr","Cash","param","sd","Math","floor","random","getTranslation","director","GlobalEvent","emit","Event","OpenCommonTip","ClosePanel","seed","DateSuccescRatio","UnLockOneMate","ToDate","Sex","RefreshCashAsset","BetWinRation","str","AudioMgr","playSFX","node","active","module","exports"],"mappings":";;;;;;AAAA,IAAIA,cAAc,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AAC9C,IAAIC,WAAW,GAAGC,EAAE,CAACC,KAAK,CAAC;EACvB,WAASD,EAAE,CAACE,SAAS;EAErBC,UAAU,EAAE;IACRC,MAAM,EAACJ,EAAE,CAACK,QAAQ;IAClBC,OAAO,EAAC,EAAE;IACVC,IAAI,EAACP,EAAE,CAACQ;EACZ,CAAC;EAEDC,SAAS,EAAC,SAAAA,UAASC,IAAI,EAAC;IACpB,IAAGA,IAAI,CAACJ,OAAO,IAAI,QAAQ,EAC3B;MACI,IAAI,CAACF,MAAM,CAACO,MAAM,GAAG,iBAAiB,GAACD,IAAI,CAACE,IAAI,GAAG,UAAU,GAAE,iBAAiB,GAAEZ,EAAE,CAACa,GAAG,CAACC,MAAM,CAACC,YAAY,GAAC,MAAM,GAAG,sBAAsB;IAChJ,CAAC,MACI,IAAGL,IAAI,CAACJ,OAAO,IAAI,OAAO,EAC/B;MACI,IAAI,CAACF,MAAM,CAACO,MAAM,GAAG,iBAAiB,GAACD,IAAI,CAACE,IAAI,GAAG,UAAU,GAAE,iBAAiB,GAAEZ,EAAE,CAACa,GAAG,CAACC,MAAM,CAACE,WAAW,GAAG,MAAM,GAAG,sBAAsB;IACjJ;IACA,IAAGN,IAAI,CAACJ,OAAO,IAAI,IAAI,EACnB,IAAI,CAACA,OAAO,GAAGI,IAAI,CAACJ,OAAO,CAAC,KAE5B,IAAI,CAACA,OAAO,GAAG,EAAE;EACzB,CAAC;EAEDW,YAAY,EAAC,SAAAA,aAAA,EACb;IACI,IAAG,IAAI,CAACX,OAAO,IAAI,QAAQ,EAC3B;MACI,IAAGN,EAAE,CAACa,GAAG,CAACK,WAAW,CAACC,IAAI,GAAGnB,EAAE,CAACa,GAAG,CAACC,MAAM,CAACC,YAAY,EACvD;QACI,IAAIK,KAAK,GAAG,CAAC,CAAC;QACd,IAAIC,EAAE,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAC,CAAC,CAAC;QACpCJ,KAAK,CAACR,IAAI,GAAGZ,EAAE,CAACa,GAAG,CAACC,MAAM,CAACW,cAAc,CAAC,cAAc,GAACJ,EAAE,CAAC;QAC5DrB,EAAE,CAAC0B,QAAQ,CAACC,WAAW,CAACC,IAAI,CAAC5B,EAAE,CAACa,GAAG,CAACgB,KAAK,CAACC,aAAa,EAAEV,KAAK,CAAC;QAC/D,IAAI,CAACW,UAAU,EAAE;QACjB;MACJ;MAEA,IAAIC,IAAI,GAAGV,IAAI,CAACE,MAAM,EAAE;MACxBxB,EAAE,CAACa,GAAG,CAACK,WAAW,CAACC,IAAI,IAAInB,EAAE,CAACa,GAAG,CAACC,MAAM,CAACC,YAAY;MACrDf,EAAE,CAACa,GAAG,CAACC,MAAM,CAACC,YAAY,IAAI,CAAC;MAC/B,IAAGiB,IAAI,GAAGhC,EAAE,CAACa,GAAG,CAACK,WAAW,CAACe,gBAAgB,EAC7C;QACIjC,EAAE,CAACa,GAAG,CAACK,WAAW,CAACgB,aAAa,CAACrC,cAAc,CAACsC,MAAM,EAAEnC,EAAE,CAACa,GAAG,CAACK,WAAW,CAACkB,GAAG,CAAC;MACnF,CAAC,MAED;QACI,IAAIhB,KAAK,GAAG,CAAC,CAAC;QACd,IAAIC,EAAE,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAC,CAAC,CAAC;QACpCJ,KAAK,CAACR,IAAI,GAAGZ,EAAE,CAACa,GAAG,CAACC,MAAM,CAACW,cAAc,CAAC,WAAW,GAACJ,EAAE,CAAC;QACzDrB,EAAE,CAAC0B,QAAQ,CAACC,WAAW,CAACC,IAAI,CAAC5B,EAAE,CAACa,GAAG,CAACgB,KAAK,CAACC,aAAa,EAAEV,KAAK,CAAC;MACnE;MACApB,EAAE,CAAC0B,QAAQ,CAACC,WAAW,CAACC,IAAI,CAAC5B,EAAE,CAACa,GAAG,CAACgB,KAAK,CAACQ,gBAAgB,EAAE,CAAC,CAAC,CAAC;IACnE,CAAC,MACI,IAAG,IAAI,CAAC/B,OAAO,IAAI,OAAO,EAC/B;MACI,IAAGN,EAAE,CAACa,GAAG,CAACK,WAAW,CAACC,IAAI,GAAGnB,EAAE,CAACa,GAAG,CAACC,MAAM,CAACE,WAAW,EACtD;QACI,IAAII,KAAK,GAAG,CAAC,CAAC;QACdA,KAAK,CAACR,IAAI,GAAGZ,EAAE,CAACa,GAAG,CAACC,MAAM,CAACW,cAAc,CAAC,gBAAgB,CAAC;QAC3DzB,EAAE,CAAC0B,QAAQ,CAACC,WAAW,CAACC,IAAI,CAAC5B,EAAE,CAACa,GAAG,CAACgB,KAAK,CAACC,aAAa,EAAEV,KAAK,CAAC;QAC/D,IAAI,CAACW,UAAU,EAAE;QACjB;MACJ;MAEA,IAAIC,IAAI,GAAGV,IAAI,CAACE,MAAM,EAAE;MACxBxB,EAAE,CAACa,GAAG,CAACK,WAAW,CAACC,IAAI,IAAInB,EAAE,CAACa,GAAG,CAACC,MAAM,CAACE,WAAW;MAEpD,IAAGgB,IAAI,GAAGhC,EAAE,CAACa,GAAG,CAACC,MAAM,CAACwB,YAAY,EACpC;QACI,IAAIlB,KAAK,GAAG,CAAC,CAAC;QACdpB,EAAE,CAACa,GAAG,CAACK,WAAW,CAACC,IAAI,IAAKnB,EAAE,CAACa,GAAG,CAACC,MAAM,CAACE,WAAW,GAAG,CAAE;QAC1D,IAAIuB,GAAG,GAAGvC,EAAE,CAACa,GAAG,CAACC,MAAM,CAACW,cAAc,CAAC,QAAQ,CAAC;QAChDL,KAAK,CAACR,IAAI,GAAG2B,GAAG,GAAGvC,EAAE,CAACa,GAAG,CAACC,MAAM,CAACE,WAAW,GAAG,CAAE;QACjDhB,EAAE,CAAC0B,QAAQ,CAACC,WAAW,CAACC,IAAI,CAAC5B,EAAE,CAACa,GAAG,CAACgB,KAAK,CAACC,aAAa,EAAEV,KAAK,CAAC;QAC/D;MACJ,CAAC,MAED;QACI,IAAIA,KAAK,GAAG,CAAC,CAAC;QACdA,KAAK,CAACR,IAAI,GAAGZ,EAAE,CAACa,GAAG,CAACC,MAAM,CAACW,cAAc,CAAC,SAAS,CAAC;QACpDzB,EAAE,CAAC0B,QAAQ,CAACC,WAAW,CAACC,IAAI,CAAC5B,EAAE,CAACa,GAAG,CAACgB,KAAK,CAACC,aAAa,EAAEV,KAAK,CAAC;MACnE;MACApB,EAAE,CAACa,GAAG,CAACC,MAAM,CAACE,WAAW,IAAI,CAAC;MAC9BhB,EAAE,CAAC0B,QAAQ,CAACC,WAAW,CAACC,IAAI,CAAC5B,EAAE,CAACa,GAAG,CAACgB,KAAK,CAACQ,gBAAgB,EAAE,CAAC,CAAC,CAAC;IACnE;IACA,IAAI,CAACN,UAAU,EAAE;EACrB,CAAC;EAEDA,UAAU,EAAC,SAAAA,WAAA,EAAU;IACjB/B,EAAE,CAACa,GAAG,CAAC2B,QAAQ,CAACC,OAAO,CAAC,OAAO,CAAC;IAChC,IAAI,CAACnC,OAAO,GAAG,EAAE;IACjB,IAAI,CAACoC,IAAI,CAACC,MAAM,GAAG,KAAK;EAC5B;AACJ,CAAC,CAAC;AACFC,MAAM,CAACC,OAAO,GAAG9C,WAAW","sourceRoot":"/","sourcesContent":["var MateUnLockType = require(\"MateUnLockType\");\r\nvar JoyTipPanel = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        desLbl:cc.RichText,\r\n        forWhat:\"\",\r\n        cost:cc.Integer,\r\n    },\r\n\r\n    ShowPanel:function(data){\r\n        if(data.forWhat == \"ToDate\")\r\n        {\r\n            this.desLbl.string = \"<color=#696969>\"+data.text + \"\\n花费</c>\" +\"<color=#e77122>\"+ cc.Mgr.global.DateInitCost+\"</c>\" + \"<color=#696969>元</c>\";\r\n        }\r\n        else if(data.forWhat == \"ToBet\")\r\n        {\r\n            this.desLbl.string = \"<color=#696969>\"+data.text + \"\\n投注</c>\" +\"<color=#e77122>\"+ cc.Mgr.global.BetInitCost + \"</c>\" + \"<color=#696969>元</c>\";\r\n        }\r\n        if(data.forWhat != null)\r\n            this.forWhat = data.forWhat;\r\n        else\r\n            this.forWhat = \"\";\r\n    },\r\n\r\n    ConfirmClick:function()\r\n    {\r\n        if(this.forWhat == \"ToDate\")\r\n        {\r\n            if(cc.Mgr.UserDataMgr.Cash < cc.Mgr.global.DateInitCost)\r\n            {\r\n                var param = {};\r\n                var sd = Math.floor(Math.random()*2);\r\n                param.text = cc.Mgr.global.getTranslation(\"NoMoneyDate_\"+sd);\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n                this.ClosePanel();\r\n                return;\r\n            }\r\n\r\n            var seed = Math.random();\r\n            cc.Mgr.UserDataMgr.Cash -= cc.Mgr.global.DateInitCost;\r\n            cc.Mgr.global.DateInitCost *= 2;\r\n            if(seed < cc.Mgr.UserDataMgr.DateSuccescRatio)\r\n            {\r\n                cc.Mgr.UserDataMgr.UnLockOneMate(MateUnLockType.ToDate, cc.Mgr.UserDataMgr.Sex);\r\n            }\r\n            else\r\n            {\r\n                var param = {};\r\n                var sd = Math.floor(Math.random()*2);\r\n                param.text = cc.Mgr.global.getTranslation(\"DateFail_\"+sd);\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            }\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.RefreshCashAsset, {});\r\n        }\r\n        else if(this.forWhat == \"ToBet\")\r\n        {\r\n            if(cc.Mgr.UserDataMgr.Cash < cc.Mgr.global.BetInitCost)\r\n            {\r\n                var param = {};\r\n                param.text = cc.Mgr.global.getTranslation(\"MoneyNotEnough\");\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n                this.ClosePanel();\r\n                return;\r\n            }\r\n\r\n            var seed = Math.random();\r\n            cc.Mgr.UserDataMgr.Cash -= cc.Mgr.global.BetInitCost;\r\n\r\n            if(seed < cc.Mgr.global.BetWinRation)\r\n            {\r\n                var param = {};\r\n                cc.Mgr.UserDataMgr.Cash += (cc.Mgr.global.BetInitCost * 3);\r\n                var str = cc.Mgr.global.getTranslation(\"BetWin\");\r\n                param.text = str+ (cc.Mgr.global.BetInitCost * 3);\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n                //cc.Mgr.UserDataMgr.UnLockOneMate(MateUnLockType.ToDate, cc.Mgr.UserDataMgr.Sex);\r\n            }\r\n            else\r\n            {\r\n                var param = {};\r\n                param.text = cc.Mgr.global.getTranslation(\"BetLose\");\r\n                cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);\r\n            }\r\n            cc.Mgr.global.BetInitCost *= 2;\r\n            cc.director.GlobalEvent.emit(cc.Mgr.Event.RefreshCashAsset, {});\r\n        }\r\n        this.ClosePanel();\r\n    },\r\n\r\n    ClosePanel:function(){\r\n        cc.Mgr.AudioMgr.playSFX(\"click\");\r\n        this.forWhat = \"\";\r\n        this.node.active = false;\r\n    },\r\n});\r\nmodule.exports = JoyTipPanel;\r\n"]}