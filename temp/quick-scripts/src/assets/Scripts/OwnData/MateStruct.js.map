{"version":3,"sources":["assets\\Scripts\\OwnData\\MateStruct.js"],"names":["ItemType","require","MateUnLockType","MateStruct","cc","Class","name","properties","icon","Id","Integer","sex","canDate","curLevel","unlockCond","LovePoint","UpLv","ReturnInitState","NULL","ChangeCanDateState","flag","RefreshAfterLvUp","outpar","isFull","mateData","Mgr","MapDataMgr","getDataByItemTypeAndId","Mate","lovePointList","bonusList","index","i","length","module","exports"],"mappings":";;;;;;AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAClC,IAAIC,cAAc,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AAC9C;AACA,IAAIE,UAAU,GAAGC,EAAE,CAACC,KAAK,CAAC;EACzBC,IAAI,EAAC,YAAY;EACjBC,UAAU,EAAC;IACVC,IAAI,EAAC,EAAE;IACPF,IAAI,EAAC,EAAE;IACPG,EAAE,EAACL,EAAE,CAACM,OAAO;IACbC,GAAG,EAACP,EAAE,CAACM,OAAO;IAAE;IAChBE,OAAO,EAAC,KAAK;IAAC;IACdC,QAAQ,EAACT,EAAE,CAACM,OAAO;IACnBI,UAAU,EAACV,EAAE,CAACM,OAAO;IAAC;IACtBK,SAAS,EAACX,EAAE,CAACM,OAAO;IAAG;IACvBM,IAAI,EAAC,KAAK,CAAC;EACZ,CAAC;;EAED;EACAC,eAAe,EAAC,SAAAA,gBAAA,EAAU;IACzB,IAAI,CAACF,SAAS,GAAG,CAAC;IAClB,IAAI,CAACH,OAAO,GAAG,KAAK;IACpB,IAAG,IAAI,CAACE,UAAU,IAAIZ,cAAc,CAACgB,IAAI,EACxC,IAAI,CAACN,OAAO,GAAG,IAAI;IAEpB,IAAI,CAACC,QAAQ,GAAG,CAAC;IACjB,IAAI,CAACG,IAAI,GAAG,KAAK;EAClB,CAAC;EAED;EACAG,kBAAkB,EAAC,SAAAA,mBAAWC,IAAI,EAAE;IACnC,IAAI,CAACR,OAAO,GAAGQ,IAAI;EACpB,CAAC;EAEDC,gBAAgB,EAAC,SAAAA,iBAAA,EAAY;IAC5B,IAAIC,MAAM,GAAG,CAAC,CAAC;IACf,IAAG,IAAI,CAACN,IAAI,IAAI,IAAI,EACpB;MACC;MACAM,MAAM,CAACC,MAAM,GAAG,KAAK;MACrBD,MAAM,CAACP,SAAS,GAAG,GAAG;MACtB,OAAO,IAAI;IACZ;IACA,IAAIS,QAAQ,GAAGpB,EAAE,CAACqB,GAAG,CAACC,UAAU,CAACC,sBAAsB,CAAC3B,QAAQ,CAAC4B,IAAI,EAAE,IAAI,CAACnB,EAAE,CAAC;IAC5E,IAAIoB,aAAa,GAAGL,QAAQ,CAACK,aAAa;IAC1C,IAAIC,SAAS,GAAGN,QAAQ,CAACM,SAAS;IAErC,IAAI,CAACjB,QAAQ,IAAI,CAAC;IAClB,IAAIkB,KAAK,GAAG,CAAC;IACb,KAAK,IAAIC,CAAC,GAAGH,aAAa,CAACI,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MACnD,IAAGH,aAAa,CAACG,CAAC,CAAC,CAACnB,QAAQ,IAAI,IAAI,CAACA,QAAQ,EAC7C;QACCkB,KAAK,GAAGC,CAAC;QACT;MACD;IACD;IACA,IAAI,CAACjB,SAAS,GAAGc,aAAa,CAACE,KAAK,CAAC,CAAChB,SAAS;IAC/C,IAAG,IAAI,CAACA,SAAS,IAAI,GAAG,EACxB;MACC,IAAI,CAACC,IAAI,GAAG,IAAI,CAAC,CAAC;MAClBM,MAAM,CAACC,MAAM,GAAG,IAAI;IACrB,CAAC,MAED;MACCD,MAAM,CAACC,MAAM,GAAG,KAAK;IACtB;IACAD,MAAM,CAACP,SAAS,GAAG,IAAI,CAACA,SAAS;IACjC,OAAOO,MAAM;EACd;AACD,CAAC,CAAC;AACFY,MAAM,CAACC,OAAO,GAAGhC,UAAU","sourceRoot":"/","sourcesContent":["var ItemType = require(\"ItemType\");\r\nvar MateUnLockType = require(\"MateUnLockType\");\r\n//约会对象//需要更多源码联系Q:3038745955\r\nvar MateStruct = cc.Class({\r\n\tname:\"MateStruct\",\r\n\tproperties:{\r\n\t\ticon:\"\",\r\n\t\tname:\"\",\r\n\t\tId:cc.Integer,\r\n\t\tsex:cc.Integer, //性别 1表示男  2 表示女\r\n\t\tcanDate:false,// 当前是否可以直接约会了\r\n\t\tcurLevel:cc.Integer,\r\n\t\tunlockCond:cc.Integer,//可约条件\r\n\t\tLovePoint:cc.Integer,  //好感度\r\n\t\tUpLv:false,//是否满级\r\n\t},\r\n\r\n\t//离婚后会让伴侣状态恢复为初始状态\r\n\tReturnInitState:function(){\r\n\t\tthis.LovePoint = 0;\r\n\t\tthis.canDate = false;\r\n\t\tif(this.unlockCond == MateUnLockType.NULL)\r\n\t\t\tthis.canDate = true;\r\n\r\n\t\tthis.curLevel = 0;\r\n\t\tthis.UpLv = false;\r\n\t},\r\n\r\n\t//改变当前可约状态\r\n\tChangeCanDateState:function ( flag) {\r\n\t\tthis.canDate = flag;\r\n\t},\r\n\r\n\tRefreshAfterLvUp:function () {\r\n\t\tvar outpar = {};\r\n\t\tif(this.UpLv == true)\r\n\t\t{\r\n\t\t\t//cc.log(\"已经可以滚床单了,还约什么\");\r\n\t\t\toutpar.isFull = false;\r\n\t\t\toutpar.LovePoint = 100;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar mateData = cc.Mgr.MapDataMgr.getDataByItemTypeAndId(ItemType.Mate, this.Id);\r\n    \tvar lovePointList = mateData.lovePointList;\r\n    \tvar bonusList = mateData.bonusList;\r\n    \t\r\n\t\tthis.curLevel += 1;\r\n\t\tvar index = 0;\r\n\t\tfor (var i = lovePointList.length - 1; i >= 0; i--) {\r\n\t\t\tif(lovePointList[i].curLevel == this.curLevel)\r\n\t\t\t{\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.LovePoint = lovePointList[index].LovePoint;\r\n\t\tif(this.LovePoint == 100)\r\n\t\t{\r\n\t\t\tthis.UpLv = true; //满级了\r\n\t\t\toutpar.isFull = true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\toutpar.isFull = false;\r\n\t\t}\r\n\t\toutpar.LovePoint = this.LovePoint;\r\n\t\treturn outpar;\r\n\t},\r\n});\r\nmodule.exports = MateStruct;\r\n"]}