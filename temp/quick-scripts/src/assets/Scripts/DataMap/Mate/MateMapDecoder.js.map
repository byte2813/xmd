{"version":3,"sources":["assets\\Scripts\\DataMap\\Mate\\MateMapDecoder.js"],"names":["LovePointCost","require","MateData","MateBonus","MateGetCond","MateMapDecoder","cc","Class","Component","properties","jsonName","mateList","type","DecodeJson","event","self","reCb","loader","loadRes","error","obj","jsonRoot","json","mate","i","length","mateData","Id","icon","sex","name","unlockCond","j","getCond","unlockType","value","getCondList","lovePointList","lpCost","cost","LovePoint","curLevel","bonusList","bonusType","bonusNum","getDataByName","data","mateListmateList","getDataByItemId","itemId","getJsonLength","getDataList","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var LovePointCost = require(\"LovePointCost\");\r\nvar MateData = require(\"MateData\");\r\nvar MateBonus = require(\"MateBonus\");\r\nvar MateGetCond = require(\"MateGetCond\");\r\nvar MateMapDecoder = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        jsonName:\"mate\",\r\n        mateList:{\r\n            default:[],\r\n            type:[MateData],\r\n        },\r\n    },\r\n\r\n    //解析数据\r\n    DecodeJson:function (event) {\r\n        //cc.log(\"===解析伴侣数据===\");\r\n        var self = this;\r\n        self.reCb = event;\r\n        cc.loader.loadRes(\"json/\"+self.jsonName, function (error, obj) {\r\n            if(error)\r\n            {\r\n                //cc.log(\"+++解析出错，查下json+++\" + error);\r\n                self.reCb(false);\r\n                return;\r\n            }\r\n            \r\n            var jsonRoot = obj.json.mate;\r\n            //cc.log(\"===数据长度===\" + jsonRoot.length);\r\n            for (var i = 0; i < jsonRoot.length; i++) {\r\n                var mateData = new MateData();\r\n                mateData.Id = jsonRoot[i].Id;\r\n                mateData.icon = jsonRoot[i].icon;\r\n                mateData.sex = jsonRoot[i].sex;\r\n                mateData.name = jsonRoot[i].name;\r\n                mateData.unlockCond = jsonRoot[i].unlockCond;//可以约会条件\r\n                ////cc.log(jsonRoot[i].name + \" 是否可以直接约会的\" + mateData.unlockCond);\r\n                for (var j = 0; j < jsonRoot[i].getCond.length; j++) {\r\n                    var getCond = new MateGetCond();\r\n                    getCond.unlockType = jsonRoot[i].getCond[j][0];\r\n                    getCond.value = jsonRoot[i].getCond[j][1];\r\n                    mateData.getCondList[j] = getCond;\r\n                }\r\n\r\n                for (var j = 0; j < jsonRoot[i].lovePointList.length; j++) {\r\n                    var lpCost = new LovePointCost();\r\n                    lpCost.cost = jsonRoot[i].lovePointList[j][2];\r\n                    lpCost.LovePoint = jsonRoot[i].lovePointList[j][1];\r\n                    lpCost.curLevel = jsonRoot[i].lovePointList[j][0];\r\n                    mateData.lovePointList[j] = lpCost;\r\n                }\r\n\r\n                for (var j = 0; j < jsonRoot[i].bonusList.length; j++) {\r\n                    var lpCost = new MateBonus();\r\n                    lpCost.bonusType = jsonRoot[i].bonusList[j][0];\r\n                    lpCost.bonusNum = jsonRoot[i].bonusList[j][1];\r\n                    mateData.bonusList[j] = lpCost;\r\n                }\r\n                self.mateList[i] = mateData; \r\n            }\r\n            self.reCb(true);\r\n        });\r\n    },\r\n\r\n    //通过名字拿到当前的数据 不建议用，你要用我也没办法\r\n    getDataByName:function (name) {\r\n        var data = null;\r\n        for (var i = this.mateListmateList.length - 1; i >= 0; i--) {\r\n            if(name == this.mateList[i].name)\r\n            {\r\n                data = this.mateList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    //通过itemid获取数据\r\n    getDataByItemId:function(itemId){\r\n        var data = null;\r\n        for (var i = this.mateList.length - 1; i >= 0; i--) {\r\n            if(itemId == this.mateList[i].Id)\r\n            {\r\n                data = this.mateList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    getJsonLength:function(){\r\n        return this.mateList.length\r\n    },\r\n\r\n    getDataList:function(){\r\n        return this.mateList;\r\n    },\r\n    \r\n});\r\nmodule.exports = MateMapDecoder;\r\n"]}