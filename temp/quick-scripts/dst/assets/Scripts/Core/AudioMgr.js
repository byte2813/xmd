
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Scripts/Core/AudioMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '80f4ec1zbdNFZ7s9jPxp+Rh', 'AudioMgr');
// Scripts/Core/AudioMgr.js

"use strict";

/*
*****Created By Alex 2018 08 24
*/
var AudioMgr = cc.Class({
  "extends": cc.Component,
  properties: {
    bgmVolume: 0.5,
    sfxVolume: 1.0,
    bgmAudioID: -1,
    musicState: 1 //1 表示开启 0 表示关闭
  },

  // use this for initialization
  init: function init() {
    cc.Mgr.loadSound = false;
    var t = cc.sys.localStorage.getItem("bgmVolume");
    if (t != null) {
      this.bgmVolume = parseFloat(t);
    }
    var t = cc.sys.localStorage.getItem("sfxVolume");
    if (t != null) {
      this.sfxVolume = parseFloat(t);
    }
    cc.game.on(cc.game.EVENT_HIDE, function () {
      console.log("cc.audioEngine.pauseAll");
      cc.audioEngine.pauseAll();
    });
    cc.game.on(cc.game.EVENT_SHOW, function () {
      console.log("cc.audioEngine.resumeAll");
      cc.audioEngine.resumeAll();
    });
    this.node = new cc.Node('audioNode');
  },
  //获取需要播放某个音效用  根据名字来
  getUrl: function getUrl(url) {
    return cc.url.raw("resources/sound/" + url + ".mp3");
  },
  //播放背景音乐
  playBGM: function playBGM(url) {
    var _this = this;
    if (this.bgmAudioID >= 0) {
      cc.audioEngine.stop(this.bgmAudioID);
    }
    cc.resources.load('sound/' + url, cc.AudioClip, function (err, audioClip) {
      var audioSource = _this.node.addComponent(cc.AudioSource);
      audioSource.clip = audioClip;
      audioSource.volumn = _this.bgmVolume;
      audioSource.loop = true;
      audioSource.play();
    });
  },
  //播放音效
  playSFX: function playSFX(url) {
    var _this2 = this;
    cc.resources.load('sound/' + url, cc.AudioClip, function (err, audioClip) {
      var audioSource = _this2.node.addComponent(cc.AudioSource);
      audioSource.clip = audioClip;
      audioSource.volumn = _this2.sfxVolume;
      audioSource.loop = false;
      audioSource.play();
    });
  },
  //设置音效大小
  setSFXVolume: function setSFXVolume(v) {
    if (this.sfxVolume != v) {
      cc.sys.localStorage.setItem("sfxVolume", v);
      this.sfxVolume = v;
    }
  },
  //设置背景音大小
  setBGMVolume: function setBGMVolume(v, force) {
    if (this.bgmAudioID >= 0) {
      if (v > 0) {
        cc.audioEngine.resume(this.bgmAudioID);
      } else {
        cc.audioEngine.pause(this.bgmAudioID);
      }
    }
    if (this.bgmVolume != v || force) {
      cc.sys.localStorage.setItem("bgmVolume", v);
      this.bgmVolume = v;
      cc.audioEngine.setVolume(this.bgmAudioID, v);
    }
  },
  //暂停
  pauseAll: function pauseAll() {
    this.musicState = 0;
    this.bgmVolume = 0.0;
    this.sfxVolume = 0.0;
    cc.audioEngine.pauseAll();
  },
  //恢复
  resumeAll: function resumeAll() {
    this.musicState = 1;
    this.bgmVolume = 0.5;
    this.sfxVolume = 1.0;
    cc.audioEngine.resumeAll();
  },
  getVoiceState: function getVoiceState() {
    return this.musicState;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0c1xcQ29yZVxcQXVkaW9NZ3IuanMiXSwibmFtZXMiOlsiQXVkaW9NZ3IiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImJnbVZvbHVtZSIsInNmeFZvbHVtZSIsImJnbUF1ZGlvSUQiLCJtdXNpY1N0YXRlIiwiaW5pdCIsIk1nciIsImxvYWRTb3VuZCIsInQiLCJzeXMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VGbG9hdCIsImdhbWUiLCJvbiIsIkVWRU5UX0hJREUiLCJjb25zb2xlIiwibG9nIiwiYXVkaW9FbmdpbmUiLCJwYXVzZUFsbCIsIkVWRU5UX1NIT1ciLCJyZXN1bWVBbGwiLCJub2RlIiwiTm9kZSIsImdldFVybCIsInVybCIsInJhdyIsInBsYXlCR00iLCJfdGhpcyIsInN0b3AiLCJyZXNvdXJjZXMiLCJsb2FkIiwiQXVkaW9DbGlwIiwiZXJyIiwiYXVkaW9DbGlwIiwiYXVkaW9Tb3VyY2UiLCJhZGRDb21wb25lbnQiLCJBdWRpb1NvdXJjZSIsImNsaXAiLCJ2b2x1bW4iLCJsb29wIiwicGxheSIsInBsYXlTRlgiLCJfdGhpczIiLCJzZXRTRlhWb2x1bWUiLCJ2Iiwic2V0SXRlbSIsInNldEJHTVZvbHVtZSIsImZvcmNlIiwicmVzdW1lIiwicGF1c2UiLCJzZXRWb2x1bWUiLCJnZXRWb2ljZVN0YXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLElBQUlBLFFBQVEsR0FBR0MsRUFBRSxDQUFDQyxLQUFLLENBQUM7RUFDcEIsV0FBU0QsRUFBRSxDQUFDRSxTQUFTO0VBRXJCQyxVQUFVLEVBQUU7SUFDUkMsU0FBUyxFQUFDLEdBQUc7SUFDYkMsU0FBUyxFQUFDLEdBQUc7SUFDYkMsVUFBVSxFQUFDLENBQUMsQ0FBQztJQUNiQyxVQUFVLEVBQUMsQ0FBQyxDQUFFO0VBQ2xCLENBQUM7O0VBRUQ7RUFDQUMsSUFBSSxFQUFFLFNBQUFBLEtB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QUM7SUFDbkIsSUFBSSxDQUFDSCxTQUFTLEdBQUcsR0FBRztJQUNwQixJQUFJLENBQUNDLFNBQVMsR0FBRyxHQUFHO0lBQ3BCTCxFQUFFLENBQUNxQixXQUFXLENBQUNDLFFBQVEsRUFBRTtFQUU3QixDQUFDO0VBQ0Q7RUFDQUUsU0FBUyxFQUFDLFNBQUFBLFVBQUEsRUFBVTtJQUNoQixJQUFJLENBQUNqQixVQUFVLEdBQUcsQ0FBQztJQUNuQixJQUFJLENBQUNILFNBQVMsR0FBRyxHQUFHO0lBQ3BCLElBQUksQ0FBQ0MsU0FBUyxHQUFHLEdBQUc7SUFDcEJMLEVBQUUsQ0FBQ3FCLFdBQVcsQ0FBQ0csU0FBUyxFQUFFO0VBQzlCLENBQUM7RUFFRCtCLGFBQWEsRUFBQyxTQUFBQSxjQUFBLEVBQVU7SUFDcEIsT0FBTyxJQUFJLENBQUNoRCxVQUFVO0VBQzFCO0FBQ0osQ0FBQyxDQUFDIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4qKioqKkNyZWF0ZWQgQnkgQWxleCAyMDE4IDA4IDI0XHJcbiovXHJcbnZhciBBdWRpb01nciA9IGNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgYmdtVm9sdW1lOjAuNSxcclxuICAgICAgICBzZnhWb2x1bWU6MS4wLFxyXG4gICAgICAgIGJnbUF1ZGlvSUQ6LTEsXHJcbiAgICAgICAgbXVzaWNTdGF0ZToxLCAvLzEg6KGo56S65byA5ZCvIDAg6KGo56S65YWz6ZetXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLk1nci5sb2FkU291bmQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIHQgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJiZ21Wb2x1bWVcIik7XHJcbiAgICAgICAgaWYodCAhPSBudWxsKXtcclxuICAgICAgICAgICAgdGhpcy5iZ21Wb2x1bWUgPSBwYXJzZUZsb2F0KHQpOyAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHQgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzZnhWb2x1bWVcIik7XHJcbiAgICAgICAgaWYodCAhPSBudWxsKXtcclxuICAgICAgICAgICAgdGhpcy5zZnhWb2x1bWUgPSBwYXJzZUZsb2F0KHQpOyAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2MuZ2FtZS5vbihjYy5nYW1lLkVWRU5UX0hJREUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYy5hdWRpb0VuZ2luZS5wYXVzZUFsbFwiKTtcclxuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGF1c2VBbGwoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjYy5nYW1lLm9uKGNjLmdhbWUuRVZFTlRfU0hPVywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImNjLmF1ZGlvRW5naW5lLnJlc3VtZUFsbFwiKTtcclxuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucmVzdW1lQWxsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5ub2RlID0gbmV3IGNjLk5vZGUoJ2F1ZGlvTm9kZScpXHJcbiAgICB9LFxyXG5cclxuICAgIC8v6I635Y+W6ZyA6KaB5pKt5pS+5p+Q5Liq6Z+z5pWI55SoICDmoLnmja7lkI3lrZfmnaVcclxuICAgIGdldFVybDpmdW5jdGlvbih1cmwpe1xyXG4gICAgICAgIHJldHVybiBjYy51cmwucmF3KFwicmVzb3VyY2VzL3NvdW5kL1wiICsgdXJsICsgXCIubXAzXCIpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aSreaUvuiDjOaZr+mfs+S5kFxyXG4gICAgcGxheUJHTTpmdW5jdGlvbih1cmwpe1xyXG4gICAgICAgIGlmKHRoaXMuYmdtQXVkaW9JRCA+PSAwKXtcclxuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUuc3RvcCh0aGlzLmJnbUF1ZGlvSUQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYy5yZXNvdXJjZXMubG9hZCgnc291bmQvJyArIHVybCwgY2MuQXVkaW9DbGlwLCAoZXJyLCBhdWRpb0NsaXApID0+IHtcclxuICAgICAgICAgICAgbGV0IGF1ZGlvU291cmNlID0gdGhpcy5ub2RlLmFkZENvbXBvbmVudChjYy5BdWRpb1NvdXJjZSk7XHJcbiAgICAgICAgICAgIGF1ZGlvU291cmNlLmNsaXAgPSBhdWRpb0NsaXA7XHJcbiAgICAgICAgICAgIGF1ZGlvU291cmNlLnZvbHVtbiA9IHRoaXMuYmdtVm9sdW1lXHJcbiAgICAgICAgICAgIGF1ZGlvU291cmNlLmxvb3AgPSB0cnVlXHJcbiAgICAgICAgICAgIGF1ZGlvU291cmNlLnBsYXkoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvL+aSreaUvumfs+aViFxyXG4gICAgcGxheVNGWDpmdW5jdGlvbih1cmwpe1xyXG4gICAgICAgIGNjLnJlc291cmNlcy5sb2FkKCdzb3VuZC8nICsgdXJsLCBjYy5BdWRpb0NsaXAsIChlcnIsIGF1ZGlvQ2xpcCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgYXVkaW9Tb3VyY2UgPSB0aGlzLm5vZGUuYWRkQ29tcG9uZW50KGNjLkF1ZGlvU291cmNlKTtcclxuICAgICAgICAgICAgYXVkaW9Tb3VyY2UuY2xpcCA9IGF1ZGlvQ2xpcDtcclxuICAgICAgICAgICAgYXVkaW9Tb3VyY2Uudm9sdW1uID0gdGhpcy5zZnhWb2x1bWVcclxuICAgICAgICAgICAgYXVkaW9Tb3VyY2UubG9vcCA9IGZhbHNlXHJcbiAgICAgICAgICAgIGF1ZGlvU291cmNlLnBsYXkoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvL+iuvue9rumfs+aViOWkp+Wwj1xyXG4gICAgc2V0U0ZYVm9sdW1lOmZ1bmN0aW9uKHYpe1xyXG4gICAgICAgIGlmKHRoaXMuc2Z4Vm9sdW1lICE9IHYpe1xyXG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzZnhWb2x1bWVcIix2KTtcclxuICAgICAgICAgICAgdGhpcy5zZnhWb2x1bWUgPSB2O1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+iuvue9ruiDjOaZr+mfs+Wkp+Wwj1xyXG4gICAgc2V0QkdNVm9sdW1lOmZ1bmN0aW9uKHYsZm9yY2Upe1xyXG4gICAgICAgIGlmKHRoaXMuYmdtQXVkaW9JRCA+PSAwKXtcclxuICAgICAgICAgICAgaWYodiA+IDApe1xyXG4gICAgICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucmVzdW1lKHRoaXMuYmdtQXVkaW9JRCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnBhdXNlKHRoaXMuYmdtQXVkaW9JRCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5iZ21Wb2x1bWUgIT0gdiB8fCBmb3JjZSl7XHJcbiAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImJnbVZvbHVtZVwiLHYpO1xyXG4gICAgICAgICAgICB0aGlzLmJnbVZvbHVtZSA9IHY7XHJcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnNldFZvbHVtZSh0aGlzLmJnbUF1ZGlvSUQsdik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5pqC5YGcXHJcbiAgICBwYXVzZUFsbDpmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMubXVzaWNTdGF0ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5iZ21Wb2x1bWUgPSAwLjA7XHJcbiAgICAgICAgdGhpcy5zZnhWb2x1bWUgPSAwLjA7XHJcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUucGF1c2VBbGwoKTtcclxuXHJcbiAgICB9LFxyXG4gICAgLy/mgaLlpI1cclxuICAgIHJlc3VtZUFsbDpmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMubXVzaWNTdGF0ZSA9IDE7XHJcbiAgICAgICAgdGhpcy5iZ21Wb2x1bWUgPSAwLjU7XHJcbiAgICAgICAgdGhpcy5zZnhWb2x1bWUgPSAxLjA7XHJcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUucmVzdW1lQWxsKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFZvaWNlU3RhdGU6ZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdXNpY1N0YXRlO1xyXG4gICAgfSxcclxufSk7XHJcbiJdfQ==