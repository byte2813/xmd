
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Scripts/DataMap/MapDataMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'd28551OkKNJvql/1WnFj+bS', 'MapDataMgr');
// Scripts/DataMap/MapDataMgr.js

"use strict";

var CarMapDecoder = require("CarMapDecoder");
var CompanyMapDecoder = require("CompanyMapDecoder");
var GoodMapDecoder = require("GoodMapDecoder");
var HouseMapDecoder = require("HouseMapDecoder");
var MateMapDecoder = require("MateMapDecoder");
var SkillMapDecoder = require("SkillMapDecoder");
var CashMapDecoder = require("CashMapDecoder");
var AchieveMapDecoder = require("AchieveMapDecoder");
var EventMapDecoder = require("EventMapDecoder");
var ItemType = require("ItemType");
var MapDataMgr = cc.Class({
  "extends": cc.Component,
  properties: {
    carMap: null,
    companyMap: null,
    goodsMap: null,
    houseMap: null,
    mateMap: null,
    skillMap: null,
    cashMap: null,
    achieveMap: null,
    eventDataMap: null,
    decodeAll: 0
  },
  checkInitMapSuc: function checkInitMapSuc() {
    if (this.decodeAll == 100) {
      //cc.log("数据解析完了");
    }
  },
  //初始化解析数据表
  initMaps: function initMaps() {
    cc.log("开始解析数据了");
    cc.Mgr.Parse = false;
    this.goodsMap = new GoodMapDecoder();
    this.cashMap = new CashMapDecoder();
    this.houseMap = new HouseMapDecoder();
    this.companyMap = new CompanyMapDecoder();
    this.carMap = new CarMapDecoder();
    this.mateMap = new MateMapDecoder();
    this.skillMap = new SkillMapDecoder();
    this.achieveMap = new AchieveMapDecoder();
    this.eventDataMap = new EventMapDecoder();
    var self = this;
    this.decodeAll = 0;
    this.carMap.DecodeJson(function (result) {
      if (result) {
        self.decodeAll += 10;
        //cc.log("===解析数据成功=== 汽车" + self.decodeAll);
        if (self.decodeAll == 100) {
          cc.Mgr.Parse = true;
          cc.director.GlobalEvent.emit(cc.Mgr.Event.ParseFinish, {});
        }
      }
    });
    this.companyMap.DecodeJson(function (result) {
      if (result) {
        self.decodeAll += 10;
        //cc.log("===解析数据成功=== 公司" + self.decodeAll);
        if (self.decodeAll == 100) {
          cc.Mgr.Parse = true;
          cc.director.GlobalEvent.emit(cc.Mgr.Event.ParseFinish, {});
        }
      }
    });
    this.houseMap.DecodeJson(function (result) {
      if (result) {
        self.decodeAll += 10;
        //cc.log("===解析数据成功=== 房子"+ self.decodeAll);
        if (self.decodeAll == 100) {
          cc.Mgr.Parse = true;
          cc.director.GlobalEvent.emit(cc.Mgr.Event.ParseFinish, {});
        }
      }
    });
    this.mateMap.DecodeJson(function (result) {
      if (result) {
        self.decodeAll += 10;
        //cc.log("===解析数据成功=== 小伙伴" + self.decodeAll);
        if (self.decodeAll == 100) {
          cc.Mgr.Parse = true;
          cc.director.GlobalEvent.emit(cc.Mgr.Event.ParseFinish, {});
        }
      }
    });
    this.skillMap.DecodeJson(function (result) {
      if (result) {
        self.decodeAll += 10;
        //cc.log("===解析数据成功=== 技能" + self.decodeAll);
        if (self.decodeAll == 100) {
          cc.Mgr.Parse = true;
          cc.director.GlobalEvent.emit(cc.Mgr.Event.ParseFinish, {});
        }
      }
    });
    this.cashMap.DecodeJson(function (result) {
      if (result) {
        self.decodeAll += 10;
        //cc.log("===解析数据成功=== 现金" + self.decodeAll);
        if (self.decodeAll == 100) {
          cc.Mgr.Parse = true;
          cc.director.GlobalEvent.emit(cc.Mgr.Event.ParseFinish, {});
        }
      }
    });
    this.achieveMap.DecodeJson(function (result) {
      if (result) {
        self.decodeAll += 10;
        //cc.log("===解析数据成功=== 成就" + self.decodeAll);
        if (self.decodeAll == 100) {
          cc.Mgr.Parse = true;
          cc.director.GlobalEvent.emit(cc.Mgr.Event.ParseFinish, {});
        }
      }
    });
    this.eventDataMap.DecodeJson(function (result) {
      if (result) {
        self.decodeAll += 10;
        //cc.log("===解析数据成功=== 事件" + self.decodeAll);
        if (self.decodeAll == 100) {
          cc.Mgr.Parse = true;
          cc.director.GlobalEvent.emit(cc.Mgr.Event.ParseFinish, {});
        }
      }
    });
    this.goodsMap.DecodeJson(function (result) {
      if (result) {
        self.decodeAll += 20;
        //cc.log("===解析数据成功=== 货物" + self.decodeAll);
        if (self.decodeAll == 100) {
          cc.Mgr.Parse = true;
          cc.director.GlobalEvent.emit(cc.Mgr.Event.ParseFinish, {});
        }
      }
    });
  },
  getDataByItemTypeAndId: function getDataByItemTypeAndId(itemType, itemId) {
    var data = null;
    //cc.log("ItemType = " + itemType + "  Id = " + itemId);
    switch (itemType) {
      case ItemType.Cash:
        data = this.cashMap.getDataByItemId(itemId);
        break;
      case ItemType.Goods:
        data = this.goodsMap.getDataByItemId(itemId);
        break;
      case ItemType.Skill:
        data = this.skillMap.getDataByItemId(itemId);
        break;
      case ItemType.Company:
        data = this.companyMap.getDataByItemId(itemId);
        break;
      case ItemType.House:
        data = this.houseMap.getDataByItemId(itemId);
        break;
      case ItemType.Car:
        data = this.carMap.getDataByItemId(itemId);
        break;
      case ItemType.Mate:
        data = this.mateMap.getDataByItemId(itemId);
        break;
      case ItemType.Achieve:
        data = this.achieveMap.getDataByItemId(itemId);
        break;
      case ItemType.EventData:
        data = this.eventDataMap.getDataByItemId(itemId);
        break;
    }
    return data;
  },
  getDataLengthByItemType: function getDataLengthByItemType(itemType) {
    var len = 0;
    switch (itemType) {
      case ItemType.Cash:
        len = this.cashMap.getJsonLength();
        break;
      case ItemType.Goods:
        len = this.goodsMap.getJsonLength();
        break;
      case ItemType.Skill:
        len = this.skillMap.getJsonLength();
        break;
      case ItemType.Company:
        len = this.companyMap.getJsonLength();
        break;
      case ItemType.House:
        len = this.houseMap.getJsonLength();
        break;
      case ItemType.Car:
        len = this.carMap.getJsonLength();
        break;
      case ItemType.Mate:
        len = this.mateMap.getJsonLength();
        break;
      case ItemType.Achieve:
        len = this.achieveMap.getJsonLength();
        break;
      case ItemType.EventData:
        len = this.eventDataMap.getJsonLength();
        break;
    }
    return len;
  },
  getDataListByItemType: function getDataListByItemType(itemType) {
    var dataList = null;
    //cc.log("拿数据 = " + itemType);
    switch (itemType) {
      case ItemType.Cash:
        dataList = this.cashMap.getDataList();
        break;
      case ItemType.Goods:
        dataList = this.goodsMap.getDataList();
        break;
      case ItemType.Skill:
        dataList = this.skillMap.getDataList();
        break;
      case ItemType.Company:
        dataList = this.companyMap.getDataList();
        break;
      case ItemType.House:
        dataList = this.houseMap.getDataList();
        break;
      case ItemType.Car:
        dataList = this.carMap.getDataList();
        break;
      case ItemType.Mate:
        dataList = this.mateMap.getDataList();
        break;
      case ItemType.Achieve:
        dataList = this.achieveMap.getDataList();
        break;
      case ItemType.EventData:
        dataList = this.eventDataMap.getDataList();
        break;
    }
    //cc.log("取得数据 " + dataList.length);
    return dataList;
  },
  //专门给技能的数据获取用
  getSkillListById: function getSkillListById(Id) {
    return this.skillMap.getSkillListById(Id);
  },
  getSkillDataByTwoId: function getSkillDataByTwoId(Id, subId) {
    return this.skillMap.getSkillDataByTwoId(Id);
  },
  getUpgradeCostByTwoId: function getUpgradeCostByTwoId(Id, subId, tolv) {
    return this.skillMap.getUpgradeCostByTwoId(Id, subId, tolv);
  },
  getSkillAddBonusByTwoIdAndLv: function getSkillAddBonusByTwoIdAndLv(Id, subId, tolv) {
    return this.skillMap.getSkillAddBonusByTwoIdAndLv(Id, subId, tolv);
  },
  //获取对应性别的购买物品
  getDataListBySex: function getDataListBySex(Sex) {
    return this.goodsMap.getDataListBySex(Sex);
  }
});
module.exports = MapDataMgr;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0c1xcRGF0YU1hcFxcTWFwRGF0YU1nci5qcyJdLCJuYW1lcyI6WyJDYXJNYXBEZWNvZGVyIiwicmVxdWlyZSIsIkNvbXBhbnlNYXBEZWNvZGVyIiwiR29vZE1hcERlY29kZXIiLCJIb3VzZU1hcERlY29kZXIiLCJNYXRlTWFwRGVjb2RlciIsIlNraWxsTWFwRGVjb2RlciIsIkNhc2hNYXBEZWNvZGVyIiwiQWNoaWV2ZU1hcERlY29kZXIiLCJFdmVudE1hcERlY29kZXIiLCJJdGVtVHlwZSIsIk1hcERhdGFNZ3IiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImNhck1hcCIsImNvbXBhbnlNYXAiLCJnb29kc01hcCIsImhvdXNlTWFwIiwibWF0ZU1hcCIsInNraWxsTWFwIiwiY2FzaE1hcCIsImFjaGlldmVNYXAiLCJldmVudERhdGFNYXAiLCJkZWNvZGVBbGwiLCJjaGVja0luaXRNYXBTdWMiLCJpbml0TWFwcyIsImxvZyIsIk1nciIsIlBhcnNlIiwic2VsZiIsIkRlY29kZUpzb24iLCJyZXN1bHQiLCJkaXJlY3RvciIsIkdsb2JhbEV2ZW50IiwiZW1pdCIsIkV2ZW50IiwiUGFyc2VGaW5pc2giLCJnZXREYXRhQnlJdGVtVHlwZUFuZElkIiwiaXRlbVR5cGUiLCJpdGVtSWQiLCJkYXRhIiwiQ2FzaCIsImdldERhdGFCeUl0ZW1JZCIsIkdvb2RzIiwiU2tpbGwiLCJDb21wYW55IiwiSG91c2UiLCJDYXIiLCJNYXRlIiwiQWNoaWV2ZSIsIkV2ZW50RGF0YSIsImdldERhdGFMZW5ndGhCeUl0ZW1UeXBlIiwibGVuIiwiZ2V0SnNvbkxlbmd0aCIsImdldERhdGFMaXN0QnlJdGVtVHlwZSIsImRhdGFMaXN0IiwiZ2V0RGF0YUxpc3QiLCJnZXRTa2lsbExpc3RCeUlkIiwiSWQiLCJnZXRTa2lsbERhdGFCeVR3b0lkIiwic3ViSWQiLCJnZXRVcGdyYWRlQ29zdEJ5VHdvSWQiLCJ0b2x2IiwiZ2V0U2tpbGxBZGRCb251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dCI6WyJ2YXIgQ2FyTWFwRGVjb2RlciA9IHJlcXVpcmUoXCJDYXJNYXBEZWNvZGVyXCIpOyBcclxudmFyIENvbXBhbnlNYXBEZWNvZGVyID0gcmVxdWlyZShcIkNvbXBhbnlNYXBEZWNvZGVyXCIpO1xyXG52YXIgR29vZE1hcERlY29kZXIgPSByZXF1aXJlKFwiR29vZE1hcERlY29kZXJcIik7XHJcbnZhciBIb3VzZU1hcERlY29kZXIgPSByZXF1aXJlKFwiSG91c2VNYXBEZWNvZGVyXCIpO1xyXG52YXIgTWF0ZU1hcERlY29kZXIgPSByZXF1aXJlKFwiTWF0ZU1hcERlY29kZXJcIik7XHJcbnZhciBTa2lsbE1hcERlY29kZXIgPSByZXF1aXJlKFwiU2tpbGxNYXBEZWNvZGVyXCIpO1xyXG52YXIgQ2FzaE1hcERlY29kZXIgPSByZXF1aXJlKFwiQ2FzaE1hcERlY29kZXJcIik7XHJcbnZhciBBY2hpZXZlTWFwRGVjb2RlciA9IHJlcXVpcmUoXCJBY2hpZXZlTWFwRGVjb2RlclwiKTtcclxudmFyIEV2ZW50TWFwRGVjb2RlciA9IHJlcXVpcmUoXCJFdmVudE1hcERlY29kZXJcIik7XHJcblxyXG52YXIgSXRlbVR5cGUgPSByZXF1aXJlKFwiSXRlbVR5cGVcIik7XHJcblxyXG52YXIgTWFwRGF0YU1nciA9IGNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgY2FyTWFwOm51bGwsICBcclxuICAgICAgICBjb21wYW55TWFwOm51bGwsXHJcbiAgICAgICAgZ29vZHNNYXA6bnVsbCxcclxuICAgICAgICBob3VzZU1hcDpudWxsLFxyXG4gICAgICAgIG1hdGVNYXA6bnVsbCxcclxuICAgICAgICBza2lsbE1hcDpudWxsLFxyXG4gICAgICAgIGNhc2hNYXA6bnVsbCxcclxuICAgICAgICBhY2hpZXZlTWFwOm51bGwsXHJcbiAgICAgICAgZXZlbnREYXRhTWFwOm51bGwsXHJcblxyXG4gICAgICAgIGRlY29kZUFsbDowLFxyXG4gICAgfSxcclxuXHJcbiAgICBjaGVja0luaXRNYXBTdWM6ZnVuY3Rpb24oKXtcclxuICAgICAgICBpZih0aGlzLmRlY29kZUFsbCA9PSAxMDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL2NjLmxvZyhcIuaVsOaNruino+aekOWujOS6hlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yid5aeL5YyW6Kej5p6Q5pWw5o2u6KGoXHJcbiAgICBpbml0TWFwczpmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwi5byA5aeL6Kej5p6Q5pWw5o2u5LqGXCIpO1xyXG4gICAgICAgIGNjLk1nci5QYXJzZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZ29vZHNNYXAgPSBuZXcgR29vZE1hcERlY29kZXIoKTtcclxuICAgICAgICB0aGlzLmNhc2hNYXAgPSBuZXcgQ2FzaE1hcERlY29kZXIoKTtcclxuICAgICAgICB0aGlzLmhvdXNlTWFwID0gbmV3IEhvdXNlTWFwRGVjb2RlcigpO1xyXG4gICAgICAgIHRoaXMuY29tcGFueU1hcCA9IG5ldyBDb21wYW55TWFwRGVjb2RlcigpO1xyXG4gICAgICAgIHRoaXMuY2FyTWFwID0gbmV3IENhck1hcERlY29kZXIoKTtcclxuICAgICAgICB0aGlzLm1hdGVNYXAgPSBuZXcgTWF0ZU1hcERlY29kZXIoKTtcclxuICAgICAgICB0aGlzLnNraWxsTWFwID0gbmV3IFNraWxsTWFwRGVjb2RlcigpO1xyXG4gICAgICAgIHRoaXMuYWNoaWV2ZU1hcCA9IG5ldyBBY2hpZXZlTWFwRGVjb2RlcigpO1xyXG4gICAgICAgIHRoaXMuZXZlbnREYXRhTWFwID0gbmV3IEV2ZW50TWFwRGVjb2RlcigpO1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5kZWNvZGVBbGwgPSAwO1xyXG5cclxuICAgICAgICB0aGlzLmNhck1hcC5EZWNvZGVKc29uKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kZWNvZGVBbGwgKz0xMDtcclxuICAgICAgICAgICAgICAgIC8vY2MubG9nKFwiPT096Kej5p6Q5pWw5o2u5oiQ5YqfPT09IOaxvei9plwiICsgc2VsZi5kZWNvZGVBbGwpO1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZi5kZWNvZGVBbGwgPT0gMTAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLk1nci5QYXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuR2xvYmFsRXZlbnQuZW1pdChjYy5NZ3IuRXZlbnQuUGFyc2VGaW5pc2gsIHt9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbXBhbnlNYXAuRGVjb2RlSnNvbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICBpZihyZXN1bHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGVjb2RlQWxsICs9MTA7XHJcbiAgICAgICAgICAgICAgICAvL2NjLmxvZyhcIj09Peino+aekOaVsOaNruaIkOWKnz09PSDlhazlj7hcIiArIHNlbGYuZGVjb2RlQWxsKTtcclxuICAgICAgICAgICAgICAgIGlmKHNlbGYuZGVjb2RlQWxsID09IDEwMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5NZ3IuUGFyc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLkdsb2JhbEV2ZW50LmVtaXQoY2MuTWdyLkV2ZW50LlBhcnNlRmluaXNoLCB7fSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5ob3VzZU1hcC5EZWNvZGVKc29uKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kZWNvZGVBbGwgKz0xMDtcclxuICAgICAgICAgICAgICAgIC8vY2MubG9nKFwiPT096Kej5p6Q5pWw5o2u5oiQ5YqfPT09IOaIv+WtkFwiKyBzZWxmLmRlY29kZUFsbCk7XHJcbiAgICAgICAgICAgICAgICBpZihzZWxmLmRlY29kZUFsbCA9PSAxMDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuTWdyLlBhcnNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5HbG9iYWxFdmVudC5lbWl0KGNjLk1nci5FdmVudC5QYXJzZUZpbmlzaCwge30pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMubWF0ZU1hcC5EZWNvZGVKc29uKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kZWNvZGVBbGwgKz0xMDtcclxuICAgICAgICAgICAgICAgIC8vY2MubG9nKFwiPT096Kej5p6Q5pWw5o2u5oiQ5YqfPT09IOWwj+S8meS8tFwiICsgc2VsZi5kZWNvZGVBbGwpO1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZi5kZWNvZGVBbGwgPT0gMTAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLk1nci5QYXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuR2xvYmFsRXZlbnQuZW1pdChjYy5NZ3IuRXZlbnQuUGFyc2VGaW5pc2gsIHt9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNraWxsTWFwLkRlY29kZUpzb24oZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgaWYocmVzdWx0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmRlY29kZUFsbCArPTEwO1xyXG4gICAgICAgICAgICAgICAgLy9jYy5sb2coXCI9PT3op6PmnpDmlbDmja7miJDlip89PT0g5oqA6IO9XCIgKyBzZWxmLmRlY29kZUFsbCk7XHJcbiAgICAgICAgICAgICAgICBpZihzZWxmLmRlY29kZUFsbCA9PSAxMDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuTWdyLlBhcnNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5HbG9iYWxFdmVudC5lbWl0KGNjLk1nci5FdmVudC5QYXJzZUZpbmlzaCwge30pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FzaE1hcC5EZWNvZGVKc29uKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kZWNvZGVBbGwgKz0xMDtcclxuICAgICAgICAgICAgICAgIC8vY2MubG9nKFwiPT096Kej5p6Q5pWw5o2u5oiQ5YqfPT09IOeOsOmHkVwiICsgc2VsZi5kZWNvZGVBbGwpO1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZi5kZWNvZGVBbGwgPT0gMTAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLk1nci5QYXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuR2xvYmFsRXZlbnQuZW1pdChjYy5NZ3IuRXZlbnQuUGFyc2VGaW5pc2gsIHt9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFjaGlldmVNYXAuRGVjb2RlSnNvbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICBpZihyZXN1bHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGVjb2RlQWxsICs9MTA7XHJcbiAgICAgICAgICAgICAgICAvL2NjLmxvZyhcIj09Peino+aekOaVsOaNruaIkOWKnz09PSDmiJDlsLFcIiArIHNlbGYuZGVjb2RlQWxsKTtcclxuICAgICAgICAgICAgICAgIGlmKHNlbGYuZGVjb2RlQWxsID09IDEwMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5NZ3IuUGFyc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLkdsb2JhbEV2ZW50LmVtaXQoY2MuTWdyLkV2ZW50LlBhcnNlRmluaXNoLCB7fSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5ldmVudERhdGFNYXAuRGVjb2RlSnNvbihmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICBpZihyZXN1bHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGVjb2RlQWxsICs9MTA7XHJcbiAgICAgICAgICAgICAgICAvL2NjLmxvZyhcIj09Peino+aekOaVsOaNruaIkOWKnz09PSDkuovku7ZcIiArIHNlbGYuZGVjb2RlQWxsKTtcclxuICAgICAgICAgICAgICAgIGlmKHNlbGYuZGVjb2RlQWxsID09IDEwMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5NZ3IuUGFyc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLkdsb2JhbEV2ZW50LmVtaXQoY2MuTWdyLkV2ZW50LlBhcnNlRmluaXNoLCB7fSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5nb29kc01hcC5EZWNvZGVKc29uKGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kZWNvZGVBbGwgKz0yMDtcclxuICAgICAgICAgICAgICAgIC8vY2MubG9nKFwiPT096Kej5p6Q5pWw5o2u5oiQ5YqfPT09IOi0p+eJqVwiICsgc2VsZi5kZWNvZGVBbGwpO1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZi5kZWNvZGVBbGwgPT0gMTAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLk1nci5QYXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuR2xvYmFsRXZlbnQuZW1pdChjYy5NZ3IuRXZlbnQuUGFyc2VGaW5pc2gsIHt9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXREYXRhQnlJdGVtVHlwZUFuZElkOmZ1bmN0aW9uKGl0ZW1UeXBlLCBpdGVtSWQpe1xyXG4gICAgICAgIHZhciBkYXRhID0gbnVsbDtcclxuICAgICAgICAvL2NjLmxvZyhcIkl0ZW1UeXBlID0gXCIgKyBpdGVtVHlwZSArIFwiICBJZCA9IFwiICsgaXRlbUlkKTtcclxuICAgICAgICBzd2l0Y2goaXRlbVR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLkNhc2g6XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5jYXNoTWFwLmdldERhdGFCeUl0ZW1JZChpdGVtSWQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuR29vZHM6XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5nb29kc01hcC5nZXREYXRhQnlJdGVtSWQoaXRlbUlkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLlNraWxsOlxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuc2tpbGxNYXAuZ2V0RGF0YUJ5SXRlbUlkKGl0ZW1JZCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5Db21wYW55OlxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuY29tcGFueU1hcC5nZXREYXRhQnlJdGVtSWQoaXRlbUlkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLkhvdXNlOlxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuaG91c2VNYXAuZ2V0RGF0YUJ5SXRlbUlkKGl0ZW1JZCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5DYXI6XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5jYXJNYXAuZ2V0RGF0YUJ5SXRlbUlkKGl0ZW1JZCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5NYXRlOlxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMubWF0ZU1hcC5nZXREYXRhQnlJdGVtSWQoaXRlbUlkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLkFjaGlldmU6XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5hY2hpZXZlTWFwLmdldERhdGFCeUl0ZW1JZChpdGVtSWQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuRXZlbnREYXRhOlxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuZXZlbnREYXRhTWFwLmdldERhdGFCeUl0ZW1JZChpdGVtSWQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXREYXRhTGVuZ3RoQnlJdGVtVHlwZTpmdW5jdGlvbihpdGVtVHlwZSl7XHJcbiAgICAgICAgdmFyIGxlbiA9IDA7XHJcbiAgICAgICAgc3dpdGNoKGl0ZW1UeXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5DYXNoOlxyXG4gICAgICAgICAgICAgICAgbGVuID0gdGhpcy5jYXNoTWFwLmdldEpzb25MZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLkdvb2RzOlxyXG4gICAgICAgICAgICAgICAgbGVuID0gdGhpcy5nb29kc01hcC5nZXRKc29uTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5Ta2lsbDpcclxuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuc2tpbGxNYXAuZ2V0SnNvbkxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuQ29tcGFueTpcclxuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuY29tcGFueU1hcC5nZXRKc29uTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5Ib3VzZTpcclxuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuaG91c2VNYXAuZ2V0SnNvbkxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuQ2FyOlxyXG4gICAgICAgICAgICAgICAgbGVuID0gdGhpcy5jYXJNYXAuZ2V0SnNvbkxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuTWF0ZTpcclxuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMubWF0ZU1hcC5nZXRKc29uTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5BY2hpZXZlOlxyXG4gICAgICAgICAgICAgICAgbGVuID0gdGhpcy5hY2hpZXZlTWFwLmdldEpzb25MZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLkV2ZW50RGF0YTpcclxuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuZXZlbnREYXRhTWFwLmdldEpzb25MZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGVuO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXREYXRhTGlzdEJ5SXRlbVR5cGU6ZnVuY3Rpb24oaXRlbVR5cGUpe1xyXG4gICAgICAgIHZhciBkYXRhTGlzdCA9IG51bGw7XHJcbiAgICAgICAgLy9jYy5sb2coXCLmi7/mlbDmja4gPSBcIiArIGl0ZW1UeXBlKTtcclxuICAgICAgICBzd2l0Y2goaXRlbVR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLkNhc2g6XHJcbiAgICAgICAgICAgICAgICBkYXRhTGlzdCA9IHRoaXMuY2FzaE1hcC5nZXREYXRhTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuR29vZHM6XHJcbiAgICAgICAgICAgICAgICBkYXRhTGlzdCA9IHRoaXMuZ29vZHNNYXAuZ2V0RGF0YUxpc3QoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLlNraWxsOlxyXG4gICAgICAgICAgICAgICAgZGF0YUxpc3QgPSB0aGlzLnNraWxsTWFwLmdldERhdGFMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5Db21wYW55OlxyXG4gICAgICAgICAgICAgICAgZGF0YUxpc3QgPSB0aGlzLmNvbXBhbnlNYXAuZ2V0RGF0YUxpc3QoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLkhvdXNlOlxyXG4gICAgICAgICAgICAgICAgZGF0YUxpc3QgPSB0aGlzLmhvdXNlTWFwLmdldERhdGFMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5DYXI6XHJcbiAgICAgICAgICAgICAgICBkYXRhTGlzdCA9IHRoaXMuY2FyTWFwLmdldERhdGFMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBJdGVtVHlwZS5NYXRlOlxyXG4gICAgICAgICAgICAgICAgZGF0YUxpc3QgPSB0aGlzLm1hdGVNYXAuZ2V0RGF0YUxpc3QoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEl0ZW1UeXBlLkFjaGlldmU6XHJcbiAgICAgICAgICAgICAgICBkYXRhTGlzdCA9IHRoaXMuYWNoaWV2ZU1hcC5nZXREYXRhTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgSXRlbVR5cGUuRXZlbnREYXRhOlxyXG4gICAgICAgICAgICAgICAgZGF0YUxpc3QgPSB0aGlzLmV2ZW50RGF0YU1hcC5nZXREYXRhTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY2MubG9nKFwi5Y+W5b6X5pWw5o2uIFwiICsgZGF0YUxpc3QubGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gZGF0YUxpc3Q7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5LiT6Zeo57uZ5oqA6IO955qE5pWw5o2u6I635Y+W55SoXHJcbiAgICBnZXRTa2lsbExpc3RCeUlkOmZ1bmN0aW9uKElkKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNraWxsTWFwLmdldFNraWxsTGlzdEJ5SWQoSWQpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRTa2lsbERhdGFCeVR3b0lkOmZ1bmN0aW9uKElkLCBzdWJJZCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2tpbGxNYXAuZ2V0U2tpbGxEYXRhQnlUd29JZChJZCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFVwZ3JhZGVDb3N0QnlUd29JZDpmdW5jdGlvbihJZCwgc3ViSWQsIHRvbHYpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2tpbGxNYXAuZ2V0VXBncmFkZUNvc3RCeVR3b0lkKElkLCBzdWJJZCwgdG9sdik7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFNraWxsQWRkQm9udXNCeVR3b0lkQW5kTHY6ZnVuY3Rpb24gKElkLCBzdWJJZCwgdG9sdikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNraWxsTWFwLmdldFNraWxsQWRkQm9udXNCeVR3b0lkQW5kTHYoSWQsIHN1YklkLCB0b2x2KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5blr7nlupTmgKfliKvnmoTotK3kubDnianlk4FcclxuICAgIGdldERhdGFMaXN0QnlTZXg6ZnVuY3Rpb24oU2V4KXtcclxuICAgICAgICByZXR1cm4gdGhpcy5nb29kc01hcC5nZXREYXRhTGlzdEJ5U2V4KFNleCk7XHJcbiAgICB9LFxyXG4gICAgXHJcbn0pO1xyXG5tb2R1bGUuZXhwb3J0cyA9IE1hcERhdGFNZ3I7XHJcbiJdfQ==