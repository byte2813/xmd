
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Scripts/UI/JoyTipPanel.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'b0d71pcqI9Kmby0GAkLjo21', 'JoyTipPanel');
// Scripts/UI/JoyTipPanel.js

"use strict";

var MateUnLockType = require("MateUnLockType");
var JoyTipPanel = cc.Class({
  "extends": cc.Component,
  properties: {
    desLbl: cc.RichText,
    forWhat: "",
    cost: cc.Integer
  },
  ShowPanel: function ShowPanel(data) {
    if (data.forWhat == "ToDate") {
      this.desLbl.string = "<color=#696969>" + data.text + "\n花费</c>" + "<color=#e77122>" + cc.Mgr.global.DateInitCost + "</c>" + "<color=#696969>元</c>";
    } else if (data.forWhat == "ToBet") {
      this.desLbl.string = "<color=#696969>" + data.text + "\n投注</c>" + "<color=#e77122>" + cc.Mgr.global.BetInitCost + "</c>" + "<color=#696969>元</c>";
    }
    if (data.forWhat != null) this.forWhat = data.forWhat;else this.forWhat = "";
  },
  ConfirmClick: function ConfirmClick() {
    if (this.forWhat == "ToDate") {
      if (cc.Mgr.UserDataMgr.Cash < cc.Mgr.global.DateInitCost) {
        var param = {};
        var sd = Math.floor(Math.random() * 2);
        param.text = cc.Mgr.global.getTranslation("NoMoneyDate_" + sd);
        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);
        this.ClosePanel();
        return;
      }
      var seed = Math.random();
      cc.Mgr.UserDataMgr.Cash -= cc.Mgr.global.DateInitCost;
      cc.Mgr.global.DateInitCost *= 2;
      if (seed < cc.Mgr.UserDataMgr.DateSuccescRatio) {
        cc.Mgr.UserDataMgr.UnLockOneMate(MateUnLockType.ToDate, cc.Mgr.UserDataMgr.Sex);
      } else {
        var param = {};
        var sd = Math.floor(Math.random() * 2);
        param.text = cc.Mgr.global.getTranslation("DateFail_" + sd);
        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);
      }
      cc.director.GlobalEvent.emit(cc.Mgr.Event.RefreshCashAsset, {});
    } else if (this.forWhat == "ToBet") {
      if (cc.Mgr.UserDataMgr.Cash < cc.Mgr.global.BetInitCost) {
        var param = {};
        param.text = cc.Mgr.global.getTranslation("MoneyNotEnough");
        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);
        this.ClosePanel();
        return;
      }
      var seed = Math.random();
      cc.Mgr.UserDataMgr.Cash -= cc.Mgr.global.BetInitCost;
      if (seed < cc.Mgr.global.BetWinRation) {
        var param = {};
        cc.Mgr.UserDataMgr.Cash += cc.Mgr.global.BetInitCost * 3;
        var str = cc.Mgr.global.getTranslation("BetWin");
        param.text = str + cc.Mgr.global.BetInitCost * 3;
        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);
        //cc.Mgr.UserDataMgr.UnLockOneMate(MateUnLockType.ToDate, cc.Mgr.UserDataMgr.Sex);
      } else {
        var param = {};
        param.text = cc.Mgr.global.getTranslation("BetLose");
        cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);
      }
      cc.Mgr.global.BetInitCost *= 2;
      cc.director.GlobalEvent.emit(cc.Mgr.Event.RefreshCashAsset, {});
    }
    this.ClosePanel();
  },
  ClosePanel: function ClosePanel() {
    cc.Mgr.AudioMgr.playSFX("click");
    this.forWhat = "";
    this.node.active = false;
  }
});
module.exports = JoyTipPanel;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0c1xcVUlcXEpveVRpcFBhbmVsLmpzIl0sIm5hbWVzIjpbIk1hdGVVbkxvY2tUeXBlIiwicmVxdWlyZSIsIkpveVRpcFBhbmVsIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJkZXNMYmwiLCJSaWNoVGV4dCIsImZvcldoYXQiLCJjb3N0IiwiSW50ZWdlciIsIlNob3dQYW5lbCIsImRhdGEiLCJzdHJpbmciLCJ0ZXh0IiwiTWdyIiwiZ2xvYmFsIiwiRGF0ZUluaXRDb3N0IiwiQmV0SW5pdENvc3QiLCJDb25maXJtQ2xpY2siLCJVc2VyRGF0YU1nciIsIkNhc2giLCJwYXJhbSIsInNkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZ2V0VHJhbnNsYXRpb24iLCJkaXJlY3RvciIsIkdsb2JhbEV2ZW50IiwiZW1pdCIsIkV2ZW50IiwiT3BlbkNvbW1vblRpcCIsIkNsb3NlUGFuZWwiLCJzZWVkIiwiRGF0ZVN1Y2Nlc2NSYXRpbyIsIlVuTG9ja09uZU1hdGUiLCJUb0RhdGUiLCJTZXgiLCJSZWZyZXNoQ2FzaEFzc2V0IiwiQmV0V2luUmF0aW9uIiwic3RyIiwiQXVkaW9NZ3IiLCJwbGF5U0ZYIiwibm9kZSIsImFjdGl2ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsY0FBYyxHQUFHQyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDOUMsSUFBSUMsV0FBVyxHQUFHQyxFQUFFLENBQUNDLEtBQUssQ0FBQztFQUN2QixXQUFTRCxFQUFFLENBQUNFLFNBQVM7RUFFckJDLFVBQVUsRUFBRTtJQUNSQyxNQUFNLEVBQUNKLEVBQUUsQ0FBQ0ssUUFBUTtJQUNsQkMsT0FBTyxFQUFDLEVBQUU7SUFDVkMsSUFBSSxFQUFDUCxFQUFFLENBQUNRO0VBQ1osQ0FBQztFQUVEQyxTQUFTLEVBQUMsU0FBQUEsVUFBU0MsSUFBSSxFQUFDO0lBQ3BCLElBQUdBLElBQUks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cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgTWF0ZVVuTG9ja1R5cGUgPSByZXF1aXJlKFwiTWF0ZVVuTG9ja1R5cGVcIik7XHJcbnZhciBKb3lUaXBQYW5lbCA9IGNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgZGVzTGJsOmNjLlJpY2hUZXh0LFxyXG4gICAgICAgIGZvcldoYXQ6XCJcIixcclxuICAgICAgICBjb3N0OmNjLkludGVnZXIsXHJcbiAgICB9LFxyXG5cclxuICAgIFNob3dQYW5lbDpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICBpZihkYXRhLmZvcldoYXQgPT0gXCJUb0RhdGVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzTGJsLnN0cmluZyA9IFwiPGNvbG9yPSM2OTY5Njk+XCIrZGF0YS50ZXh0ICsgXCJcXG7oirHotLk8L2M+XCIgK1wiPGNvbG9yPSNlNzcxMjI+XCIrIGNjLk1nci5nbG9iYWwuRGF0ZUluaXRDb3N0K1wiPC9jPlwiICsgXCI8Y29sb3I9IzY5Njk2OT7lhYM8L2M+XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoZGF0YS5mb3JXaGF0ID09IFwiVG9CZXRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzTGJsLnN0cmluZyA9IFwiPGNvbG9yPSM2OTY5Njk+XCIrZGF0YS50ZXh0ICsgXCJcXG7mipXms6g8L2M+XCIgK1wiPGNvbG9yPSNlNzcxMjI+XCIrIGNjLk1nci5nbG9iYWwuQmV0SW5pdENvc3QgKyBcIjwvYz5cIiArIFwiPGNvbG9yPSM2OTY5Njk+5YWDPC9jPlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkYXRhLmZvcldoYXQgIT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy5mb3JXaGF0ID0gZGF0YS5mb3JXaGF0O1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5mb3JXaGF0ID0gXCJcIjtcclxuICAgIH0sXHJcblxyXG4gICAgQ29uZmlybUNsaWNrOmZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLmZvcldoYXQgPT0gXCJUb0RhdGVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGNjLk1nci5Vc2VyRGF0YU1nci5DYXNoIDwgY2MuTWdyLmdsb2JhbC5EYXRlSW5pdENvc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIHNkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjIpO1xyXG4gICAgICAgICAgICAgICAgcGFyYW0udGV4dCA9IGNjLk1nci5nbG9iYWwuZ2V0VHJhbnNsYXRpb24oXCJOb01vbmV5RGF0ZV9cIitzZCk7XHJcbiAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5HbG9iYWxFdmVudC5lbWl0KGNjLk1nci5FdmVudC5PcGVuQ29tbW9uVGlwLCBwYXJhbSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkNsb3NlUGFuZWwoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHNlZWQgPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgICAgICBjYy5NZ3IuVXNlckRhdGFNZ3IuQ2FzaCAtPSBjYy5NZ3IuZ2xvYmFsLkRhdGVJbml0Q29zdDtcclxuICAgICAgICAgICAgY2MuTWdyLmdsb2JhbC5EYXRlSW5pdENvc3QgKj0gMjtcclxuICAgICAgICAgICAgaWYoc2VlZCA8IGNjLk1nci5Vc2VyRGF0YU1nci5EYXRlU3VjY2VzY1JhdGlvKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYy5NZ3IuVXNlckRhdGFNZ3IuVW5Mb2NrT25lTWF0ZShNYXRlVW5Mb2NrVHlwZS5Ub0RhdGUsIGNjLk1nci5Vc2VyRGF0YU1nci5TZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgc2QgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMik7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS50ZXh0ID0gY2MuTWdyLmdsb2JhbC5nZXRUcmFuc2xhdGlvbihcIkRhdGVGYWlsX1wiK3NkKTtcclxuICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLkdsb2JhbEV2ZW50LmVtaXQoY2MuTWdyLkV2ZW50Lk9wZW5Db21tb25UaXAsIHBhcmFtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5HbG9iYWxFdmVudC5lbWl0KGNjLk1nci5FdmVudC5SZWZyZXNoQ2FzaEFzc2V0LCB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodGhpcy5mb3JXaGF0ID09IFwiVG9CZXRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGNjLk1nci5Vc2VyRGF0YU1nci5DYXNoIDwgY2MuTWdyLmdsb2JhbC5CZXRJbml0Q29zdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0ge307XHJcbiAgICAgICAgICAgICAgICBwYXJhbS50ZXh0ID0gY2MuTWdyLmdsb2JhbC5nZXRUcmFuc2xhdGlvbihcIk1vbmV5Tm90RW5vdWdoXCIpO1xyXG4gICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuR2xvYmFsRXZlbnQuZW1pdChjYy5NZ3IuRXZlbnQuT3BlbkNvbW1vblRpcCwgcGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5DbG9zZVBhbmVsKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzZWVkID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICAgICAgY2MuTWdyLlVzZXJEYXRhTWdyLkNhc2ggLT0gY2MuTWdyLmdsb2JhbC5CZXRJbml0Q29zdDtcclxuXHJcbiAgICAgICAgICAgIGlmKHNlZWQgPCBjYy5NZ3IuZ2xvYmFsLkJldFdpblJhdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0ge307XHJcbiAgICAgICAgICAgICAgICBjYy5NZ3IuVXNlckRhdGFNZ3IuQ2FzaCArPSAoY2MuTWdyLmdsb2JhbC5CZXRJbml0Q29zdCAqIDMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ciA9IGNjLk1nci5nbG9iYWwuZ2V0VHJhbnNsYXRpb24oXCJCZXRXaW5cIik7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS50ZXh0ID0gc3RyKyAoY2MuTWdyLmdsb2JhbC5CZXRJbml0Q29zdCAqIDMpO1xyXG4gICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuR2xvYmFsRXZlbnQuZW1pdChjYy5NZ3IuRXZlbnQuT3BlbkNvbW1vblRpcCwgcGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgLy9jYy5NZ3IuVXNlckRhdGFNZ3IuVW5Mb2NrT25lTWF0ZShNYXRlVW5Mb2NrVHlwZS5Ub0RhdGUsIGNjLk1nci5Vc2VyRGF0YU1nci5TZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0ge307XHJcbiAgICAgICAgICAgICAgICBwYXJhbS50ZXh0ID0gY2MuTWdyLmdsb2JhbC5nZXRUcmFuc2xhdGlvbihcIkJldExvc2VcIik7XHJcbiAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5HbG9iYWxFdmVudC5lbWl0KGNjLk1nci5FdmVudC5PcGVuQ29tbW9uVGlwLCBwYXJhbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2MuTWdyLmdsb2JhbC5CZXRJbml0Q29zdCAqPSAyO1xyXG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5HbG9iYWxFdmVudC5lbWl0KGNjLk1nci5FdmVudC5SZWZyZXNoQ2FzaEFzc2V0LCB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuQ2xvc2VQYW5lbCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBDbG9zZVBhbmVsOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MuTWdyLkF1ZGlvTWdyLnBsYXlTRlgoXCJjbGlja1wiKTtcclxuICAgICAgICB0aGlzLmZvcldoYXQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcbn0pO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEpveVRpcFBhbmVsO1xyXG4iXX0=