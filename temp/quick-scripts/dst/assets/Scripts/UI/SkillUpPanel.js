
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Scripts/UI/SkillUpPanel.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'abd95Irad5B94St4fgii0Dd', 'SkillUpPanel');
// Scripts/UI/SkillUpPanel.js

"use strict";

var SkillPanel = require("SkillPanel");
var ItemType = require("ItemType");
var SkillUpPanel = cc.Class({
  "extends": cc.Component,
  properties: {
    skillPanel: SkillPanel,
    titleLbl: cc.Label,
    Data: null,
    DesNull: cc.Label,
    DesNormal: cc.Node,
    des1: cc.Label,
    des2: cc.Label,
    costLbl: cc.Label
  },
  ShowPanel: function ShowPanel(data) {
    this.Data = null;
    this.Data = data;
    this.titleLbl.string = data.name;
    //cc.log("草泥马哦" + this.Data.level);
    if (data.Uplv == data.level) {
      this.DesNull.node.active = true;
      this.DesNormal.active = false;
      this.DesNull.string = cc.Mgr.global.getTranslation("Tf_" + data.desId) + "\n技能已升至满级";
    } else {
      this.DesNull.node.active = false;
      this.DesNormal.active = true;
      var bonuscur = cc.Mgr.MapDataMgr.getSkillAddBonusByTwoIdAndLv(data.Id, data.subId, data.level);
      var bonusnext = cc.Mgr.MapDataMgr.getSkillAddBonusByTwoIdAndLv(data.Id, data.subId, data.level + 1);
      this.des1.string = cc.Mgr.global.getTranslation("Tf_" + data.desId);
      this.costLbl.string = cc.Mgr.MapDataMgr.getUpgradeCostByTwoId(data.Id, data.subId, data.level + 1);
      if (data.level == 0) {
        this.des1.string = cc.Mgr.global.getTranslation("Tf_" + data.desId);
        if (bonusnext < 1) this.des2.string = bonusnext * 100 + "%";else this.des2.string = bonusnext;
      } else {
        if (bonusnext < 1) this.des2.string = bonuscur * 100 + "% - " + bonusnext * 100;else this.des2.string = bonuscur + "—" + bonusnext;
      }
    }
  },
  ClickUpGrade: function ClickUpGrade() {
    if (this.Data.Uplv == this.Data.level) {
      this.ClosePanel();
      return;
    }
    var re = cc.Mgr.UserDataMgr.UpGradeSkill(this.Data.Id, this.Data.subId, this.Data.level + 1);
    if (re == false) {
      cc.Mgr.AudioMgr.playSFX("click");
      this.DesNull.node.active = true;
      this.DesNormal.active = false;
      this.DesNull.string = "升级技能失败\n(技能点不足或者未点亮上一个天赋)";
    } else {
      this.skillPanel.RefreshPanel();
      //cc.Mgr.UserDataMgr.SkillBonusPoint -= cc.Mgr.MapDataMgr.getUpgradeCostByTwoId(this.Data.Id, this.Data.subId, (this.Data.level + 1));
      this.ClosePanel();
    }
  },
  ClosePanel: function ClosePanel() {
    cc.Mgr.AudioMgr.playSFX("click");
    this.node.active = false;
  }
});
module.exports = SkillUpPanel;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0c1xcVUlcXFNraWxsVXBQYW5lbC5qcyJdLCJuYW1lcyI6WyJTa2lsbFBhbmVsIiwicmVxdWlyZSIsIkl0ZW1UeXBlIiwiU2tpbGxVcFBhbmVsIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJza2lsbFBhbmVsIiwidGl0bGVMYmwiLCJMYWJlbCIsIkRhdGEiLCJEZXNOdWxsIiwiRGVzTm9ybWFsIiwiTm9kZSIsImRlczEiLCJkZXMyIiwiY29zdExibCIsIlNob3dQYW5lbCIsImRhdGEiLCJzdHJpbmciLCJuYW1lIiwiVXBsdiIsImxldmVsIiwibm9kZSIsImFjdGl2ZSIsIk1nciIsImdsb2JhbCIsImdldFRyYW5zbGF0aW9uIiwiZGVzSWQiLCJib251c2N1ciIsIk1hcERhdGFNZ3IiLCJnZXRTa2lsbEFkZEJvbnVzQnlUd29JZEFuZEx2IiwiSWQiLCJzdWJJZCIsImJvbnVzbmV4dCIsImdldFVwZ3JhZGVDb3N0QnlUd29JZCIsIkNsaWNrVXBHcmFkZSIsIkNsb3NlUGFuZWwiLCJyZSIsIlVzZXJEYXRhTWdyIiwiVXBHcmFkZVNraWxsIiwiQXVkaW9NZ3IiLCJwbGF5U0ZYIiwiUmVmcmVzaFBhbmVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDdEMsSUFBSUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ2xDLElBQUlFLFlBQVksR0FBR0MsRUFBRSxDQUFDQyxLQUFLLENBQUM7RUFDeEIsV0FBU0QsRUFBRSxDQUFDRSxTQUFTO0VBRXJCQyxVQUFVLEVBQUU7SUFDUkMsVUFBVSxFQUFDUixVQUFVO0lBQ3JCUyxRQUFRLEVBQUNMLEVBQUUsQ0FBQ00sS0FBSztJQUNqQkMsSUFBSSxFQUFDLElBQUk7SUFDVEMsT0FBTyxFQUFDUixFQUFFLENBQUNNLEtBQUs7SUFDaEJH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QUNuQixJQUFHLElBQUksQ0FBQzFCLElBQUksQ0FBQ1csSUFBSSxJQUFJLElBQUksQ0FBQ1gsSUFBSSxDQUFDWSxLQUFLLEVBQ3BDO01BQ0ksSUFBSSxDQUFDZSxVQUFVLEVBQUU7TUFDakI7SUFDSjtJQUVBLElBQUlDLEVBQUUsR0FBR25DLEVBQUUsQ0FBQ3NCLEdBQUcsQ0FBQ2MsV0FBVyxDQUFDQyxZQUFZLENBQUMsSUFBSSxDQUFDOUIsSUFBSSxDQUFDc0IsRUFBRSxFQUFFLElBQUksQ0FBQ3RCLElBQUksQ0FBQ3VCLEtBQUssRUFBRyxJQUFJLENBQUN2QixJQUFJLENBQUNZLEtBQUssR0FBRyxDQUFDLENBQUU7SUFDOUYsSUFBR2dCLEVBQUUsSUFBSSxLQUFLLEVBQ2Q7TUFDSW5DLEVBQUUsQ0FBQ3NCLEdBQUcsQ0FBQ2dCLFFBQVEsQ0FBQ0MsT0FBTyxDQUFDLE9BQU8sQ0FBQztNQUNoQyxJQUFJLENBQUMvQixPQUFPLENBQUNZLElBQUksQ0FBQ0MsTUFBTSxHQUFHLElBQUk7TUFDL0IsSUFBSSxDQUFDWixTQUFTLENBQUNZLE1BQU0sR0FBRyxLQUFLO01BQzdCLElBQUksQ0FBQ2IsT0FBTyxDQUFDUSxNQUFNLEdBQUcsMkJBQTJCO0lBQ3JELENBQUMsTUFFRDtNQUNJLElBQUksQ0FBQ1osVUFBVSxDQUFDb0MsWUFBWSxFQUFFO01BQzlCO01BQ0EsSUFBSSxDQUFDTixVQUFVLEVBQUU7SUFDckI7RUFFSixDQUFDO0VBRURBLFVBQVUsRUFBQyxTQUFBQSxXQUFBLEVBQVU7SUFDakJsQyxFQUFFLENBQUNzQixHQUFHLENBQUNnQixRQUFRLENBQUNDLE9BQU8sQ0FBQyxPQUFPLENBQUM7SUFDaEMsSUFBSSxDQUFDbkIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsS0FBSztFQUM1QjtBQUNKLENBQUMsQ0FBQztBQUNGb0IsTUFBTSxDQUFDQyxPQUFPLEdBQUczQyxZQUFZIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgU2tpbGxQYW5lbCA9IHJlcXVpcmUoXCJTa2lsbFBhbmVsXCIpO1xyXG52YXIgSXRlbVR5cGUgPSByZXF1aXJlKFwiSXRlbVR5cGVcIik7XHJcbnZhciBTa2lsbFVwUGFuZWwgPSBjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHNraWxsUGFuZWw6U2tpbGxQYW5lbCxcclxuICAgICAgICB0aXRsZUxibDpjYy5MYWJlbCxcclxuICAgICAgICBEYXRhOm51bGwsXHJcbiAgICAgICAgRGVzTnVsbDpjYy5MYWJlbCxcclxuICAgICAgICBEZXNOb3JtYWw6Y2MuTm9kZSxcclxuXHJcbiAgICAgICAgZGVzMTpjYy5MYWJlbCxcclxuICAgICAgICBkZXMyOmNjLkxhYmVsLFxyXG4gICAgICAgIGNvc3RMYmw6Y2MuTGFiZWwsXHJcbiAgICB9LFxyXG5cclxuICAgIFNob3dQYW5lbDpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB0aGlzLkRhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy50aXRsZUxibC5zdHJpbmcgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgLy9jYy5sb2coXCLojYnms6Xpqazlk6ZcIiArIHRoaXMuRGF0YS5sZXZlbCk7XHJcbiAgICAgICAgaWYoZGF0YS5VcGx2ID09IGRhdGEubGV2ZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkRlc051bGwubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLkRlc05vcm1hbC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5EZXNOdWxsLnN0cmluZyA9IGNjLk1nci5nbG9iYWwuZ2V0VHJhbnNsYXRpb24oXCJUZl9cIitkYXRhLmRlc0lkKSsgXCJcXG7mioDog73lt7LljYfoh7Pmu6HnuqdcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5EZXNOdWxsLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuRGVzTm9ybWFsLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciBib251c2N1ciA9IGNjLk1nci5NYXBEYXRhTWdyLmdldFNraWxsQWRkQm9udXNCeVR3b0lkQW5kTHYoZGF0YS5JZCwgZGF0YS5zdWJJZCwgZGF0YS5sZXZlbCk7XHJcbiAgICAgICAgICAgIHZhciBib251c25leHQgPSBjYy5NZ3IuTWFwRGF0YU1nci5nZXRTa2lsbEFkZEJvbnVzQnlUd29JZEFuZEx2KGRhdGEuSWQsIGRhdGEuc3ViSWQsIChkYXRhLmxldmVsKzEpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuZGVzMS5zdHJpbmcgPSBjYy5NZ3IuZ2xvYmFsLmdldFRyYW5zbGF0aW9uKFwiVGZfXCIrZGF0YS5kZXNJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29zdExibC5zdHJpbmcgPSBjYy5NZ3IuTWFwRGF0YU1nci5nZXRVcGdyYWRlQ29zdEJ5VHdvSWQoZGF0YS5JZCwgZGF0YS5zdWJJZCwgKGRhdGEubGV2ZWwgKyAxKSk7XHJcbiAgICAgICAgICAgIGlmKGRhdGEubGV2ZWwgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXMxLnN0cmluZyA9IGNjLk1nci5nbG9iYWwuZ2V0VHJhbnNsYXRpb24oXCJUZl9cIitkYXRhLmRlc0lkKTtcclxuICAgICAgICAgICAgICAgIGlmKGJvbnVzbmV4dCA8IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXMyLnN0cmluZyA9IChib251c25leHQgKiAxMDApICsgXCIlXCI7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXMyLnN0cmluZyA9IGJvbnVzbmV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGJvbnVzbmV4dCA8IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXMyLnN0cmluZyA9IChib251c2N1ciAqIDEwMCkgKyBcIiUgLSBcIiArIChib251c25leHQgKiAxMDApO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzMi5zdHJpbmcgPSBib251c2N1ciArXCLigJRcIitib251c25leHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIENsaWNrVXBHcmFkZTpmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHRoaXMuRGF0YS5VcGx2ID09IHRoaXMuRGF0YS5sZXZlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQ2xvc2VQYW5lbCgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmUgPSBjYy5NZ3IuVXNlckRhdGFNZ3IuVXBHcmFkZVNraWxsKHRoaXMuRGF0YS5JZCwgdGhpcy5EYXRhLnN1YklkLCAodGhpcy5EYXRhLmxldmVsICsgMSkpO1xyXG4gICAgICAgIGlmKHJlID09IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2MuTWdyLkF1ZGlvTWdyLnBsYXlTRlgoXCJjbGlja1wiKTtcclxuICAgICAgICAgICAgdGhpcy5EZXNOdWxsLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5EZXNOb3JtYWwuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuRGVzTnVsbC5zdHJpbmcgPSBcIuWNh+e6p+aKgOiDveWksei0pVxcbijmioDog73ngrnkuI3otrPmiJbogIXmnKrngrnkuq7kuIrkuIDkuKrlpKnotYspXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpbGxQYW5lbC5SZWZyZXNoUGFuZWwoKTtcclxuICAgICAgICAgICAgLy9jYy5NZ3IuVXNlckRhdGFNZ3IuU2tpbGxCb251c1BvaW50IC09IGNjLk1nci5NYXBEYXRhTWdyLmdldFVwZ3JhZGVDb3N0QnlUd29JZCh0aGlzLkRhdGEuSWQsIHRoaXMuRGF0YS5zdWJJZCwgKHRoaXMuRGF0YS5sZXZlbCArIDEpKTtcclxuICAgICAgICAgICAgdGhpcy5DbG9zZVBhbmVsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgQ2xvc2VQYW5lbDpmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLk1nci5BdWRpb01nci5wbGF5U0ZYKFwiY2xpY2tcIik7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxufSk7XHJcbm1vZHVsZS5leHBvcnRzID0gU2tpbGxVcFBhbmVsO1xyXG4iXX0=