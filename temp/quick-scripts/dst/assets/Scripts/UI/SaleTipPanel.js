
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Scripts/UI/SaleTipPanel.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '3cfd5BQoA9DJq4CJlf4uaUk', 'SaleTipPanel');
// Scripts/UI/SaleTipPanel.js

"use strict";

var Event = require("Event");
var AdsParam = require("AdsParam");
var TempBonus = require("TempBonus");
var SaleTipPanel = cc.Class({
  "extends": cc.Component,
  properties: {
    IconSp: cc.Sprite,
    nameSp: cc.Sprite,
    Atlas: cc.SpriteAtlas,
    GoodsName: cc.Label,
    SaleNumLbl: cc.Label,
    EarnLbl: cc.Label,
    CBLbl: cc.Label,
    Slider: cc.Slider,
    InPutBox: cc.EditBox,
    Progress: cc.ProgressBar,
    SaleNum: 0,
    Data: null,
    needDouble: 1 //是否收益翻倍
  },

  ShowPanel: function ShowPanel(data) {
    this.needDouble = 1;
    this.Data = null;
    this.SaleNum = data.ownNum;
    this.IconSp.spriteFrame = this.Atlas.getSpriteFrame(data.icon);
    this.nameSp.spriteFrame = this.Atlas.getSpriteFrame(data.name);
    var marketPrice = cc.Mgr.UserDataMgr.getGoodsDataById(data.Id).marketPrice;
    var money = data.ownNum * (marketPrice - data.buyPrice);
    var chengben = data.ownNum * marketPrice;
    if (cc.Mgr.global.TempAdsAssetBonus == TempBonus.AssetBonus) {
      if (money > 0) money = Math.floor(money * 1.2); //有之前看过广告
    }

    this.EarnLbl.string = cc.Mgr.global.FormatNum(money);
    this.CBLbl.string = cc.Mgr.global.FormatNum(chengben);
    this.SaleNumLbl.string = data.ownNum;
    this.InPutBox.string = data.ownNum;
    this.Slider.progress = 1;
    this.Progress.progress = 1;
    this.Data = data;
  },
  OnSliderChange: function OnSliderChange() {
    this.SaleNum = Math.floor(this.Slider.progress * this.Data.ownNum);
    this.Progress.progress = this.Slider.progress;
    var marketPrice = cc.Mgr.UserDataMgr.getGoodsDataById(this.Data.Id).marketPrice;
    var money = this.SaleNum * (marketPrice - this.Data.buyPrice);
    var chengben = this.SaleNum * marketPrice;
    this.CBLbl.string = cc.Mgr.global.FormatNum(chengben);
    this.InPutBox.string = this.SaleNum;
    if (cc.Mgr.global.TempAdsAssetBonus == TempBonus.AssetBonus) {
      if (money > 0) money = Math.floor(money * 1.2); //有之前看过广告
    }

    this.EarnLbl.string = cc.Mgr.global.FormatNum(money);
    this.SaleNumLbl.string = this.SaleNum;
  },
  OnInputBoxEnd: function OnInputBoxEnd() {
    if (this.InPutBox.string != "") {
      if (Number(this.InPutBox.string) != null) {
        if (Number(this.InPutBox.string) > this.Data.ownNum) {
          this.InPutBox.string = this.Data.ownNum;
          this.SaleNum = this.Data.ownNum;
          this.Progress.progress = 1;
          this.Slider.progress = 1;
        } else {
          this.SaleNum = Number(this.InPutBox.string);
          this.Slider.progress = this.SaleNum / this.Data.ownNum;
          this.Progress.progress = this.Slider.progress;
        }
      }
    } else {
      this.InPutBox.string = "0";
      this.SaleNum = 0;
      this.Progress.progress = 0;
      this.Slider.progress = 0;
    }
    var marketPrice = cc.Mgr.UserDataMgr.getGoodsDataById(this.Data.Id).marketPrice;
    var money = this.SaleNum * (marketPrice - this.Data.buyPrice);
    var chengben = this.SaleNum * marketPrice;
    this.CBLbl.string = cc.Mgr.global.FormatNum(chengben);
    if (cc.Mgr.global.TempAdsAssetBonus == TempBonus.AssetBonus) {
      if (money > 0) money = Math.floor(money * 1.2); //有之前看过广告
    }

    this.EarnLbl.string = cc.Mgr.global.FormatNum(money);
  },
  showRewardVideo: function showRewardVideo() {
    this.js2android('show_reward_video', '1');
  },
  ///激励视频播放完成回调方法 continue_game
  /// Native.android2js("continue_game", ()=>{
  ///     //激励视频播放完成，原生端回调
  /// });
  js2android: function js2android(name, data) {
    console.log("name:" + name + "-data:" + data);
    if (window.injectedObject && window.injectedObject.setJsContent) {
      window.injectedObject.setJsContent(name, data);
    }
  },
  ClickSaleBtn: function ClickSaleBtn() {
    if (this.SaleNum <= 0) {
      cc.Mgr.AudioMgr.playSFX("click");
      return;
    }
    cc.Mgr.UserDataMgr.WareHouseCapcity += this.SaleNum;
    var marketPrice = cc.Mgr.UserDataMgr.getGoodsDataById(this.Data.Id).marketPrice;
    var getMoney = marketPrice * this.SaleNum;
    if (cc.Mgr.global.TempAdsAssetBonus == TempBonus.AssetBonus) {
      var money = this.SaleNum * (marketPrice - this.Data.buyPrice);
      if (money > 0) getMoney = Math.floor(getMoney * 1.2) * this.needDouble;
      //cc.Mgr.global.TempAdsBonus = TempBonus.NULL;
    }

    cc.Mgr.UserDataMgr.Cash += getMoney;
    var param = {};
    param.Num = this.SaleNum;
    param.price = this.Data.buyPrice;
    param.Id = this.Data.Id;
    var data = cc.Mgr.UserDataMgr.SaleGoods(param);
    if (marketPrice > this.Data.buyPrice) cc.Mgr.UserDataMgr.Reputation += 2;
    //通知刷新现金
    cc.director.GlobalEvent.emit(cc.Mgr.Event.SaleSuccess, data);
    this.ClosePanel();
  },
  ClosePanel: function ClosePanel() {
    cc.Mgr.AudioMgr.playSFX("click");
    this.node.active = false;
  },
  DoubleGetByVedio: function DoubleGetByVedio() {
    if (this.SaleNum <= 0) {
      cc.Mgr.AudioMgr.playSFX("click");
      return;
    }
    var self = this;
    self.showRewardVideo();
    cc.Mgr.AdsMgr.ShowVideoAds(AdsParam.PointC, function (out) {
      if (out == 0) {
        self.needDouble = 2;
        self.ClickSaleBtn();
      }
    });
  }
});
module.exports = SaleTipPanel;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0c1xcVUlcXFNhbGVUaXBQYW5lbC5qcyJdLCJuYW1lcyI6WyJFdmVudCIsInJlcXVpcmUiLCJBZHNQYXJhbSIsIlRlbXBCb251cyIsIlNhbGVUaXBQYW5lbCIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiSWNvblNwIiwiU3ByaXRlIiwibmFtZVNwIiwiQXRsYXMiLCJTcHJpdGVBdGxhcyIsIkdvb2RzTmFtZSIsIkxhYmVsIiwiU2FsZU51bUxibCIsIkVhcm5MYmwiLCJDQkxibCIsIlNsaWRlciIsIkluUHV0Qm94IiwiRWRpdEJveCIsIlByb2dyZXNzIiwiUHJvZ3Jlc3NCYXIiLCJTYWxlTnVtIiwiRGF0YSIsIm5lZWREb3VibGUiLCJTaG93UGFuZWwiLCJkYXRhIiwib3duTnVtIiwic3ByaXRlRnJhbWUiLCJnZXRTcHJpdGVGcmFtZSIsImljb24iLCJuYW1lIiwibWFya2V0UHJpY2UiLCJNZ3IiLCJVc2VyRGF0YU1nciIsImdldEdvb2RzRGF0YUJ5SWQiLCJJZCIsIm1vbmV5IiwiYnV5UHJpY2UiLCJjaGVuZ2JlbiIsImdsb2JhbCIsIlRlbXBBZHNBc3NldEJvbnVzIiwiQXNzZXRCb251cyIsIk1hdGgiLCJmbG9vciIsInN0cmluZyIsIkZvcm1hdE51bSIsInByb2dyZXNzIiwiT25TbGlkZXJDaGFuZ2UiLCJPbklucHV0Qm94RW5kIiwiTnVtYmVyIiwic2hvd1Jld2FyZFZpZGVvIiwianMyYW5kcm9pZCIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJpbmplY3RlZE9iamVjdCIsInNldEpzQ29udGVudCIsIkNsaWNrU2FsZUJ0biIsIkF1ZGlvTWdyIiwicGxheVNGWCIsIldhcmVIb3VzZUNhcGNpdHkiLCJnZXRNb25leSIsIkNhc2giLCJwYXJhbSIsIk51bSIsInByaWNlIiwiU2FsZUdvb2RzIiwiUmVwdXRhdGlvbiIsImRpcmVjdG9yIiwiR2xvYmFsRXZlbnQiLCJlbWl0IiwiU2FsZVN1Y2Nlc3MiLCJDbG9zZVBhbmVsIiwibm9kZSIsImFjdGl2ZSIsIkRvdWJsZUdldEJ5VmVkaW8iLCJzZWxmIiwiQWRzTWdyIiwiU2hvd1ZpZGVvQWRzIiwiUG9pbnRDIiwib3V0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDNUIsSUFBSUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ2xDLElBQUlFLFNBQVMsR0FBR0YsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNwQyxJQUFJRyxZQUFZLEdBQUdDLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDO0VBQ3hCLFdBQVNELEVBQUUsQ0FBQ0UsU0FBUztFQUVyQkMsVUFBVSxFQUFFO0lBQ1JDLE1BQU0sRUFBQ0osRUFBRSxDQUFDSyxNQUFNO0lBQ2hCQyxNQUFNLEVBQUNOLEVBQUUsQ0FBQ0ssTUFBTTtJQUNoQkUsS0FBSyxFQUFDUCxFQUFFLENBQUNRLFdBQVc7SUFDcEJDLFNBQVMsRUFBQ1QsRUFBRSxDQUFDVSxLQUFLO0lBQ2xCQyxVQUFVLEVBQUNYLEVBQUUsQ0FBQ1UsS0FBSztJQUNuQkUsT0FBTyxFQUFDWixFQUFFLENBQUNVLEtBQUs7SUFDaEJHLEtBQUssRUFBQ2IsRUFBRSxDQUFDVSxLQUFLO0lBQ2RJLE1BQU0sRUFBQ2QsRUFBRSxDQUFDYyxNQUFNO0lBQ2hCQyxRQUFRLEVBQUNmLEVBQUUsQ0FBQ2dCLE9BQU87SUFDbkJDLFFBQVEsRUFBQ2pCLEVBQUUsQ0FBQ2tCLFdBQVc7SUFDdkJDLE9BQU8sRUFBQyxDQUFDO0lBQ1RDLElBQUksRUFBQyxJQUFJO0lBRVRDLFVBQVUsRUFBQyxDQUFDLENBQUM7RUFDakIsQ0FBQzs7RUFFREMsU0FBUyxFQUFDLFNBQUFBLFVBQVVDLElBQUksRUFBRTtJQUN0QixJQUFJLENBQUNGLFVBQVUsR0FBRyxDQUFDO0lBQ25CLElBQUksQ0FBQ0QsSUFBSSxHQUFHLElBQUk7SUFDaEIsSUFBSSxDQUFDRCxP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LElBQUcsSUFBSSxDQUFDdEQsT0FBTyxJQUFJLENBQUMsRUFDcEI7TUFDSW5CLEVBQUUsQ0FBQzhCLEdBQUcsQ0FBQzBCLFFBQVEsQ0FBQ0MsT0FBTyxDQUFDLE9BQU8sQ0FBQztNQUNoQztJQUNKO0lBQ0EsSUFBSWlCLElBQUksR0FBRyxJQUFJO0lBQ2ZBLElBQUksQ0FBQzFCLGVBQWUsRUFBRTtJQUN0QmhELEVBQUUsQ0FBQzhCLEdBQUcsQ0FBQzZDLE1BQU0sQ0FBQ0MsWUFBWSxDQUFDL0UsUUFBUSxDQUFDZ0YsTUFBTSxFQUFFLFVBQVNDLEdBQUcsRUFBQztNQUVyRCxJQUFHQSxHQUFHLElBQUksQ0FBQyxFQUNYO1FBQ0lKLElBQUksQ0FBQ3JELFVBQVUsR0FBRyxDQUFDO1FBQ25CcUQsSUFBSSxDQUFDbkIsWUFBWSxFQUFFO01BQ3ZCO0lBQ0osQ0FBQyxDQUFDO0VBQ047QUFFSixDQUFDLENBQUM7QUFDRndCLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHakYsWUFBWSIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEV2ZW50ID0gcmVxdWlyZShcIkV2ZW50XCIpO1xyXG52YXIgQWRzUGFyYW0gPSByZXF1aXJlKFwiQWRzUGFyYW1cIik7XHJcbnZhciBUZW1wQm9udXMgPSByZXF1aXJlKFwiVGVtcEJvbnVzXCIpO1xyXG52YXIgU2FsZVRpcFBhbmVsID0gY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBJY29uU3A6Y2MuU3ByaXRlLFxyXG4gICAgICAgIG5hbWVTcDpjYy5TcHJpdGUsXHJcbiAgICAgICAgQXRsYXM6Y2MuU3ByaXRlQXRsYXMsXHJcbiAgICAgICAgR29vZHNOYW1lOmNjLkxhYmVsLFxyXG4gICAgICAgIFNhbGVOdW1MYmw6Y2MuTGFiZWwsXHJcbiAgICAgICAgRWFybkxibDpjYy5MYWJlbCxcclxuICAgICAgICBDQkxibDpjYy5MYWJlbCxcclxuICAgICAgICBTbGlkZXI6Y2MuU2xpZGVyLFxyXG4gICAgICAgIEluUHV0Qm94OmNjLkVkaXRCb3gsXHJcbiAgICAgICAgUHJvZ3Jlc3M6Y2MuUHJvZ3Jlc3NCYXIsXHJcbiAgICAgICAgU2FsZU51bTowLFxyXG4gICAgICAgIERhdGE6bnVsbCxcclxuXHJcbiAgICAgICAgbmVlZERvdWJsZToxLC8v5piv5ZCm5pS255uK57+75YCNXHJcbiAgICB9LFxyXG5cclxuICAgIFNob3dQYW5lbDpmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMubmVlZERvdWJsZSA9IDE7XHJcbiAgICAgICAgdGhpcy5EYXRhID0gbnVsbDtcclxuICAgICAgICB0aGlzLlNhbGVOdW0gPSBkYXRhLm93bk51bTtcclxuICAgICAgICB0aGlzLkljb25TcC5zcHJpdGVGcmFtZSA9IHRoaXMuQXRsYXMuZ2V0U3ByaXRlRnJhbWUoZGF0YS5pY29uKTtcclxuICAgICAgICB0aGlzLm5hbWVTcC5zcHJpdGVGcmFtZSA9IHRoaXMuQXRsYXMuZ2V0U3ByaXRlRnJhbWUoZGF0YS5uYW1lKTtcclxuICAgICAgICB2YXIgbWFya2V0UHJpY2UgPSBjYy5NZ3IuVXNlckRhdGFNZ3IuZ2V0R29vZHNEYXRhQnlJZChkYXRhLklkKS5tYXJrZXRQcmljZTtcclxuICAgICAgICB2YXIgbW9uZXkgPSBkYXRhLm93bk51bSAqIChtYXJrZXRQcmljZSAtIGRhdGEuYnV5UHJpY2UpO1xyXG4gICAgICAgIHZhciBjaGVuZ2JlbiA9IGRhdGEub3duTnVtICogbWFya2V0UHJpY2U7XHJcbiAgICAgICAgaWYoY2MuTWdyLmdsb2JhbC5UZW1wQWRzQXNzZXRCb251cyA9PSBUZW1wQm9udXMuQXNzZXRCb251cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKG1vbmV5ID4gMClcclxuICAgICAgICAgICAgICAgIG1vbmV5ID0gTWF0aC5mbG9vcihtb25leSAqIDEuMik7IC8v5pyJ5LmL5YmN55yL6L+H5bm/5ZGKXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuRWFybkxibC5zdHJpbmcgPSBjYy5NZ3IuZ2xvYmFsLkZvcm1hdE51bShtb25leSk7XHJcbiAgICAgICAgdGhpcy5DQkxibC5zdHJpbmcgPSBjYy5NZ3IuZ2xvYmFsLkZvcm1hdE51bShjaGVuZ2Jlbik7XHJcbiAgICAgICAgdGhpcy5TYWxlTnVtTGJsLnN0cmluZyA9IGRhdGEub3duTnVtO1xyXG4gICAgICAgIHRoaXMuSW5QdXRCb3guc3RyaW5nID0gZGF0YS5vd25OdW07XHJcbiAgICAgICAgdGhpcy5TbGlkZXIucHJvZ3Jlc3MgPSAxO1xyXG4gICAgICAgIHRoaXMuUHJvZ3Jlc3MucHJvZ3Jlc3MgPSAxO1xyXG4gICAgICAgIHRoaXMuRGF0YSA9IGRhdGE7XHJcbiAgICB9LFxyXG5cclxuICAgIE9uU2xpZGVyQ2hhbmdlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5TYWxlTnVtID0gTWF0aC5mbG9vcih0aGlzLlNsaWRlci5wcm9ncmVzcyAqIHRoaXMuRGF0YS5vd25OdW0pO1xyXG4gICAgICAgIHRoaXMuUHJvZ3Jlc3MucHJvZ3Jlc3MgPSB0aGlzLlNsaWRlci5wcm9ncmVzcztcclxuICAgICAgICB2YXIgbWFya2V0UHJpY2UgPSBjYy5NZ3IuVXNlckRhdGFNZ3IuZ2V0R29vZHNEYXRhQnlJZCh0aGlzLkRhdGEuSWQpLm1hcmtldFByaWNlO1xyXG4gICAgICAgIHZhciBtb25leSA9IHRoaXMuU2FsZU51bSAqIChtYXJrZXRQcmljZSAtIHRoaXMuRGF0YS5idXlQcmljZSk7XHJcblxyXG4gICAgICAgIHZhciBjaGVuZ2JlbiA9IHRoaXMuU2FsZU51bSAqIG1hcmtldFByaWNlO1xyXG4gICAgICAgIHRoaXMuQ0JMYmwuc3RyaW5nID0gY2MuTWdyLmdsb2JhbC5Gb3JtYXROdW0oY2hlbmdiZW4pO1xyXG5cclxuICAgICAgICB0aGlzLkluUHV0Qm94LnN0cmluZyA9IHRoaXMuU2FsZU51bTtcclxuICAgICAgICBpZihjYy5NZ3IuZ2xvYmFsLlRlbXBBZHNBc3NldEJvbnVzID09IFRlbXBCb251cy5Bc3NldEJvbnVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYobW9uZXkgPiAwKVxyXG4gICAgICAgICAgICAgICAgbW9uZXkgPSBNYXRoLmZsb29yKG1vbmV5ICoxLjIpOyAvL+acieS5i+WJjeeci+i/h+W5v+WRilxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLkVhcm5MYmwuc3RyaW5nID0gY2MuTWdyLmdsb2JhbC5Gb3JtYXROdW0obW9uZXkpO1xyXG4gICAgICAgIHRoaXMuU2FsZU51bUxibC5zdHJpbmcgPSB0aGlzLlNhbGVOdW07XHJcbiAgICB9LFxyXG5cclxuICAgIE9uSW5wdXRCb3hFbmQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICBpZih0aGlzLkluUHV0Qm94LnN0cmluZyAhPSBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoTnVtYmVyKHRoaXMuSW5QdXRCb3guc3RyaW5nKSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihOdW1iZXIodGhpcy5JblB1dEJveC5zdHJpbmcpID4gdGhpcy5EYXRhLm93bk51bSkgXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5JblB1dEJveC5zdHJpbmcgPSB0aGlzLkRhdGEub3duTnVtO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuU2FsZU51bSA9IHRoaXMuRGF0YS5vd25OdW07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Qcm9ncmVzcy5wcm9ncmVzcyA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5TbGlkZXIucHJvZ3Jlc3MgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuU2FsZU51bSA9IE51bWJlcih0aGlzLkluUHV0Qm94LnN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5TbGlkZXIucHJvZ3Jlc3MgPSAgdGhpcy5TYWxlTnVtIC8gdGhpcy5EYXRhLm93bk51bTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLlByb2dyZXNzLnByb2dyZXNzID0gdGhpcy5TbGlkZXIucHJvZ3Jlc3M7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5JblB1dEJveC5zdHJpbmcgPSBcIjBcIjtcclxuICAgICAgICAgICAgdGhpcy5TYWxlTnVtID0gMDtcclxuICAgICAgICAgICAgdGhpcy5Qcm9ncmVzcy5wcm9ncmVzcyA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuU2xpZGVyLnByb2dyZXNzID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1hcmtldFByaWNlID0gY2MuTWdyLlVzZXJEYXRhTWdyLmdldEdvb2RzRGF0YUJ5SWQodGhpcy5EYXRhLklkKS5tYXJrZXRQcmljZTtcclxuICAgICAgICB2YXIgbW9uZXkgPSB0aGlzLlNhbGVOdW0gKiAobWFya2V0UHJpY2UgLSB0aGlzLkRhdGEuYnV5UHJpY2UpO1xyXG5cclxuICAgICAgICB2YXIgY2hlbmdiZW4gPSB0aGlzLlNhbGVOdW0gKiBtYXJrZXRQcmljZTtcclxuICAgICAgICB0aGlzLkNCTGJsLnN0cmluZyA9IGNjLk1nci5nbG9iYWwuRm9ybWF0TnVtKGNoZW5nYmVuKTtcclxuXHJcbiAgICAgICAgaWYoY2MuTWdyLmdsb2JhbC5UZW1wQWRzQXNzZXRCb251cyA9PSBUZW1wQm9udXMuQXNzZXRCb251cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKG1vbmV5ID4gMClcclxuICAgICAgICAgICAgICAgIG1vbmV5ID0gTWF0aC5mbG9vcihtb25leSAqMS4yKTsgLy/mnInkuYvliY3nnIvov4flub/lkYpcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5FYXJuTGJsLnN0cmluZyA9IGNjLk1nci5nbG9iYWwuRm9ybWF0TnVtKG1vbmV5KTtcclxuICAgIH0sXHJcbiAgICBzaG93UmV3YXJkVmlkZW8oKSB7XHJcbiAgICAgICAgdGhpcy5qczJhbmRyb2lkKCdzaG93X3Jld2FyZF92aWRlbycsICcxJylcclxuICAgIH0sXHJcblxyXG4gICAgLy8v5r+A5Yqx6KeG6aKR5pKt5pS+5a6M5oiQ5Zue6LCD5pa55rOVIGNvbnRpbnVlX2dhbWVcclxuICAgIC8vLyBOYXRpdmUuYW5kcm9pZDJqcyhcImNvbnRpbnVlX2dhbWVcIiwgKCk9PntcclxuICAgIC8vLyAgICAgLy/mv4DlirHop4bpopHmkq3mlL7lrozmiJDvvIzljp/nlJ/nq6/lm57osINcclxuICAgIC8vLyB9KTtcclxuICAgIGpzMmFuZHJvaWQobmFtZSwgZGF0YSl7XHJcbiAgICAgICAgY29uc29sZS5sb2coYG5hbWU6JHtuYW1lfS1kYXRhOiR7ZGF0YX1gKTtcclxuICAgICAgICBpZih3aW5kb3cuaW5qZWN0ZWRPYmplY3QgJiYgd2luZG93LmluamVjdGVkT2JqZWN0LnNldEpzQ29udGVudCl7XHJcbiAgICAgICAgICAgIHdpbmRvdy5pbmplY3RlZE9iamVjdC5zZXRKc0NvbnRlbnQobmFtZSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIENsaWNrU2FsZUJ0bjpmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHRoaXMuU2FsZU51bSA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2MuTWdyLkF1ZGlvTWdyLnBsYXlTRlgoXCJjbGlja1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjYy5NZ3IuVXNlckRhdGFNZ3IuV2FyZUhvdXNlQ2FwY2l0eSArPSB0aGlzLlNhbGVOdW07XHJcblxyXG4gICAgICAgIHZhciBtYXJrZXRQcmljZSA9IGNjLk1nci5Vc2VyRGF0YU1nci5nZXRHb29kc0RhdGFCeUlkKHRoaXMuRGF0YS5JZCkubWFya2V0UHJpY2U7XHJcbiAgICAgICAgdmFyIGdldE1vbmV5ID0gKG1hcmtldFByaWNlICogdGhpcy5TYWxlTnVtKTtcclxuICAgICAgICBpZihjYy5NZ3IuZ2xvYmFsLlRlbXBBZHNBc3NldEJvbnVzID09IFRlbXBCb251cy5Bc3NldEJvbnVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1vbmV5ID0gdGhpcy5TYWxlTnVtICogKG1hcmtldFByaWNlIC0gdGhpcy5EYXRhLmJ1eVByaWNlKTtcclxuICAgICAgICAgICAgaWYobW9uZXkgPiAwKVxyXG4gICAgICAgICAgICAgICAgZ2V0TW9uZXkgPSBNYXRoLmZsb29yKGdldE1vbmV5ICogMS4yKSAqIHRoaXMubmVlZERvdWJsZTtcclxuICAgICAgICAgICAgLy9jYy5NZ3IuZ2xvYmFsLlRlbXBBZHNCb251cyA9IFRlbXBCb251cy5OVUxMO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYy5NZ3IuVXNlckRhdGFNZ3IuQ2FzaCArPSBnZXRNb25leTtcclxuICAgICAgICB2YXIgcGFyYW0gPSB7fTtcclxuICAgICAgICBwYXJhbS5OdW0gPSB0aGlzLlNhbGVOdW07XHJcbiAgICAgICAgcGFyYW0ucHJpY2UgPSB0aGlzLkRhdGEuYnV5UHJpY2U7XHJcbiAgICAgICAgcGFyYW0uSWQgPSB0aGlzLkRhdGEuSWQ7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBjYy5NZ3IuVXNlckRhdGFNZ3IuU2FsZUdvb2RzKHBhcmFtKTtcclxuICAgICAgICBpZihtYXJrZXRQcmljZSA+IHRoaXMuRGF0YS5idXlQcmljZSlcclxuICAgICAgICAgICAgY2MuTWdyLlVzZXJEYXRhTWdyLlJlcHV0YXRpb24gKz0gMjtcclxuICAgICAgICAvL+mAmuefpeWIt+aWsOeOsOmHkVxyXG4gICAgICAgIGNjLmRpcmVjdG9yLkdsb2JhbEV2ZW50LmVtaXQoY2MuTWdyLkV2ZW50LlNhbGVTdWNjZXNzLCBkYXRhKTtcclxuICAgICAgICB0aGlzLkNsb3NlUGFuZWwoKTtcclxuICAgIH0sXHJcblxyXG4gICAgQ2xvc2VQYW5lbDpmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLk1nci5BdWRpb01nci5wbGF5U0ZYKFwiY2xpY2tcIik7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBEb3VibGVHZXRCeVZlZGlvOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYodGhpcy5TYWxlTnVtIDw9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYy5NZ3IuQXVkaW9NZ3IucGxheVNGWChcImNsaWNrXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzZWxmLnNob3dSZXdhcmRWaWRlbygpXHJcbiAgICAgICAgY2MuTWdyLkFkc01nci5TaG93VmlkZW9BZHMoQWRzUGFyYW0uUG9pbnRDLCBmdW5jdGlvbihvdXQpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYob3V0ID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlbGYubmVlZERvdWJsZSA9IDI7XHJcbiAgICAgICAgICAgICAgICBzZWxmLkNsaWNrU2FsZUJ0bigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxufSk7XHJcbm1vZHVsZS5leHBvcnRzID0gU2FsZVRpcFBhbmVsO1xyXG4iXX0=