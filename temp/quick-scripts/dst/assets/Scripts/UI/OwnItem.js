
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Scripts/UI/OwnItem.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '1adcaxG3ZtKyKc9SYzmKyAE', 'OwnItem');
// Scripts/UI/OwnItem.js

"use strict";

var Event = require("Event");
var UserState = require("UserState");
var ItemType = require("ItemType");
var OwnItem = cc.Class({
  "extends": cc.Component,
  properties: {
    Atlas: cc.SpriteAtlas,
    udAtlas: cc.SpriteAtlas,
    IconSp: cc.Sprite,
    stateSp: cc.Sprite,
    NameLbl: cc.Sprite,
    PriceLbl: cc.Label,
    NumLbl: cc.Label,
    Id: cc.Integer,
    buyPrice: cc.Integer,
    Data: null
  },
  init: function init(data) {
    this.Id = data.Id;
    this.Data = data;
    this.buyPrice = data.buyPrice;
    this.IconSp.spriteFrame = this.Atlas.getSpriteFrame(data.icon);
    this.NameLbl.spriteFrame = this.Atlas.getSpriteFrame(data.name);
    this.NumLbl.string = data.ownNum.toString();
    this.PriceLbl.string = data.buyPrice.toString();
  },
  refreshData: function refreshData(data) {
    this.PriceLbl.string = data.buyPrice.toString();
    this.NumLbl.string = data.ownNum.toString();
    this.buyPrice = data.buyPrice;
    this.stateSp.node.active = false;
  },
  RefreshState: function RefreshState() {
    var data = cc.Mgr.UserDataMgr.getDataByItemTypeAndId(ItemType.Goods, this.Id);
    var marketPrice = data.marketPrice;
    var ownNum = data.ownNum;
    var flag = cc.Mgr.UserDataMgr.CheckIdIsInShowList(this.Id);
    if (data != null && ownNum > 0 && flag == true) {
      this.stateSp.node.active = true;
      if (marketPrice > this.buyPrice) {
        this.stateSp.spriteFrame = this.udAtlas.getSpriteFrame("up");
      } else if (marketPrice < this.buyPrice) {
        this.stateSp.spriteFrame = this.udAtlas.getSpriteFrame("down");
      } else {
        this.stateSp.node.active = false;
      }
    } else {
      this.stateSp.node.active = false;
    }
  },
  OpenSaleTipPanel: function OpenSaleTipPanel() {
    cc.Mgr.AudioMgr.playSFX("goods_" + this.Id);
    if (cc.Mgr.UserDataMgr.userState == UserState.NotOK) {
      var param = {};
      param.text = cc.Mgr.global.getTranslation("InHealDownLine");
      cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);
      return;
    }
    var flag = cc.Mgr.UserDataMgr.CheckIdIsInShowList(this.Data.Id);
    if (flag == true) {
      //cc.log("准备出售东西 = " + this.Data.name);
      cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenSaleTip, this.Data);
    } else {
      var param = {};
      param.text = cc.Mgr.global.getTranslation("goods_" + this.Data.Id) + "沒有市場需求";
      cc.director.GlobalEvent.emit(cc.Mgr.Event.OpenCommonTip, param);
      //cc.log("當前該物品不參與交易");
    }
  }
});

module.exports = OwnItem;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0c1xcVUlcXE93bkl0ZW0uanMiXSwibmFtZXMiOlsiRXZlbnQiLCJyZXF1aXJlIiwiVXNlclN0YXRlIiwiSXRlbVR5cGUiLCJPd25JdGVtIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJBdGxhcyIsIlNwcml0ZUF0bGFzIiwidWRBdGxhcyIsIkljb25TcCIsIlNwcml0ZSIsInN0YXRlU3AiLCJOYW1lTGJsIiwiUHJpY2VMYmwiLCJMYWJlbCIsIk51bUxibCIsIklkIiwiSW50ZWdlciIsImJ1eVByaWNlIiwiRGF0YSIsImluaXQiLCJkYXRhIiwic3ByaXRlRnJhbWUiLCJnZXRTcHJpdGVGcmFtZSIsImljb24iLCJuYW1lIiwic3RyaW5nIiwib3duTnVtIiwidG9TdHJpbmciLCJyZWZyZXNoRGF0YSIsIm5vZGUiLCJhY3RpdmUiLCJSZWZyZXNoU3RhdGUiLCJNZ3IiLCJVc2VyRGF0YU1nciIsImdldERhdGFCeUl0ZW1UeXBlQW5kSWQiLCJHb29kcyIsIm1hcmtldFByaWNlIiwiZmxhZyIsIkNoZWNrSWRJc0luU2hvd0xpc3QiLCJPcGVuU2FsZVRpcFBhbmVsIiwiQXVkaW9NZ3IiLCJwbGF5U0ZYIiwidXNlclN0YXRlIiwiTm90T0siLCJwYXJhbSIsInRleHQiLCJnbG9iYWwiLCJnZXRUcmFuc2xhdGlvbiIsImRpcmVjdG9yIiwiR2xvYmFsRXZlbnQiLCJlbWl0IiwiT3BlbkNvbW1vblRpcCIsIk9wZW5TYWxlVGlwIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDNUIsSUFBSUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLElBQUlFLFFBQVEsR0FBR0YsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNsQyxJQUFJRyxPQUFPLEdBQUdDLEVBQUUsQ0FBQ0MsS0FBSyxDQUFD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QUN3RCxXQUFXLEVBQUUsSUFBSSxDQUFDbEMsSUFBSSxDQUFDO0lBQ3JFLENBQUMsTUFFRDtNQUNJLElBQUkwQixLQUFLLEdBQUcsQ0FBQyxDQUFDO01BQ2RBLEtBQUssQ0FBQ0MsSUFBSSxHQUFHNUMsRUFBRSxDQUFDK0IsR0FBRyxDQUFDYyxNQUFNLENBQUNDLGNBQWMsQ0FBQyxRQUFRLEdBQUMsSUFBSSxDQUFDN0IsSUFBSSxDQUFDSCxFQUFFLENBQUMsR0FBRSxRQUFRO01BQzFFZCxFQUFFLENBQUMrQyxRQUFRLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDakQsRUFBRSxDQUFDK0IsR0FBRyxDQUFDcEMsS0FBSyxDQUFDdUQsYUFBYSxFQUFFUCxLQUFLLENBQUM7TUFDL0Q7SUFDSjtFQUNKO0FBQ0osQ0FBQyxDQUFDOztBQUNGUyxNQUFNLENBQUNDLE9BQU8sR0FBR3RELE9BQU8iLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBFdmVudCA9IHJlcXVpcmUoXCJFdmVudFwiKTtcclxudmFyIFVzZXJTdGF0ZSA9IHJlcXVpcmUoXCJVc2VyU3RhdGVcIik7XHJcbnZhciBJdGVtVHlwZSA9IHJlcXVpcmUoXCJJdGVtVHlwZVwiKTtcclxudmFyIE93bkl0ZW0gPSBjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIEF0bGFzOmNjLlNwcml0ZUF0bGFzLFxyXG4gICAgICAgIHVkQXRsYXM6Y2MuU3ByaXRlQXRsYXMsXHJcbiAgICAgICAgSWNvblNwOmNjLlNwcml0ZSxcclxuICAgICAgICBzdGF0ZVNwOmNjLlNwcml0ZSxcclxuICAgICAgICBOYW1lTGJsOmNjLlNwcml0ZSxcclxuICAgICAgICBQcmljZUxibDpjYy5MYWJlbCxcclxuICAgICAgICBOdW1MYmw6Y2MuTGFiZWwsXHJcbiAgICAgICAgSWQ6Y2MuSW50ZWdlcixcclxuICAgICAgICBidXlQcmljZTpjYy5JbnRlZ2VyLFxyXG4gICAgICAgIERhdGE6bnVsbCxcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGluaXQ6ZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB0aGlzLklkID0gZGF0YS5JZDtcclxuICAgICAgICB0aGlzLkRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuYnV5UHJpY2UgPSBkYXRhLmJ1eVByaWNlO1xyXG4gICAgICAgIHRoaXMuSWNvblNwLnNwcml0ZUZyYW1lID0gdGhpcy5BdGxhcy5nZXRTcHJpdGVGcmFtZShkYXRhLmljb24pO1xyXG4gICAgICAgIHRoaXMuTmFtZUxibC5zcHJpdGVGcmFtZSA9IHRoaXMuQXRsYXMuZ2V0U3ByaXRlRnJhbWUoZGF0YS5uYW1lKTtcclxuICAgICAgICB0aGlzLk51bUxibC5zdHJpbmcgPSBkYXRhLm93bk51bS50b1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuUHJpY2VMYmwuc3RyaW5nID0gZGF0YS5idXlQcmljZS50b1N0cmluZygpO1xyXG4gICAgfSxcclxuXHJcbiAgICByZWZyZXNoRGF0YTpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB0aGlzLlByaWNlTGJsLnN0cmluZyA9IGRhdGEuYnV5UHJpY2UudG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLk51bUxibC5zdHJpbmcgPSBkYXRhLm93bk51bS50b1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuYnV5UHJpY2UgPSBkYXRhLmJ1eVByaWNlO1xyXG4gICAgICAgIHRoaXMuc3RhdGVTcC5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBSZWZyZXNoU3RhdGU6ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgZGF0YSA9IGNjLk1nci5Vc2VyRGF0YU1nci5nZXREYXRhQnlJdGVtVHlwZUFuZElkKEl0ZW1UeXBlLkdvb2RzLCB0aGlzLklkKTtcclxuICAgICAgICB2YXIgbWFya2V0UHJpY2UgPSBkYXRhLm1hcmtldFByaWNlO1xyXG4gICAgICAgIHZhciBvd25OdW0gPSBkYXRhLm93bk51bTtcclxuICAgICAgICB2YXIgZmxhZyA9IGNjLk1nci5Vc2VyRGF0YU1nci5DaGVja0lkSXNJblNob3dMaXN0KHRoaXMuSWQpO1xyXG4gICAgICAgIGlmKGRhdGEgIT0gbnVsbCAmJiBvd25OdW0gPiAwICYmIGZsYWcgPT0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVTcC5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmKG1hcmtldFByaWNlID4gdGhpcy5idXlQcmljZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVNwLnNwcml0ZUZyYW1lID0gdGhpcy51ZEF0bGFzLmdldFNwcml0ZUZyYW1lKFwidXBcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihtYXJrZXRQcmljZSA8IHRoaXMuYnV5UHJpY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVTcC5zcHJpdGVGcmFtZSA9IHRoaXMudWRBdGxhcy5nZXRTcHJpdGVGcmFtZShcImRvd25cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlU3Aubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlU3Aubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIE9wZW5TYWxlVGlwUGFuZWw6ZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5NZ3IuQXVkaW9NZ3IucGxheVNGWChcImdvb2RzX1wiICsgdGhpcy5JZCk7XHJcbiAgICAgICAgaWYoY2MuTWdyLlVzZXJEYXRhTWdyLnVzZXJTdGF0ZSA9PSBVc2VyU3RhdGUuTm90T0spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcGFyYW0gPSB7fTtcclxuICAgICAgICAgICAgcGFyYW0udGV4dCA9IGNjLk1nci5nbG9iYWwuZ2V0VHJhbnNsYXRpb24oXCJJbkhlYWxEb3duTGluZVwiKTtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuR2xvYmFsRXZlbnQuZW1pdChjYy5NZ3IuRXZlbnQuT3BlbkNvbW1vblRpcCwgcGFyYW0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmxhZyA9IGNjLk1nci5Vc2VyRGF0YU1nci5DaGVja0lkSXNJblNob3dMaXN0KHRoaXMuRGF0YS5JZCk7XHJcbiAgICAgICAgaWYoZmxhZyA9PSB0cnVlKVxyXG4gICAgICAgIHsgIFxyXG4gICAgICAgICAgICAvL2NjLmxvZyhcIuWHhuWkh+WHuuWUruS4nOilvyA9IFwiICsgdGhpcy5EYXRhLm5hbWUpO1xyXG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5HbG9iYWxFdmVudC5lbWl0KGNjLk1nci5FdmVudC5PcGVuU2FsZVRpcCwgdGhpcy5EYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBhcmFtID0ge307XHJcbiAgICAgICAgICAgIHBhcmFtLnRleHQgPSBjYy5NZ3IuZ2xvYmFsLmdldFRyYW5zbGF0aW9uKFwiZ29vZHNfXCIrdGhpcy5EYXRhLklkKSsgXCLmspLmnInluILloLTpnIDmsYJcIjtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuR2xvYmFsRXZlbnQuZW1pdChjYy5NZ3IuRXZlbnQuT3BlbkNvbW1vblRpcCwgcGFyYW0pO1xyXG4gICAgICAgICAgICAvL2NjLmxvZyhcIueVtuWJjeipsueJqeWTgeS4jeWPg+iIh+S6pOaYk1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KTtcclxubW9kdWxlLmV4cG9ydHMgPSBPd25JdGVtOyJdfQ==